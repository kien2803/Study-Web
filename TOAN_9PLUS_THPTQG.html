<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√în Luy·ªán To√°n THPTQG 2026</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, Arial, sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }

        header {
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            color: white;
            padding: 1.5rem 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        nav {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        nav button {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s;
        }

        nav button:hover {
            background: rgba(255,255,255,0.3);
        }

        nav button.active {
            background: white;
            color: #2563eb;
            font-weight: 600;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .section {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .section.active {
            display: block;
        }

        h2 {
            color: #2563eb;
            font-size: 1.6rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e2e8f0;
        }

        h3 {
            color: #1e40af;
            font-size: 1.3rem;
            margin: 1.5rem 0 1rem;
        }

        .topic-card {
            background: #f8fafc;
            border-left: 4px solid #2563eb;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 8px;
        }

        .topic-card h4 {
            color: #1e40af;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .topic-card p {
            color: #64748b;
            margin-bottom: 0.8rem;
        }

        .example {
            background: white;
            padding: 1rem;
            border-radius: 6px;
            margin-top: 1rem;
            font-size: 0.95rem;
        }

        .example strong {
            color: #16a34a;
        }

        .test-config {
            background: #f1f5f9;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .radio-group {
            display: flex;
            gap: 2rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
        }

        .radio-group input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .input-group {
            margin: 1rem 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #475569;
        }

        .input-group input[type="number"] {
            width: 150px;
            padding: 0.6rem;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1rem;
        }

        .btn {
            background: #2563eb;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background 0.3s;
            margin-right: 0.5rem;
            margin-top: 0.5rem;
        }

        .btn:hover {
            background: #1e40af;
        }

        .btn-success {
            background: #16a34a;
        }

        .btn-success:hover {
            background: #15803d;
        }

        .btn-danger {
            background: #dc2626;
        }

        .btn-danger:hover {
            background: #b91c1c;
        }

        .btn-secondary {
            background: #64748b;
        }

        .btn-secondary:hover {
            background: #475569;
        }

        .question-list {
            margin-top: 2rem;
        }

        .question-item {
            background: #fafafa;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .question-header {
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .question-prompt {
            font-size: 1.05rem;
            margin-bottom: 1rem;
            color: #1e293b;
        }

        .options {
            margin-left: 1rem;
        }

        .option-item {
            display: flex;
            align-items: flex-start;
            margin: 0.8rem 0;
            cursor: pointer;
        }

        .option-item input[type="radio"] {
            margin-right: 0.8rem;
            margin-top: 0.2rem;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .option-item label {
            cursor: pointer;
            font-size: 1rem;
        }

        .short-answer {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1rem;
            margin-top: 0.5rem;
        }

        .results {
            background: #f0fdf4;
            border: 2px solid #16a34a;
            padding: 2rem;
            border-radius: 8px;
            margin-top: 2rem;
        }

        .score-display {
            font-size: 2rem;
            font-weight: 700;
            color: #16a34a;
            text-align: center;
            margin-bottom: 1rem;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-card {
            background: white;
            padding: 1rem;
            border-radius: 6px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2563eb;
        }

        .stat-label {
            color: #64748b;
            font-size: 0.9rem;
            margin-top: 0.3rem;
        }

        .wrong-answers {
            margin-top: 2rem;
        }

        .wrong-item {
            background: #fef2f2;
            border-left: 4px solid #dc2626;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-radius: 6px;
        }

        .wrong-item .question-num {
            font-weight: 700;
            color: #dc2626;
            margin-bottom: 0.5rem;
        }

        .answer-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        .user-answer, .correct-answer {
            padding: 0.8rem;
            border-radius: 6px;
        }

        .user-answer {
            background: #fee;
            border: 1px solid #fca5a5;
        }

        .correct-answer {
            background: #dcfce7;
            border: 1px solid #86efac;
        }

        .explanation {
            background: #f1f5f9;
            padding: 1rem;
            border-radius: 6px;
            margin-top: 1rem;
            font-size: 0.95rem;
        }

        .explanation strong {
            color: #2563eb;
        }

        .error-log-list {
            margin-top: 1rem;
        }

        .error-item {
            background: #fef2f2;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-radius: 8px;
            border-left: 4px solid #dc2626;
        }

        .error-meta {
            color: #64748b;
            font-size: 0.85rem;
            margin-bottom: 0.8rem;
        }

        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #94a3b8;
        }

        /* Dark Mode */
        body.dark-mode {
            background: #0f172a;
            color: #e2e8f0;
        }

        body.dark-mode .section,
        body.dark-mode .topic-card,
        body.dark-mode .question-item,
        body.dark-mode .test-config {
            background: #1e293b;
            border-color: #334155;
        }

        body.dark-mode .stat-card,
        body.dark-mode .formula-list {
            background: #334155;
        }

        body.dark-mode h2,
        body.dark-mode h3,
        body.dark-mode h4 {
            color: #60a5fa;
        }

        /* Achievement Badge */
        .achievement {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 0.3rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .achievement.locked {
            background: #64748b;
            opacity: 0.5;
        }

        /* Streak Display */
        .streak-display {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .streak-number {
            font-size: 3rem;
            font-weight: 700;
            line-height: 1;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        body.dark-mode .modal-content {
            background: #1e293b;
        }

        .badge {
            display: inline-block;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .badge-easy {
            background: #dcfce7;
            color: #166534;
        }

        .badge-medium {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-hard {
            background: #fee2e2;
            color: #991b1b;
        }

        .alert {
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
        }

        .alert-success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #86efac;
        }

        .alert-info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #93c5fd;
        }

        .dashboard-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .dashboard-card h3 {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .dashboard-card .value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .progress-bar-container {
            background: #e5e7eb;
            height: 24px;
            border-radius: 12px;
            overflow: hidden;
            margin: 0.8rem 0;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 6px;
            margin-bottom: 0.8rem;
            border-left: 4px solid #2563eb;
        }

        footer {
            text-align: center;
            padding: 2rem;
            color: #64748b;
            font-size: 0.9rem;
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
            }

            header, nav, footer, .btn, .test-config, #testTimer {
                display: none !important;
            }

            .section {
                display: block !important;
                box-shadow: none;
                page-break-after: always;
            }

            .question-item {
                page-break-inside: avoid;
                border: 1px solid #ccc;
                padding: 1rem;
                margin-bottom: 1rem;
            }

            .option-item input[type="radio"] {
                display: none;
            }

            .option-item::before {
                content: "‚òê ";
                margin-right: 0.5rem;
                font-size: 1.2rem;
            }

            .results, .wrong-answers {
                display: none;
            }
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.4rem;
            }

            nav {
                gap: 0.5rem;
            }

            nav button {
                padding: 0.4rem 0.8rem;
                font-size: 0.85rem;
            }

            .section {
                padding: 1.5rem;
            }

            h2 {
                font-size: 1.3rem;
            }

            .answer-comparison {
                grid-template-columns: 1fr;
            }

            .stats {
                grid-template-columns: 1fr;
            }
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>üìö √îN LUY·ªÜN TO√ÅN THPTQG 2026</h1>
        <nav id="mainNav"></nav>
    </header>

    <div class="container">
        <!-- Timer ƒë·∫øm ng∆∞·ª£c -->
        <div id="testTimer" style="display: none; position: fixed; top: 80px; right: 20px; background: white; padding: 1rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 100;">
            <div style="font-size: 0.9rem; color: #64748b; margin-bottom: 0.3rem;">Th·ªùi gian c√≤n l·∫°i</div>
            <div id="timerDisplay" style="font-size: 2rem; font-weight: 700; color: #2563eb;">90:00</div>
            <button class="btn btn-danger" style="width: 100%; margin-top: 0.5rem; padding: 0.5rem;" onclick="app.stopTimer()">D·ª´ng timer</button>
        </div>

        <section id="dashboard" class="section active">
            <h2>üìä Dashboard - Ti·∫øn ƒê·ªô H·ªçc T·∫≠p</h2>
            <div id="dashboardContent"></div>
        </section>

        <section id="syllabus" class="section">
            <h2>Ch∆∞∆°ng Tr√¨nh To√°n THPTQG 2026</h2>
            
            <div class="topic-card">
                <h4>1. H√†m S·ªë & Kh·∫£o S√°t H√†m S·ªë</h4>
                <p>Nghi√™n c·ª©u t√≠nh ch·∫•t c·ªßa h√†m s·ªë: t√≠nh ƒë∆°n ƒëi·ªáu, c·ª±c tr·ªã, gi√° tr·ªã l·ªõn nh·∫•t/nh·ªè nh·∫•t. X√°c ƒë·ªãnh ti·ªám c·∫≠n ƒë·ª©ng v√† ngang. V·∫Ω v√† ph√¢n t√≠ch ƒë·ªì th·ªã h√†m b·∫≠c 3, b·∫≠c 4, h√†m ph√¢n th·ª©c h·ªØu t·ªâ.</p>
                <div class="example">
                    <strong>V√≠ d·ª•:</strong> Cho h√†m s·ªë y = x¬≥ - 3x¬≤ + 2. T√¨m kho·∫£ng ƒë∆°n ƒëi·ªáu c·ªßa h√†m s·ªë.<br>
                    <em>Gi·∫£i:</em> y' = 3x¬≤ - 6x = 3x(x - 2). H√†m ƒë·ªìng bi·∫øn khi y' > 0 ‚ü∫ x < 0 ho·∫∑c x > 2.
                </div>
            </div>

            <div class="topic-card">
                <h4>2. ƒê·∫°o H√†m & ·ª®ng D·ª•ng ƒê·∫°o H√†m</h4>
                <p>Quy t·∫Øc t√≠nh ƒë·∫°o h√†m c·ªßa c√°c h√†m s·ªë c∆° b·∫£n v√† h·ª£p. Vi·∫øt ph∆∞∆°ng tr√¨nh ti·∫øp tuy·∫øn t·∫°i m·ªôt ƒëi·ªÉm. T√¨m c·ª±c tr·ªã, gi√° tr·ªã l·ªõn nh·∫•t/nh·ªè nh·∫•t c·ªßa h√†m s·ªë.</p>
            </div>

            <div class="topic-card">
                <h4>3. T√≠ch Ph√¢n & ·ª®ng D·ª•ng</h4>
                <p>T√≠nh nguy√™n h√†m v√† t√≠ch ph√¢n x√°c ƒë·ªãnh. T√≠nh di·ªán t√≠ch h√¨nh ph·∫≥ng gi·ªõi h·∫°n b·ªüi c√°c ƒë∆∞·ªùng cong.</p>
            </div>

            <div class="topic-card">
                <h4>4. S·ªë Ph·ª©c</h4>
                <p>Bi·ªÉu di·ªÖn s·ªë ph·ª©c d∆∞·ªõi d·∫°ng ƒë·∫°i s·ªë. C√°c ph√©p to√°n c·ªông, tr·ª´, nh√¢n, chia s·ªë ph·ª©c.</p>
            </div>
        </section>

        <section id="test" class="section">
            <h2>L√†m ƒê·ªÅ Thi</h2>
            
            <div class="test-config">
                <h3>C·∫•u h√¨nh ƒë·ªÅ thi</h3>
                
                <div class="radio-group">
                    <label>
                        <input type="radio" name="testMode" value="profile" checked>
                        ƒê·ªÅ thi ƒë·∫ßy ƒë·ªß (Profile)
                    </label>
                    <label>
                        <input type="radio" name="testMode" value="chapter">
                        Luy·ªán theo ch∆∞∆°ng
                    </label>
                </div>

                <div id="profileMode">
                    <h4 style="margin-top: 1rem; color: #475569;">Ch·ªçn Profile:</h4>
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="profile" value="A" checked>
                            Profile A (50 c√¢u)
                        </label>
                        <label>
                            <input type="radio" name="profile" value="B">
                            Profile B (30 c√¢u)
                        </label>
                    </div>

                    <div class="input-group">
                        <label for="totalQuestions">S·ªë c√¢u h·ªèi:</label>
                        <input type="number" id="totalQuestions" min="10" max="100" value="50">
                    </div>
                </div>

                <div id="chapterMode" style="display: none;">
                    <h4 style="margin-top: 1rem; color: #475569;">Ch·ªçn ch∆∞∆°ng:</h4>
                    <div class="form-group">
                        <select id="chapterSelect" style="width: 100%; padding: 0.7rem; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 1rem;">
                            <option value="">-- T·∫•t c·∫£ ch∆∞∆°ng --</option>
                            <option value="H√†m s·ªë">H√†m s·ªë & Kh·∫£o s√°t</option>
                            <option value="ƒê·∫°o h√†m">ƒê·∫°o h√†m & ·ª®ng d·ª•ng</option>
                            <option value="T√≠ch ph√¢n">T√≠ch ph√¢n & ·ª®ng d·ª•ng</option>
                            <option value="M≈© & Logarit">M≈© & Logarit</option>
                            <option value="S·ªë ph·ª©c">S·ªë ph·ª©c</option>
                            <option value="T·ªï h·ª£p">T·ªï h·ª£p & X√°c su·∫•t</option>
                        </select>
                    </div>

                    <h4 style="margin-top: 1rem; color: #475569;">Ch·ªçn m·ª©c ƒë·ªô:</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; margin: 1rem 0;">
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" id="levelEasy" checked>
                            <span class="badge badge-easy">Nh·∫≠n bi·∫øt</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" id="levelMedium" checked>
                            <span class="badge badge-medium">Th√¥ng hi·ªÉu</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" id="levelHard" checked>
                            <span class="badge badge-hard">V·∫≠n d·ª•ng</span>
                        </label>
                    </div>

                    <div class="input-group">
                        <label for="chapterQuestions">S·ªë c√¢u h·ªèi:</label>
                        <input type="number" id="chapterQuestions" min="5" max="100" value="20">
                    </div>

                    <div id="chapterStats" style="background: #f8fafc; padding: 1rem; border-radius: 6px; margin: 1rem 0; font-size: 0.9rem;"></div>
                </div>

                <button class="btn" onclick="app.generateTest()">üé≤ T·∫°o ƒë·ªÅ m·ªõi</button>
                <button class="btn btn-success" onclick="app.submitTest()">‚úì N·ªôp b√†i</button>
                <button class="btn btn-secondary" onclick="app.startTimer(90)">‚è±Ô∏è B·∫≠t timer 90p</button>
            </div>

            <div id="testContent"></div>
            <div id="testResults"></div>
        </section>

        <section id="practice" class="section">
            <h2>üìä Th·ªëng K√™ Theo Ch∆∞∆°ng</h2>
            <div id="chapterStatistics"></div>
        </section>

        <section id="errorlog" class="section">
            <h2>S·ªï L·ªói</h2>
            <p>C√°c c√¢u h·ªèi b·∫°n ƒë√£ l√†m sai s·∫Ω ƒë∆∞·ª£c l∆∞u l·∫°i ·ªü ƒë√¢y ƒë·ªÉ √¥n t·∫≠p.</p>
            
            <div style="margin: 1.5rem 0;">
                <button class="btn" onclick="app.retryErrors()">üîÑ Luy·ªán l·∫°i c√°c c√¢u sai</button>
                <button class="btn btn-danger" onclick="app.clearErrorLog()">üóëÔ∏è X√≥a t·∫•t c·∫£</button>
            </div>

            <div id="errorLogContent"></div>
        </section>

        <section id="manage" class="section">
            <h2>Qu·∫£n L√Ω C√¢u H·ªèi</h2>
            
            <div style="margin-bottom: 2rem;">
                <button class="btn" onclick="app.openAddQuestionModal()">‚ûï Th√™m c√¢u m·ªõi</button>
                <button class="btn" onclick="document.getElementById('importFile').click()">üì• Import JSON</button>
                <input type="file" id="importFile" style="display: none;" accept=".json" onchange="app.importQuestions(event)">
                <button class="btn" onclick="app.exportQuestions()">üì§ Export JSON</button>
                <button class="btn btn-danger" onclick="app.resetToDefault()">üîÑ Reset v·ªÅ m·∫∑c ƒë·ªãnh</button>
            </div>
            
            <div id="bankStatsDisplay" style="background: #f1f5f9; padding: 1rem; border-radius: 6px; margin-bottom: 1.5rem;"></div>
            
            <div id="questionManager"></div>
        </section>

        <section id="bookmarks" class="section">
            <h2>üîñ C√¢u H·ªèi ƒê√°nh D·∫•u</h2>
            <p>ƒê√°nh d·∫•u c√°c c√¢u kh√≥ ƒë·ªÉ √¥n l·∫°i sau.</p>
            <div id="bookmarksContent"></div>
        </section>

        <section id="achievements" class="section">
            <h2>üèÜ Th√†nh T√≠ch & Huy Hi·ªáu</h2>
            <div id="achievementsContent"></div>
        </section>

        <section id="analytics" class="section">
            <h2>üìà Ph√¢n T√≠ch Hi·ªáu Su·∫•t</h2>
            <div id="analyticsContent"></div>
        </section>
        
        <section id="cheatsheet" class="section">
            <h2>C√¥ng Th·ª©c Nhanh</h2>
            
            <div style="background: #f1f5f9; padding: 1.5rem; border-radius: 8px;">
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #1e40af; margin-bottom: 1rem;">ƒê·∫°o h√†m c∆° b·∫£n</h4>
                    <div style="background: white; padding: 1rem; border-radius: 6px;">
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">(x‚Åø)' = n¬∑x‚Åø‚Åª¬π</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">(eÀ£)' = eÀ£</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">(sin x)' = cos x</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">(cos x)' = -sin x</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">(tan x)' = 1/cos¬≤x</div>
                    </div>
                </div>

                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #1e40af; margin-bottom: 1rem;">T√≠ch ph√¢n c∆° b·∫£n</h4>
                    <div style="background: white; padding: 1rem; border-radius: 6px;">
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">‚à´x‚Åø dx = x‚Åø‚Å∫¬π/(n+1) + C</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">‚à´eÀ£ dx = eÀ£ + C</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">‚à´sin x dx = -cos x + C</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">‚à´cos x dx = sin x + C</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">‚à´1/x dx = ln|x| + C</div>
                    </div>
                </div>

                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #1e40af; margin-bottom: 1rem;">C√¥ng th·ª©c l∆∞·ª£ng gi√°c</h4>
                    <div style="background: white; padding: 1rem; border-radius: 6px;">
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">sin¬≤x + cos¬≤x = 1</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">sin 2x = 2sin x¬∑cos x</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">cos 2x = cos¬≤x - sin¬≤x</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">tan x = sin x / cos x</div>
                    </div>
                </div>

                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #1e40af; margin-bottom: 1rem;">C√¥ng th·ª©c t·ªï h·ª£p</h4>
                    <div style="background: white; padding: 1rem; border-radius: 6px;">
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">P(n) = n!</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">A(n,k) = n!/(n-k)!</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">C(n,k) = n!/[k!(n-k)!]</div>
                        <div style="padding: 0.5rem 0; font-family: 'Courier New', monospace;">C(n,k) = C(n, n-k)</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <footer>
        <p>√în Luy·ªán To√°n THPTQG 2026 | <span id="bankCount"></span> c√¢u h·ªèi</p>
    </footer>

    <script>
        'use strict';

        // ============================================
        // SAMPLE QUESTION BANK (150 c√¢u ƒë·∫ßy ƒë·ªß)
        // ============================================
        
        const SAMPLE_BANK = [
            // H√ÄM S·ªê (25 c√¢u)
            {id: "Q-001", type: "mcq", difficulty: "easy", topic: "H√†m s·ªë", prompt: "Cho h√†m s·ªë y = x¬≥ - 3x + 1. H√†m s·ªë ƒë·ªìng bi·∫øn tr√™n kho·∫£ng n√†o?", options: ["(-‚àû; -1)", "(-1; 1)", "(1; +‚àû)", "(-‚àû; -1) v√† (1; +‚àû)"], answer: 3, explain: "y' = 3x¬≤ - 3 = 3(x¬≤ - 1). H√†m ƒë·ªìng bi·∫øn khi y' > 0 ‚ü∫ x < -1 ho·∫∑c x > 1"},
            {id: "Q-002", type: "mcq", difficulty: "medium", topic: "H√†m s·ªë", prompt: "H√†m s·ªë y = x‚Å¥ - 2x¬≤ c√≥ bao nhi√™u ƒëi·ªÉm c·ª±c tr·ªã?", options: ["1", "2", "3", "4"], answer: 2, explain: "y' = 4x¬≥ - 4x = 4x(x¬≤ - 1) = 0 ‚ü∫ x ‚àà {-1, 0, 1}. C√≥ 3 c·ª±c tr·ªã"},
            {id: "Q-003", type: "mcq", difficulty: "easy", topic: "H√†m s·ªë", prompt: "ƒê·ªì th·ªã h√†m s·ªë y = 1/(x - 2) c√≥ ti·ªám c·∫≠n ƒë·ª©ng l√†?", options: ["x = -2", "x = 0", "x = 1", "x = 2"], answer: 3, explain: "Ti·ªám c·∫≠n ƒë·ª©ng l√† x = 2"},
            {id: "Q-004", type: "truefalse", difficulty: "easy", topic: "H√†m s·ªë", prompt: "H√†m s·ªë y = -x¬≤ + 4x - 3 c√≥ gi√° tr·ªã l·ªõn nh·∫•t b·∫±ng 1.", answer: true, explain: "y = -(x - 2)¬≤ + 1 ‚â§ 1"},
            {id: "Q-005", type: "mcq", difficulty: "medium", topic: "H√†m s·ªë", prompt: "ƒê·ªì th·ªã h√†m s·ªë y = (2x + 1)/(x - 1) c√≥ ti·ªám c·∫≠n ngang l√†?", options: ["y = 0", "y = 1", "y = 2", "y = -1"], answer: 2, explain: "lim(x‚Üí‚àû) y = 2"},
            {id: "Q-006", type: "short", difficulty: "medium", topic: "H√†m s·ªë", prompt: "T√¨m gi√° tr·ªã nh·ªè nh·∫•t c·ªßa y = x + 1/x tr√™n (0; +‚àû). (Nh·∫≠p s·ªë)", answer: "2", explain: "y' = 1 - 1/x¬≤ = 0 ‚ü∫ x = 1. y(1) = 2"},
            {id: "Q-007", type: "mcq", difficulty: "easy", topic: "H√†m s·ªë", prompt: "Cho y = x¬≤ - 4x + 5. ƒê·ªì th·ªã c√≥ ƒë·ªânh t·∫°i?", options: ["(2; 1)", "(2; -1)", "(-2; 1)", "(1; 2)"], answer: 0, explain: "ƒê·ªânh: x = 2, y(2) = 1"},
            {id: "Q-008", type: "mcq", difficulty: "easy", topic: "H√†m s·ªë", prompt: "H√†m s·ªë y = x¬≥ c√≥ t√≠nh ch·∫•t?", options: ["Ch·∫µn", "L·∫ª", "Kh√¥ng ch·∫µn kh√¥ng l·∫ª", "Tu·∫ßn ho√†n"], answer: 1, explain: "f(-x) = -f(x). H√†m l·∫ª"},
            {id: "Q-009", type: "mcq", difficulty: "easy", topic: "H√†m s·ªë", prompt: "H√†m ch·∫µn l√†?", options: ["y = x¬≥", "y = x¬≤ + 1", "y = x + 1", "y = x¬≥ + x"], answer: 1, explain: "f(-x) = f(x)"},
            {id: "Q-010", type: "mcq", difficulty: "easy", topic: "H√†m s·ªë", prompt: "TXƒê c·ªßa y = 1/x l√†?", options: ["‚Ñù", "‚Ñù\\{0}", "(0; +‚àû)", "(-‚àû; 0)"], answer: 1, explain: "x ‚â† 0"},
            {id: "Q-011", type: "mcq", difficulty: "medium", topic: "H√†m s·ªë", prompt: "H√†m y = x‚Å¥ - 4x¬≤ + 3 c√≥ bao nhi√™u c·ª±c tr·ªã?", options: ["1", "2", "3", "4"], answer: 2, explain: "y' = 4x¬≥ - 8x = 4x(x¬≤ - 2) = 0 c√≥ 3 nghi·ªám"},
            {id: "Q-012", type: "mcq", difficulty: "hard", topic: "H√†m s·ªë", prompt: "ƒê·ªì th·ªã y = x¬≥ - 3x¬≤ + 2 c·∫Øt Ox t·∫°i bao nhi√™u ƒëi·ªÉm?", options: ["1", "2", "3", "0"], answer: 1, explain: "(x - 1)¬≤(x + 2) = 0 c√≥ 2 nghi·ªám ph√¢n bi·ªát"},
            {id: "Q-013", type: "mcq", difficulty: "easy", topic: "H√†m s·ªë", prompt: "TXƒê c·ªßa y = ‚àö(x - 2) l√†?", options: ["[2; +‚àû)", "(2; +‚àû)", "(-‚àû; 2]", "‚Ñù"], answer: 0, explain: "x - 2 ‚â• 0"},
            {id: "Q-014", type: "mcq", difficulty: "medium", topic: "H√†m s·ªë", prompt: "y = sin x + cos x c√≥ gi√° tr·ªã l·ªõn nh·∫•t?", options: ["1", "‚àö2", "2", "‚àö3"], answer: 1, explain: "y = ‚àö2¬∑sin(x + œÄ/4) ‚â§ ‚àö2"},
            {id: "Q-015", type: "truefalse", difficulty: "easy", topic: "H√†m s·ªë", prompt: "H√†m y = |x| c√≥ ƒë·∫°o h√†m t·∫°i x = 0.", answer: false, explain: "Kh√¥ng c√≥ ƒë·∫°o h√†m t·∫°i x = 0"},
            {id: "Q-016", type: "mcq", difficulty: "medium", topic: "H√†m s·ªë", prompt: "ƒê·ªì th·ªã y = x/(x¬≤ + 1) nh·∫≠n t√¢m ƒë·ªëi x·ª©ng?", options: ["(0; 0)", "(1; 0)", "(0; 1)", "(1; 1)"], answer: 0, explain: "H√†m l·∫ª n√™n ƒë·ªëi x·ª©ng qua O"},
            {id: "Q-017", type: "mcq", difficulty: "easy", topic: "H√†m s·ªë", prompt: "Gi√° tr·ªã nh·ªè nh·∫•t c·ªßa y = x¬≤ l√†?", options: ["0", "1", "-1", "Kh√¥ng c√≥"], answer: 0, explain: "y = x¬≤ ‚â• 0, min = 0 t·∫°i x = 0"},
            {id: "Q-018", type: "mcq", difficulty: "medium", topic: "H√†m s·ªë", prompt: "H√†m y = 2x¬≥ - 3x¬≤ - 12x + 5 ƒë·∫°t c·ª±c ƒë·∫°i t·∫°i?", options: ["x = -1", "x = 1", "x = 2", "x = -2"], answer: 0, explain: "y' = 6x¬≤ - 6x - 12 = 0 ‚üπ x ‚àà {-1, 2}. Ki·ªÉm tra y''(-1) < 0"},
            {id: "Q-019", type: "short", difficulty: "medium", topic: "H√†m s·ªë", prompt: "S·ªë c·ª±c tr·ªã c·ªßa y = x‚Å¥ - 8x¬≤ + 10? (Nh·∫≠p s·ªë)", answer: "3", explain: "y' = 4x¬≥ - 16x = 4x(x¬≤ - 4) = 0 ‚üπ 3 c·ª±c tr·ªã"},
            {id: "Q-020", type: "mcq", difficulty: "hard", topic: "H√†m s·ªë", prompt: "C√≥ bao nhi√™u m ƒë·ªÉ y = x¬≥ - 3mx¬≤ + 3 c√≥ 2 c·ª±c tr·ªã x‚ÇÅ, x‚ÇÇ v·ªõi |x‚ÇÅ - x‚ÇÇ| = 2?", options: ["0", "1", "2", "V√¥ s·ªë"], answer: 1, explain: "y' = 3x¬≤ - 6mx = 0. |x‚ÇÅ - x‚ÇÇ| = 2m = 2 ‚üπ m = 1"},
            {id: "Q-021", type: "mcq", difficulty: "easy", topic: "H√†m s·ªë", prompt: "Parabol y = x¬≤ + 1 c√≥ ƒë·ªânh t·∫°i?", options: ["(0; 0)", "(1; 0)", "(0; 1)", "(1; 1)"], answer: 2, explain: "ƒê·ªânh t·∫°i (0; 1)"},
            {id: "Q-022", type: "mcq", difficulty: "medium", topic: "H√†m s·ªë", prompt: "y = x + 1/x c√≥ bao nhi√™u c·ª±c tr·ªã?", options: ["0", "1", "2", "3"], answer: 2, explain: "y' = 1 - 1/x¬≤ = 0 ‚üπ x = ¬±1"},
            {id: "Q-023", type: "mcq", difficulty: "hard", topic: "H√†m s·ªë", prompt: "S·ªë ti·ªám c·∫≠n c·ªßa y = (x¬≤ - 1)/(x¬≤ - 4)?", options: ["1", "2", "3", "4"], answer: 2, explain: "2 ti·ªám c·∫≠n ƒë·ª©ng x = ¬±2, 1 ngang y = 1"},
            {id: "Q-024", type: "truefalse", difficulty: "medium", topic: "H√†m s·ªë", prompt: "H√†m y = x‚Å¥ + x¬≤ + 1 kh√¥ng c√≥ c·ª±c tr·ªã.", answer: true, explain: "y' = 4x¬≥ + 2x = 2x(2x¬≤ + 1) = 0 ch·ªâ t·∫°i x = 0 (kh√¥ng ph·∫£i c·ª±c tr·ªã)"},
            {id: "Q-025", type: "mcq", difficulty: "medium", topic: "H√†m s·ªë", prompt: "ƒê∆∞·ªùng th·∫≥ng y = 2x + m c·∫Øt y = x¬≥ t·∫°i 3 ƒëi·ªÉm khi?", options: ["m = 0", "m > 0", "m < 0", "M·ªçi m"], answer: 3, explain: "Ph∆∞∆°ng tr√¨nh b·∫≠c 3 lu√¥n c√≥ nghi·ªám"},
            
            // ƒê·∫†O H√ÄM (25 c√¢u)
            {id: "Q-026", type: "mcq", difficulty: "easy", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = x‚Åµ l√†?", options: ["4x‚Å¥", "5x‚Å¥", "x‚Å¥", "5x‚Åµ"], answer: 1, explain: "(x‚Åø)' = n¬∑x‚Åø‚Åª¬π"},
            {id: "Q-027", type: "mcq", difficulty: "easy", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = eÀ£ l√†?", options: ["eÀ£", "xeÀ£‚Åª¬π", "eÀ£‚Åª¬π", "e"], answer: 0, explain: "(eÀ£)' = eÀ£"},
            {id: "Q-028", type: "mcq", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = ln(2x + 1) l√†?", options: ["1/(2x + 1)", "2/(2x + 1)", "1/2x", "2/x"], answer: 1, explain: "y' = 2/(2x + 1)"},
            {id: "Q-029", type: "short", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = sin(3x) t·∫°i x = 0? (Nh·∫≠p s·ªë)", answer: "3", explain: "y' = 3cos(3x), y'(0) = 3"},
            {id: "Q-030", type: "truefalse", difficulty: "easy", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa h√†m h·∫±ng y = 5 b·∫±ng 0.", answer: true, explain: "c' = 0"},
            {id: "Q-031", type: "mcq", difficulty: "easy", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = cos x l√†?", options: ["sin x", "-sin x", "cos x", "-cos x"], answer: 1, explain: "(cos x)' = -sin x"},
            {id: "Q-032", type: "mcq", difficulty: "easy", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = 3x¬≤ - 5x + 2 l√†?", options: ["6x - 5", "6x + 5", "3x - 5", "6x"], answer: 0, explain: "y' = 6x - 5"},
            {id: "Q-033", type: "mcq", difficulty: "easy", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = 7 l√†?", options: ["7", "0", "1", "7x"], answer: 1, explain: "H·∫±ng s·ªë ‚Üí 0"},
            {id: "Q-034", type: "mcq", difficulty: "easy", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = ‚àöx l√†?", options: ["1/(2‚àöx)", "2‚àöx", "1/‚àöx", "‚àöx"], answer: 0, explain: "(x^(1/2))' = 1/(2‚àöx)"},
            {id: "Q-035", type: "mcq", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = x¬∑eÀ£ l√†?", options: ["eÀ£", "x¬∑eÀ£", "(x+1)eÀ£", "(x-1)eÀ£"], answer: 2, explain: "y' = eÀ£ + xeÀ£ = (x+1)eÀ£"},
            {id: "Q-036", type: "mcq", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "Ti·∫øp tuy·∫øn c·ªßa y = x¬≥ t·∫°i (1; 1) l√†?", options: ["y = 3x - 2", "y = x + 2", "y = 3x + 1", "y = 3x"], answer: 0, explain: "y' = 3x¬≤, y'(1) = 3. PT: y - 1 = 3(x - 1)"},
            {id: "Q-037", type: "mcq", difficulty: "easy", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = sin x + cos x l√†?", options: ["cos x - sin x", "cos x + sin x", "-cos x - sin x", "sin x - cos x"], answer: 0, explain: "(sin x)' + (cos x)' = cos x - sin x"},
            {id: "Q-038", type: "mcq", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = ‚àö(x¬≤ + 1) l√†?", options: ["x/‚àö(x¬≤+1)", "2x/‚àö(x¬≤+1)", "1/‚àö(x¬≤+1)", "x"], answer: 0, explain: "y' = 2x/(2‚àö(x¬≤+1)) = x/‚àö(x¬≤+1)"},
            {id: "Q-039", type: "short", difficulty: "easy", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = x‚Å∑ t·∫°i x = 1? (Nh·∫≠p s·ªë)", answer: "7", explain: "y' = 7x‚Å∂, y'(1) = 7"},
            {id: "Q-040", type: "mcq", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = (2x + 1)¬≥ l√†?", options: ["6(2x + 1)¬≤", "3(2x + 1)¬≤", "6x(2x + 1)¬≤", "2(2x + 1)¬≤"], answer: 0, explain: "y' = 3(2x + 1)¬≤¬∑2 = 6(2x + 1)¬≤"},
            {id: "Q-041", type: "mcq", difficulty: "easy", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = ln x l√†?", options: ["1/x", "ln x", "x", "e/x"], answer: 0, explain: "(ln x)' = 1/x"},
            {id: "Q-042", type: "truefalse", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "N·∫øu f'(x‚ÇÄ) = 0 th√¨ x‚ÇÄ l√† c·ª±c tr·ªã.", answer: false, explain: "ƒêi·ªÅu ki·ªán c·∫ßn nh∆∞ng ch∆∞a ƒë·ªß"},
            {id: "Q-043", type: "mcq", difficulty: "hard", topic: "ƒê·∫°o h√†m", prompt: "Ti·∫øp tuy·∫øn c·ªßa y = x¬≤ + 1 song song y = 4x + 2 c√≥ PT?", options: ["y = 4x - 3", "y = 4x + 1", "y = 4x", "y = 4x - 1"], answer: 0, explain: "y' = 2x = 4 ‚üπ x = 2, y(2) = 5. PT: y = 4x - 3"},
            {id: "Q-044", type: "mcq", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "Cho y = 1/x. T√≠nh y'(2)?", options: ["-1/4", "1/4", "-1/2", "1/2"], answer: 0, explain: "y' = -1/x¬≤, y'(2) = -1/4"},
            {id: "Q-045", type: "mcq", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·∫•p 2 c·ªßa y = x‚Å¥ l√†?", options: ["4x¬≥", "12x¬≤", "24x", "12x¬≥"], answer: 1, explain: "y' = 4x¬≥, y'' = 12x¬≤"},
            {id: "Q-046", type: "truefalse", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "N·∫øu f'(x) > 0 tr√™n (a;b) th√¨ f ƒë·ªìng bi·∫øn.", answer: true, explain: "ƒê·ªãnh l√Ω v·ªÅ t√≠nh ƒë∆°n ƒëi·ªáu"},
            {id: "Q-047", type: "mcq", difficulty: "easy", topic: "ƒê·∫°o h√†m", prompt: "Gia t·ªëc l√† ƒë·∫°o h√†m c·∫•p m·∫•y c·ªßa qu√£ng ƒë∆∞·ªùng?", options: ["1", "2", "3", "4"], answer: 1, explain: "a(t) = s''(t)"},
            {id: "Q-048", type: "mcq", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = e^(2x) l√†?", options: ["e^(2x)", "2e^(2x)", "2xe^(2x)", "e^(2x-1)"], answer: 1, explain: "y' = e^(2x)¬∑2"},
            {id: "Q-049", type: "short", difficulty: "hard", topic: "ƒê·∫°o h√†m", prompt: "Max c·ªßa y = x¬≥ - 3x tr√™n [-2; 2]? (Nh·∫≠p s·ªë)", answer: "2", explain: "y' = 3x¬≤ - 3 = 0 ‚üπ x = ¬±1. So s√°nh: max = 2"},
            {id: "Q-050", type: "mcq", difficulty: "medium", topic: "ƒê·∫°o h√†m", prompt: "ƒê·∫°o h√†m c·ªßa y = tan x l√†?", options: ["1/cos¬≤x", "1/sin¬≤x", "sec¬≤x", "csc¬≤x"], answer: 0, explain: "(tan x)' = 1/cos¬≤x"},
            
            // T√çCH PH√ÇN (25 c√¢u)
            {id: "Q-051", type: "mcq", difficulty: "easy", topic: "T√≠ch ph√¢n", prompt: "T√≠nh ‚à´‚ÇÄ¬≤ x dx?", options: ["1", "2", "3", "4"], answer: 1, explain: "[x¬≤/2]‚ÇÄ¬≤ = 2"},
            {id: "Q-052", type: "mcq", difficulty: "easy", topic: "T√≠ch ph√¢n", prompt: "‚à´ eÀ£ dx = ?", options: ["eÀ£ + C", "xeÀ£ + C", "eÀ£‚Åª¬π + C", "e + C"], answer: 0, explain: "Nguy√™n h√†m c·ªßa eÀ£"},
            {id: "Q-053", type: "short", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "T√≠nh ‚à´‚ÇÅ·µâ (1/x) dx. (Nh·∫≠p s·ªë)", answer: "1", explain: "[ln x]‚ÇÅ·µâ = 1"},
            {id: "Q-054", type: "mcq", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "Di·ªán t√≠ch gi·ªõi h·∫°n b·ªüi y = x¬≤, Ox, x = 0, x = 1?", options: ["1/2", "1/3", "1/4", "2/3"], answer: 1, explain: "S = ‚à´‚ÇÄ¬π x¬≤ dx = 1/3"},
            {id: "Q-055", type: "truefalse", difficulty: "easy", topic: "T√≠ch ph√¢n", prompt: "‚à´ sin x dx = cos x + C.", answer: false, explain: "‚à´ sin x dx = -cos x + C"},
            {id: "Q-056", type: "mcq", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "T√≠nh ‚à´‚ÇÄ^(œÄ/2) cos x dx?", options: ["0", "1", "œÄ/2", "-1"], answer: 1, explain: "[sin x]‚ÇÄ^(œÄ/2) = 1"},
            {id: "Q-057", type: "short", difficulty: "easy", topic: "T√≠ch ph√¢n", prompt: "T√≠nh ‚à´‚ÇÄ¬π 2x dx. (Nh·∫≠p s·ªë)", answer: "1", explain: "[x¬≤]‚ÇÄ¬π = 1"},
            {id: "Q-058", type: "mcq", difficulty: "easy", topic: "T√≠ch ph√¢n", prompt: "Nguy√™n h√†m c·ªßa f(x) = 3x¬≤ l√†?", options: ["x¬≥ + C", "6x + C", "3x¬≥ + C", "x¬≥/3 + C"], answer: 0, explain: "‚à´3x¬≤ dx = x¬≥ + C"},
            {id: "Q-059", type: "mcq", difficulty: "easy", topic: "T√≠ch ph√¢n", prompt: "‚à´ 1 dx = ?", options: ["x + C", "C", "0", "1"], answer: 0, explain: "Nguy√™n h√†m c·ªßa 1"},
            {id: "Q-060", type: "mcq", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "T√≠nh ‚à´‚ÇÄ¬π 1 dx.", options: ["0", "1", "2", "x"], answer: 1, explain: "[x]‚ÇÄ¬π = 1"},
            {id: "Q-061", type: "mcq", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "‚à´ cos x dx = ?", options: ["sin x + C", "-sin x + C", "cos x + C", "-cos x + C"], answer: 0, explain: "Nguy√™n h√†m c·ªßa cos x"},
            {id: "Q-062", type: "truefalse", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "‚à´‚Çê·µá f(x) dx = -‚à´·µá‚Çê f(x) dx.", answer: true, explain: "T√≠nh ch·∫•t ƒë·ªïi c·∫≠n"},
            {id: "Q-063", type: "mcq", difficulty: "hard", topic: "T√≠ch ph√¢n", prompt: "Th·ªÉ t√≠ch tr√≤n xoay khi quay y = ‚àöx, y = 0, x = 0, x = 4 quanh Ox?", options: ["8œÄ", "4œÄ", "16œÄ", "2œÄ"], answer: 0, explain: "V = œÄ‚à´‚ÇÄ‚Å¥ x dx = 8œÄ"},
            {id: "Q-064", type: "short", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "T√≠nh ‚à´‚ÇÄ¬≤ (3x¬≤ + 2x) dx. (Nh·∫≠p s·ªë)", answer: "12", explain: "[x¬≥ + x¬≤]‚ÇÄ¬≤ = 12"},
            {id: "Q-065", type: "mcq", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "Cho F(x) l√† nguy√™n h√†m c·ªßa f(x) = 2x v√† F(1) = 3. T√≠nh F(2)?", options: ["5", "6", "7", "8"], answer: 2, explain: "F(x) = x¬≤ + C, C = 2. F(2) = 6"},
            {id: "Q-066", type: "truefalse", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "N·∫øu f(x) l·∫ª th√¨ ‚à´‚Çã‚Çê·µÉ f(x) dx = 0.", answer: true, explain: "T√≠nh ch·∫•t h√†m l·∫ª"},
            {id: "Q-067", type: "mcq", difficulty: "hard", topic: "T√≠ch ph√¢n", prompt: "Di·ªán t√≠ch gi·ªØa y = sin x, y = 0, x = 0, x = œÄ?", options: ["1", "2", "œÄ", "œÄ/2"], answer: 1, explain: "S = ‚à´‚ÇÄ^œÄ sin x dx = 2"},
            {id: "Q-068", type: "mcq", difficulty: "easy", topic: "T√≠ch ph√¢n", prompt: "‚à´ 5 dx = ?", options: ["5x + C", "5 + C", "x + C", "0"], answer: 0, explain: "‚à´k dx = kx + C"},
            {id: "Q-069", type: "mcq", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "Cho ‚à´‚ÇÅ¬≥ f(x) dx = 5 v√† ‚à´‚ÇÅ¬≥ g(x) dx = 2. T√≠nh ‚à´‚ÇÅ¬≥ [f(x) + g(x)] dx?", options: ["3", "7", "10", "5"], answer: 1, explain: "5 + 2 = 7"},
            {id: "Q-070", type: "mcq", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "Th·ªÉ t√≠ch tr√≤n xoay y = x, y = 0, x = 0, x = 2 quanh Ox?", options: ["8œÄ/3", "4œÄ/3", "2œÄ", "4œÄ"], answer: 0, explain: "V = œÄ‚à´‚ÇÄ¬≤ x¬≤ dx = 8œÄ/3"},
            {id: "Q-071", type: "truefalse", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "N·∫øu f(x) ch·∫µn th√¨ ‚à´‚Çã‚Çê·µÉ f(x) dx = 2‚à´‚ÇÄ·µÉ f(x) dx.", answer: true, explain: "T√≠nh ch·∫•t h√†m ch·∫µn"},
            {id: "Q-072", type: "mcq", difficulty: "easy", topic: "T√≠ch ph√¢n", prompt: "N·∫øu F'(x) = f(x) th√¨ ‚à´f(x)dx = ?", options: ["F(x)", "F(x) + C", "f(x) + C", "F'(x)"], answer: 1, explain: "Nguy√™n h√†m"},
            {id: "Q-073", type: "mcq", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "Bi·∫øt ‚à´‚ÇÅ¬≤ f(x) dx = 3. T√≠nh ‚à´‚ÇÅ¬≤ [2f(x) + 1] dx?", options: ["6", "7", "8", "9"], answer: 1, explain: "2¬∑3 + (2-1) = 7"},
            {id: "Q-074", type: "short", difficulty: "hard", topic: "T√≠ch ph√¢n", prompt: "Di·ªán t√≠ch gi·ªØa y = x¬≤, y = x? (Nh·∫≠p t·ª≠ c·ªßa a/b)", answer: "1", explain: "S = ‚à´‚ÇÄ¬π (x - x¬≤) dx = 1/6"},
            {id: "Q-075", type: "mcq", difficulty: "medium", topic: "T√≠ch ph√¢n", prompt: "‚à´‚ÇÄ^(2œÄ) cos x dx = ?", options: ["0", "1", "2", "-1"], answer: 0, explain: "[sin x]‚ÇÄ^(2œÄ) = 0"},
            
            // M≈® & LOGARIT (25 c√¢u)
            {id: "Q-076", type: "mcq", difficulty: "easy", topic: "M≈© & Logarit", prompt: "Gi·∫£i 2À£ = 8.", options: ["x = 2", "x = 3", "x = 4", "x = 1"], answer: 1, explain: "2À£ = 2¬≥"},
            {id: "Q-077", type: "mcq", difficulty: "easy", topic: "M≈© & Logarit", prompt: "T√≠nh log‚ÇÇ 16.", options: ["2", "3", "4", "8"], answer: 2, explain: "log‚ÇÇ 2‚Å¥ = 4"},
            {id: "Q-078", type: "short", difficulty: "medium", topic: "M≈© & Logarit", prompt: "T√≠nh ln(e¬≥). (Nh·∫≠p s·ªë)", answer: "3", explain: "ln(e¬≥) = 3"},
            {id: "Q-079", type: "mcq", difficulty: "medium", topic: "M≈© & Logarit", prompt: "Gi·∫£i log‚ÇÉ(x + 1) = 2.", options: ["x = 8", "x = 9", "x = 7", "x = 6"], answer: 0, explain: "x + 1 = 9 ‚üπ x = 8"},
            {id: "Q-080", type: "truefalse", difficulty: "easy", topic: "M≈© & Logarit", prompt: "log(a¬∑b) = log a + log b.", answer: true, explain: "T√≠nh ch·∫•t logarit"},
            {id: "Q-081", type: "mcq", difficulty: "easy", topic: "M≈© & Logarit", prompt: "T√≠nh e^(ln 5).", options: ["5", "ln 5", "e‚Åµ", "1"], answer: 0, explain: "e^(ln a) = a"},
            {id: "Q-082", type: "short", difficulty: "medium", topic: "M≈© & Logarit", prompt: "T√≠nh log‚ÇÖ 125. (Nh·∫≠p s·ªë)", answer: "3", explain: "log‚ÇÖ 5¬≥ = 3"},
            {id: "Q-083", type: "mcq", difficulty: "easy", topic: "M≈© & Logarit", prompt: "TXƒê c·ªßa y = ln(x - 1)?", options: ["(1; +‚àû)", "[1; +‚àû)", "(0; +‚àû)", "(-‚àû; 1)"], answer: 0, explain: "x - 1 > 0"},
            {id: "Q-084", type: "truefalse", difficulty: "easy", topic: "M≈© & Logarit", prompt: "log‚ÇÅ‚ÇÄ 100 = 2.", answer: true, explain: "10¬≤ = 100"},
            {id: "Q-085", type: "mcq", difficulty: "easy", topic: "M≈© & Logarit", prompt: "log_a 1 = ?", options: ["-1", "0", "1", "a"], answer: 1, explain: "a‚Å∞ = 1"},
            {id: "Q-086", type: "mcq", difficulty: "medium", topic: "M≈© & Logarit", prompt: "R√∫t g·ªçn log‚ÇÇ 8 + log‚ÇÇ 4.", options: ["3", "5", "7", "6"], answer: 1, explain: "3 + 2 = 5"},
            {id: "Q-087", type: "mcq", difficulty: "hard", topic: "M≈© & Logarit", prompt: "Gi·∫£i 2À£ > 16.", options: ["x > 4", "x > 2", "x > 8", "x > 3"], answer: 0, explain: "2À£ > 2‚Å¥ ‚üπ x > 4"},
            {id: "Q-088", type: "mcq", difficulty: "easy", topic: "M≈© & Logarit", prompt: "T√≠nh 2^(log‚ÇÇ 5).", options: ["5", "2", "10", "log‚ÇÇ 5"], answer: 0, explain: "a^(log‚Çê x) = x"},
            {id: "Q-089", type: "mcq", difficulty: "medium", topic: "M≈© & Logarit", prompt: "ƒê·∫°o h√†m c·ªßa y = 2À£ l√†?", options: ["2À£", "2À£¬∑ln 2", "x¬∑2À£‚Åª¬π", "ln 2"], answer: 1, explain: "(aÀ£)' = aÀ£¬∑ln a"},
            {id: "Q-090", type: "truefalse", difficulty: "medium", topic: "M≈© & Logarit", prompt: "y = log‚ÇÇ x ngh·ªãch bi·∫øn tr√™n (0; +‚àû).", answer: false, explain: "Logarit c∆° s·ªë > 1 ƒë·ªìng bi·∫øn"},
            {id: "Q-091", type: "mcq", difficulty: "easy", topic: "M≈© & Logarit", prompt: "Cho a > 0. R√∫t g·ªçn log_a ‚àöa.", options: ["1/2", "2", "‚àöa", "a/2"], answer: 0, explain: "log_a a^(1/2) = 1/2"},
            {id: "Q-092", type: "short", difficulty: "medium", topic: "M≈© & Logarit", prompt: "Gi·∫£i 5À£ = 25. (Nh·∫≠p s·ªë)", answer: "2", explain: "5À£ = 5¬≤ ‚üπ x = 2"},
            {id: "Q-093", type: "mcq", difficulty: "medium", topic: "M≈© & Logarit", prompt: "ƒê·∫°o h√†m c·ªßa y = log‚ÇÇ x l√†?", options: ["1/(x¬∑ln 2)", "1/x", "ln 2/x", "1/(2x)"], answer: 0, explain: "(log‚Çê x)' = 1/(x¬∑ln a)"},
            {id: "Q-094", type: "mcq", difficulty: "medium", topic: "M≈© & Logarit", prompt: "T√≠nh log‚ÇÉ 27.", options: ["2", "3", "9", "27"], answer: 1, explain: "log‚ÇÉ 3¬≥ = 3"},
            {id: "Q-095", type: "truefalse", difficulty: "easy", topic: "M≈© & Logarit", prompt: "log(a/b) = log a - log b.", answer: true, explain: "T√≠nh ch·∫•t logarit"},
            {id: "Q-096", type: "mcq", difficulty: "hard", topic: "M≈© & Logarit", prompt: "S·ªë nghi·ªám c·ªßa log‚ÇÇ(x¬≤ - 3x + 2) = 1?", options: ["0", "1", "2", "3"], answer: 2, explain: "x¬≤ - 3x + 2 = 2 ‚üπ x¬≤ - 3x = 0"},
            {id: "Q-097", type: "mcq", difficulty: "medium", topic: "M≈© & Logarit", prompt: "Gi·∫£i log(x + 2) + log(x - 2) = 1.", options: ["x = ‚àö29", "x = 3", "x = 4", "x = 5"], answer: 0, explain: "x¬≤ - 4 = 10 ‚üπ x = ‚àö14"},
            {id: "Q-098", type: "mcq", difficulty: "hard", topic: "M≈© & Logarit", prompt: "Gi·∫£i b·∫•t ph∆∞∆°ng tr√¨nh log‚ÇÄ.‚ÇÖ x > log‚ÇÄ.‚ÇÖ 4.", options: ["(0; 4)", "(4; +‚àû)", "(0; +‚àû)", "(-‚àû; 4)"], answer: 0, explain: "C∆° s·ªë < 1 n√™n ƒë·ªïi chi·ªÅu"},
            {id: "Q-099", type: "short", difficulty: "medium", topic: "M≈© & Logarit", prompt: "N·∫øu log‚ÇÖ x = 2 th√¨ x = ? (Nh·∫≠p s·ªë)", answer: "25", explain: "x = 5¬≤ = 25"},
            {id: "Q-100", type: "mcq", difficulty: "medium", topic: "M≈© & Logarit", prompt: "Gi·∫£i 4À£ - 2À£‚Å∫¬π - 8 = 0.", options: ["{2}", "{3}", "{2; -1}", "{log‚ÇÇ 4}"], answer: 0, explain: "ƒê·∫∑t t = 2À£. t¬≤ - 2t - 8 = 0 ‚üπ t = 4 ‚üπ x = 2"},
            
            // S·ªê PH·ª®C (15 c√¢u)
            {id: "Q-101", type: "mcq", difficulty: "easy", topic: "S·ªë ph·ª©c", prompt: "T√≠nh (2 + 3i) + (1 - i).", options: ["3 + 2i", "3 + 4i", "1 + 2i", "3 - 2i"], answer: 0, explain: "C·ªông ph·∫ßn th·ª±c v√† ·∫£o"},
            {id: "Q-102", type: "mcq", difficulty: "easy", topic: "S·ªë ph·ª©c", prompt: "S·ªë ph·ª©c li√™n h·ª£p c·ªßa z = 3 - 4i?", options: ["3 + 4i", "-3 + 4i", "-3 - 4i", "4 + 3i"], answer: 0, explain: "zÃÑ = 3 + 4i"},
            {id: "Q-103", type: "short", difficulty: "medium", topic: "S·ªë ph·ª©c", prompt: "M√¥-ƒëun c·ªßa z = 3 + 4i? (Nh·∫≠p s·ªë)", answer: "5", explain: "|z| = ‚àö(9 + 16) = 5"},
            {id: "Q-104", type: "truefalse", difficulty: "easy", topic: "S·ªë ph·ª©c", prompt: "i¬≤ = -1.", answer: true, explain: "ƒê·ªãnh nghƒ©a i"},
            {id: "Q-105", type: "mcq", difficulty: "medium", topic: "S·ªë ph·ª©c", prompt: "T√≠nh (1 + i)¬≤.", options: ["2i", "1 + 2i", "2", "i"], answer: 0, explain: "1 + 2i + i¬≤ = 2i"},
            {id: "Q-106", type: "mcq", difficulty: "easy", topic: "S·ªë ph·ª©c", prompt: "Cho z = 5 + 2i. Ph·∫ßn th·ª±c?", options: ["2", "5", "-5", "7"], answer: 1, explain: "Ph·∫ßn th·ª±c = 5"},
            {id: "Q-107", type: "mcq", difficulty: "easy", topic: "S·ªë ph·ª©c", prompt: "T√≠nh i¬≥.", options: ["i", "-i", "1", "-1"], answer: 1, explain: "i¬≥ = i¬≤¬∑i = -i"},
            {id: "Q-108", type: "mcq", difficulty: "medium", topic: "S·ªë ph·ª©c", prompt: "Cho z = 1 + i. T√≠nh z¬∑zÃÑ.", options: ["0", "1", "2", "2i"], answer: 2, explain: "z¬∑zÃÑ = |z|¬≤ = 2"},
            {id: "Q-109", type: "mcq", difficulty: "easy", topic: "S·ªë ph·ª©c", prompt: "T√≠nh i¬≤.", options: ["1", "-1", "i", "-i"], answer: 1, explain: "ƒê·ªãnh nghƒ©a"},
            {id: "Q-110", type: "mcq", difficulty: "easy", topic: "S·ªë ph·ª©c", prompt: "S·ªë ph·ª©c z = 5 c√≥ ph·∫ßn ·∫£o?", options: ["0", "5", "i", "-5"], answer: 0, explain: "S·ªë th·ª±c c√≥ ph·∫ßn ·∫£o = 0"},
            {id: "Q-111", type: "mcq", difficulty: "medium", topic: "S·ªë ph·ª©c", prompt: "ƒêi·ªÉm M bi·ªÉu di·ªÖn z = 2 - 3i?", options: ["(2, -3)", "(-3, 2)", "(2, 3)", "(-2, 3)"], answer: 0, explain: "M(a, b) v·ªõi z = a + bi"},
            {id: "Q-112", type: "mcq", difficulty: "medium", topic: "S·ªë ph·ª©c", prompt: "T·∫≠p |z| = 3 l√†?", options: ["ƒê∆∞·ªùng tr√≤n O b√°n k√≠nh 3", "H√¨nh tr√≤n", "ƒê∆∞·ªùng th·∫≥ng", "Parabol"], answer: 0, explain: "|z| = 3 l√† ƒë∆∞·ªùng tr√≤n"},
            {id: "Q-113", type: "short", difficulty: "medium", topic: "S·ªë ph·ª©c", prompt: "T√≠nh |3 - 4i|. (Nh·∫≠p s·ªë)", answer: "5", explain: "‚àö(9 + 16) = 5"},
            {id: "Q-114", type: "truefalse", difficulty: "medium", topic: "S·ªë ph·ª©c", prompt: "M·ªçi s·ªë th·ª±c ƒë·ªÅu l√† s·ªë ph·ª©c.", answer: true, explain: "a = a + 0i"},
            {id: "Q-115", type: "mcq", difficulty: "hard", topic: "S·ªë ph·ª©c", prompt: "T·∫≠p |z - 1 + 2i| = 3 l√†?", options: ["ƒê∆∞·ªùng tr√≤n (1,-2) b√°n k√≠nh 3", "ƒê∆∞·ªùng tr√≤n (1,2) b√°n k√≠nh 3", "ƒê∆∞·ªùng tr√≤n (-1,2) b√°n k√≠nh 3", "H√¨nh tr√≤n"], answer: 0, explain: "T√¢m (1, -2), R = 3"},
            
            // T·ªî H·ª¢P & X√ÅC SU·∫§T (20 c√¢u)
            {id: "Q-116", type: "mcq", difficulty: "easy", topic: "T·ªï h·ª£p", prompt: "T√≠nh C(5,2).", options: ["10", "20", "15", "5"], answer: 0, explain: "C(5,2) = 10"},
            {id: "Q-117", type: "mcq", difficulty: "easy", topic: "T·ªï h·ª£p", prompt: "C√°ch s·∫Øp x·∫øp 3 ng∆∞·ªùi v√†o 3 gh·∫ø?", options: ["3", "6", "9", "12"], answer: 1, explain: "P(3) = 3! = 6"},
            {id: "Q-118", type: "short", difficulty: "medium", topic: "T·ªï h·ª£p", prompt: "T√≠nh A(6,3). (Nh·∫≠p s·ªë)", answer: "120", explain: "A(6,3) = 6¬∑5¬∑4 = 120"},
            {id: "Q-119", type: "mcq", difficulty: "medium", topic: "X√°c su·∫•t", prompt: "Gieo x√∫c x·∫Øc. X√°c su·∫•t m·∫∑t ch·∫µn?", options: ["1/3", "1/2", "2/3", "1/6"], answer: 1, explain: "3/6 = 1/2"},
            {id: "Q-120", type: "truefalse", difficulty: "easy", topic: "X√°c su·∫•t", prompt: "X√°c su·∫•t bi·∫øn c·ªë ch·∫Øc ch·∫Øn = 1.", answer: true, explain: "P = 1"},
            {id: "Q-121", type: "mcq", difficulty: "medium", topic: "X√°c su·∫•t", prompt: "Gieo 2 ƒë·ªìng xu. X√°c su·∫•t √≠t nh·∫•t 1 s·∫•p?", options: ["1/2", "3/4", "1/4", "1"], answer: 1, explain: "1 - P(0 s·∫•p) = 3/4"},
            {id: "Q-122", type: "mcq", difficulty: "easy", topic: "T·ªï h·ª£p", prompt: "C(n, 0) = ?", options: ["0", "1", "n", "n!"], answer: 1, explain: "C(n,0) = 1"},
            {id: "Q-123", type: "mcq", difficulty: "easy", topic: "T·ªï h·ª£p", prompt: "0! = ?", options: ["0", "1", "Kh√¥ng x√°c ƒë·ªãnh", "‚àû"], answer: 1, explain: "Quy ∆∞·ªõc 0! = 1"},
            {id: "Q-124", type: "short", difficulty: "easy", topic: "T·ªï h·ª£p", prompt: "T√≠nh 5!. (Nh·∫≠p s·ªë)", answer: "120", explain: "5! = 120"},
            {id: "Q-125", type: "mcq", difficulty: "medium", topic: "X√°c su·∫•t", prompt: "R√∫t l√° b√†i. X√°c su·∫•t r√∫t K?", options: ["1/13", "1/52", "4/52", "1/4"], answer: 0, explain: "4/52 = 1/13"},
            {id: "Q-126", type: "truefalse", difficulty: "medium", topic: "T·ªï h·ª£p", prompt: "C(n,k) = C(n, n-k).", answer: true, explain: "T√≠nh ch·∫•t ƒë·ªëi x·ª©ng"},
            {id: "Q-127", type: "mcq", difficulty: "easy", topic: "X√°c su·∫•t", prompt: "X√°c su·∫•t bi·∫øn c·ªë kh√¥ng th·ªÉ?", options: ["0", "0.5", "1", "Kh√¥ng x√°c ƒë·ªãnh"], answer: 0, explain: "P = 0"},
            {id: "Q-128", type: "mcq", difficulty: "medium", topic: "X√°c su·∫•t", prompt: "Gieo x√∫c x·∫Øc 2 l·∫ßn. X√°c su·∫•t t·ªïng = 7?", options: ["1/6", "1/12", "1/9", "5/36"], answer: 0, explain: "6 c·∫∑p / 36 = 1/6"},
            {id: "Q-129", type: "mcq", difficulty: "easy", topic: "T·ªï h·ª£p", prompt: "S·ªë c√°ch ch·ªçn 1 t·ª´ 20 h·ªçc sinh?", options: ["1", "20", "19", "C(20,1)"], answer: 1, explain: "C(20,1) = 20"},
            {id: "Q-130", type: "short", difficulty: "medium", topic: "T·ªï h·ª£p", prompt: "T√≠nh C(6,2). (Nh·∫≠p s·ªë)", answer: "15", explain: "C(6,2) = 15"},
            {id: "Q-131", type: "mcq", difficulty: "hard", topic: "X√°c su·∫•t", prompt: "H·ªôp 5 bi ƒë·ªè, 3 xanh. R√∫t 2 bi. X√°c su·∫•t 2 c√πng m√†u?", options: ["13/28", "15/28", "1/2", "5/14"], answer: 0, explain: "[C(5,2) + C(3,2)]/C(8,2) = 13/28"},
            {id: "Q-132", type: "mcq", difficulty: "easy", topic: "X√°c su·∫•t", prompt: "X√°c su·∫•t gieo ƒë·ªìng xu ra ng·ª≠a?", options: ["1/4", "1/3", "1/2", "1"], answer: 2, explain: "P = 1/2"},
            {id: "Q-133", type: "mcq", difficulty: "medium", topic: "X√°c su·∫•t", prompt: "Ch·ªçn s·ªë t·ª´ 1-20. X√°c su·∫•t chia h·∫øt cho 3?", options: ["1/5", "3/10", "1/3", "2/5"], answer: 1, explain: "6 s·ªë / 20 = 3/10"},
            {id: "Q-134", type: "truefalse", difficulty: "easy", topic: "T·ªï h·ª£p", prompt: "P(n) = n! v·ªõi n ‚â• 0.", answer: true, explain: "Ho√°n v·ªã"},
            {id: "Q-135", type: "mcq", difficulty: "hard", topic: "X√°c su·∫•t", prompt: "X√°c su·∫•t b·∫Øn tr√∫ng 0.7. B·∫Øn 3 l·∫ßn. X√°c su·∫•t tr√∫ng ƒë√∫ng 2?", options: ["0.441", "0.343", "0.027", "0.189"], answer: 0, explain: "C(3,2)¬∑0.7¬≤¬∑0.3 = 0.441"},
            
            // H√åNH H·ªåC & V·∫¨N D·ª§NG CAO (15 c√¢u)
            {id: "Q-136", type: "mcq", difficulty: "easy", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "Th·ªÉ t√≠ch ch√≥p c√≥ S = 12, h = 5?", options: ["20", "60", "30", "40"], answer: 0, explain: "V = (1/3)¬∑12¬∑5 = 20"},
            {id: "Q-137", type: "mcq", difficulty: "easy", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "Th·ªÉ t√≠ch l·∫≠p ph∆∞∆°ng c·∫°nh a = 2?", options: ["4", "6", "8", "12"], answer: 2, explain: "V = 2¬≥ = 8"},
            {id: "Q-138", type: "mcq", difficulty: "easy", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "C√¥ng th·ª©c V ch√≥p?", options: ["V = S¬∑h", "V = (1/3)S¬∑h", "V = œÄr¬≤h", "V = (4/3)œÄr¬≥"], answer: 1, explain: "V = (1/3)√óƒë√°y√ócao"},
            {id: "Q-139", type: "mcq", difficulty: "easy", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "S·ªë m·∫∑t h√¨nh l·∫≠p ph∆∞∆°ng?", options: ["4", "6", "8", "12"], answer: 1, explain: "6 m·∫∑t"},
            {id: "Q-140", type: "mcq", difficulty: "easy", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "S·ªë ƒë·ªânh h√¨nh l·∫≠p ph∆∞∆°ng?", options: ["4", "6", "8", "12"], answer: 2, explain: "8 ƒë·ªânh"},
            {id: "Q-141", type: "mcq", difficulty: "medium", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "Di·ªán t√≠ch m·∫∑t c·∫ßu R = 2?", options: ["4œÄ", "8œÄ", "16œÄ", "12œÄ"], answer: 2, explain: "S = 4œÄR¬≤ = 16œÄ"},
            {id: "Q-142", type: "short", difficulty: "medium", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "V c·∫ßu R = 3 l√† 4œÄR¬≥/3. H·ªá s·ªë tr∆∞·ªõc œÄ? (Nh·∫≠p s·ªë)", answer: "36", explain: "4¬∑27/3 = 36"},
            {id: "Q-143", type: "truefalse", difficulty: "easy", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "V lƒÉng tr·ª• = S¬∑h.", answer: true, explain: "C√¥ng th·ª©c V lƒÉng tr·ª•"},
            {id: "Q-144", type: "mcq", difficulty: "medium", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "V tr·ª• c√≥ r = 3, h = 5?", options: ["15œÄ", "20œÄ", "45œÄ", "90œÄ"], answer: 2, explain: "V = œÄr¬≤h = 45œÄ"},
            {id: "Q-145", type: "mcq", difficulty: "easy", topic: "H√¨nh h·ªçc ph·∫≥ng", prompt: "PT ƒë∆∞·ªùng tr√≤n t√¢m I(1,2) b√°n k√≠nh 3?", options: ["(x-1)¬≤+(y-2)¬≤=9", "(x+1)¬≤+(y+2)¬≤=9", "x¬≤+y¬≤=9", "(x-1)¬≤+(y-2)¬≤=3"], answer: 0, explain: "(x-a)¬≤+(y-b)¬≤=R¬≤"},
            {id: "Q-146", type: "mcq", difficulty: "easy", topic: "H√¨nh h·ªçc ph·∫≥ng", prompt: "Kho·∫£ng c√°ch t·ª´ A(0,0) ƒë·∫øn 3x+4y-5=0?", options: ["1", "5", "5/3", "3/5"], answer: 0, explain: "d = 5/5 = 1"},
            {id: "Q-147", type: "mcq", difficulty: "medium", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "S xung quanh tr·ª• r = 3, h = 5?", options: ["30œÄ", "15œÄ", "45œÄ", "90œÄ"], answer: 0, explain: "S = 2œÄrh = 30œÄ"},
            {id: "Q-148", type: "short", difficulty: "easy", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "Di·ªán t√≠ch to√†n ph·∫ßn l·∫≠p ph∆∞∆°ng a = 3? (Nh·∫≠p s·ªë)", answer: "54", explain: "S = 6a¬≤ = 54"},
            {id: "Q-149", type: "mcq", difficulty: "medium", topic: "H√¨nh h·ªçc ph·∫≥ng", prompt: "VTPT c·ªßa 2x - 3y + 1 = 0?", options: ["(2, -3)", "(2, 3)", "(-3, 2)", "(3, -2)"], answer: 0, explain: "VTPT (a, b)"},
            {id: "Q-150", type: "mcq", difficulty: "easy", topic: "H√¨nh h·ªçc kh√¥ng gian", prompt: "PT m·∫∑t c·∫ßu t√¢m I(1,2,3) b√°n k√≠nh 4?", options: ["(x-1)¬≤+(y-2)¬≤+(z-3)¬≤=16", "(x+1)¬≤+(y+2)¬≤+(z+3)¬≤=16", "x¬≤+y¬≤+z¬≤=16", "(x-1)¬≤+(y-2)¬≤+(z-3)¬≤=4"], answer: 0, explain: "(x-a)¬≤+(y-b)¬≤+(z-c)¬≤=R¬≤"}
        ];

        // ============================================
        // APPLICATION STATE (IN-MEMORY STORAGE)
        // ============================================
        
        const app = {
            // Data
            currentBank: [...SAMPLE_BANK],
            currentTest: [],
            userAnswers: {},
            errorLog: [],
            testHistory: [],
            bookmarks: [],
            config: { profile: 'A', total: 50 },
            timerInterval: null,
            timeRemaining: 0,
            achievements: [],
            studyStreak: { current: 0, best: 0, lastStudyDate: null },
            darkMode: false,
            reviewMode: false,
            
            // Initialize
            init() {
                this.setupNavigation();
                this.renderDashboard();
                this.updateBankCount();
                this.setupEventListeners();
            },
            
            // Navigation
            setupNavigation() {
                const nav = document.getElementById('mainNav');
                const sections = [
                    { id: 'dashboard', label: 'Dashboard' },
                    { id: 'syllabus', label: 'Ch∆∞∆°ng tr√¨nh' },
                    { id: 'test', label: 'L√†m ƒë·ªÅ' },
                    { id: 'practice', label: 'Th·ªëng k√™' },
                    { id: 'errorlog', label: 'S·ªï l·ªói' },
                    { id: 'bookmarks', label: 'ƒê√°nh d·∫•u' },
                    { id: 'achievements', label: 'Huy hi·ªáu' },
                    { id: 'analytics', label: 'Ph√¢n t√≠ch' },
                    { id: 'manage', label: 'Qu·∫£n l√Ω' },
                    { id: 'cheatsheet', label: 'C√¥ng th·ª©c' }
                ];
                
                nav.innerHTML = sections.map(s => 
                    `<button class="nav-btn ${s.id === 'dashboard' ? 'active' : ''}" data-section="${s.id}">${s.label}</button>`
                ).join('');
                
                // Dark mode toggle
                nav.innerHTML += `<button class="nav-btn" onclick="app.toggleDarkMode()" title="Toggle Dark Mode">üåô</button>`;
                
                nav.addEventListener('click', (e) => {
                    if (e.target.classList.contains('nav-btn') && e.target.dataset.section) {
                        this.showSection(e.target.dataset.section);
                    }
                });
            },
            
            showSection(sectionId) {
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(sectionId).classList.add('active');
                
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                const targetBtn = document.querySelector(`[data-section="${sectionId}"]`);
                if (targetBtn) targetBtn.classList.add('active');
                
                if (sectionId === 'dashboard') this.renderDashboard();
                if (sectionId === 'errorlog') this.renderErrorLog();
                if (sectionId === 'practice') this.renderChapterStatistics();
                if (sectionId === 'bookmarks') this.renderBookmarks();
                if (sectionId === 'manage') this.renderQuestionManager();
                if (sectionId === 'achievements') this.renderAchievements();
                if (sectionId === 'analytics') this.renderAnalytics();
            },
            
            // Event Listeners
            setupEventListeners() {
                document.querySelectorAll('input[name="testMode"]').forEach(radio => {
                    radio.addEventListener('change', () => this.toggleTestMode());
                });
                
                const chapterSelect = document.getElementById('chapterSelect');
                const levelEasy = document.getElementById('levelEasy');
                const levelMedium = document.getElementById('levelMedium');
                const levelHard = document.getElementById('levelHard');
                
                [chapterSelect, levelEasy, levelMedium, levelHard].forEach(el => {
                    if (el) el.addEventListener('change', () => this.updateChapterStats());
                });
                
                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    // Ctrl/Cmd + D: Dashboard
                    if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
                        e.preventDefault();
                        this.showSection('dashboard');
                    }
                    // Ctrl/Cmd + T: Test
                    if ((e.ctrlKey || e.metaKey) && e.key === 't') {
                        e.preventDefault();
                        this.showSection('test');
                    }
                    // Ctrl/Cmd + S: Statistics
                    if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                        e.preventDefault();
                        this.showSection('practice');
                    }
                    // Ctrl/Cmd + Enter: Submit test
                    if ((e.ctrlKey || e.metaKey) && e.key === 'Enter' && this.currentTest.length > 0) {
                        e.preventDefault();
                        this.submitTest();
                    }
                });
            },
            
            // Dashboard
            renderDashboard() {
                const content = document.getElementById('dashboardContent');
                
                const totalTests = this.testHistory.length;
                const avgScore = totalTests > 0 
                    ? (this.testHistory.reduce((sum, t) => sum + t.score, 0) / totalTests).toFixed(2)
                    : 0;
                
                const html = `
                    <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem; border: 2px solid #f59e0b;">
                        <h3 style="color: #92400e; margin-bottom: 1rem;">üéØ M·ª©c ƒê·ªô ∆Øu Ti√™n THPTQG 2026</h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                            <div style="background: white; padding: 1.2rem; border-radius: 8px; border-left: 4px solid #dc2626;">
                                <h4 style="color: #dc2626; margin-bottom: 0.8rem;">‚≠ê ∆Øu ti√™n CAO</h4>
                                <ul style="margin-left: 1.5rem; line-height: 1.8; color: #1e293b;">
                                    <li>H√†m s·ªë - ƒê·∫°o h√†m</li>
                                    <li>T√≠ch ph√¢n</li>
                                    <li>S·ªë ph·ª©c</li>
                                    <li>M≈© & Logarit</li>
                                </ul>
                            </div>
                            
                            <div style="background: white; padding: 1.2rem; border-radius: 8px; border-left: 4px solid #f59e0b;">
                                <h4 style="color: #f59e0b; margin-bottom: 0.8rem;">∆Øu ti√™n TB</h4>
                                <ul style="margin-left: 1.5rem; line-height: 1.8; color: #1e293b;">
                                    <li>T·ªï h·ª£p - X√°c su·∫•t</li>
                                    <li>H√¨nh h·ªçc</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                        <div class="dashboard-card">
                            <h3>T·ªïng s·ªë b√†i thi</h3>
                            <div class="value">${totalTests}</div>
                        </div>
                        
                        <div class="dashboard-card">
                            <h3>ƒêi·ªÉm trung b√¨nh</h3>
                            <div class="value">${avgScore}</div>
                        </div>
                        
                        <div class="dashboard-card">
                            <h3>Ng√¢n h√†ng c√¢u h·ªèi</h3>
                            <div class="value">${this.currentBank.length}</div>
                        </div>
                    </div>
                    
                    <div style="background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                        <h3 style="color: #1e40af; margin-bottom: 1rem;">üìù L·ªãch s·ª≠ l√†m b√†i g·∫ßn ƒë√¢y</h3>
                        ${this.renderTestHistory()}
                    </div>
                `;
                
                content.innerHTML = html;
            },
            
            renderTestHistory() {
                if (this.testHistory.length === 0) {
                    return '<p style="text-align: center; color: #94a3b8; padding: 2rem;">Ch∆∞a c√≥ b√†i thi n√†o</p>';
                }
                
                const recent = [...this.testHistory].slice(-10).reverse();
                
                return recent.map(t => {
                    const date = new Date(t.timestamp).toLocaleString('vi-VN');
                    const gradeClass = t.score >= 8 ? 'background: #dcfce7; color: #166534;' :
                                      t.score >= 6.5 ? 'background: #dbeafe; color: #1e40af;' :
                                      t.score >= 5 ? 'background: #fef3c7; color: #92400e;' :
                                      'background: #fee2e2; color: #991b1b;';
                    
                    return `
                        <div class="history-item">
                            <div>
                                <div style="font-weight: 600; margin-bottom: 0.3rem;">${t.mode === 'profile' ? 'Profile ' + t.profile : t.chapter}</div>
                                <div style="font-size: 0.9rem; color: #64748b;">${date}</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="padding: 0.5rem 1rem; border-radius: 20px; font-weight: 700; ${gradeClass}">
                                    ${t.score}/10
                                </div>
                                <div style="font-size: 0.9rem; color: #64748b; margin-top: 0.3rem;">
                                    ${t.correct}/${t.total} c√¢u
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            },
            
            // Chapter Statistics
            renderChapterStatistics() {
                const chapters = [
                    { name: 'H√†m s·ªë', priority: 'high' },
                    { name: 'ƒê·∫°o h√†m', priority: 'high' },
                    { name: 'T√≠ch ph√¢n', priority: 'high' },
                    { name: 'M≈© & Logarit', priority: 'high' },
                    { name: 'S·ªë ph·ª©c', priority: 'high' },
                    { name: 'T·ªï h·ª£p', priority: 'medium' }
                ];
                
                const container = document.getElementById('chapterStatistics');
                
                const html = chapters.map(chapterInfo => {
                    const questions = this.currentBank.filter(q => q.topic && q.topic.includes(chapterInfo.name));
                    if (questions.length === 0) return '';
                    
                    const easy = questions.filter(q => q.difficulty === 'easy').length;
                    const medium = questions.filter(q => q.difficulty === 'medium').length;
                    const hard = questions.filter(q => q.difficulty === 'hard').length;
                    const total = questions.length;
                    
                    const easyPercent = ((easy / total) * 100).toFixed(0);
                    const mediumPercent = ((medium / total) * 100).toFixed(0);
                    const hardPercent = ((hard / total) * 100).toFixed(0);
                    
                    const priorityBadge = chapterInfo.priority === 'high' 
                        ? '<span class="badge" style="background: #fee2e2; color: #dc2626;">‚≠ê ∆Øu ti√™n CAO</span>'
                        : '<span class="badge" style="background: #fef3c7; color: #f59e0b;">∆Øu ti√™n TB</span>';
                    
                    return `
                        <div style="background: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 1.5rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem;">
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <h3 style="color: #1e40af; margin: 0;">${chapterInfo.name}</h3>
                                    ${priorityBadge}
                                </div>
                                <button class="btn" onclick="app.quickPractice('${chapterInfo.name}')">üéØ Luy·ªán ngay</button>
                            </div>
                            
                            <div class="stats" style="margin-bottom: 1rem;">
                                <div class="stat-card">
                                    <div class="stat-value">${total}</div>
                                    <div class="stat-label">T·ªïng c√¢u</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">${easy}</div>
                                    <div class="stat-label">Nh·∫≠n bi·∫øt</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">${medium}</div>
                                    <div class="stat-label">Th√¥ng hi·ªÉu</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">${hard}</div>
                                    <div class="stat-label">V·∫≠n d·ª•ng</div>
                                </div>
                            </div>
                            
                            <div style="display: flex; height: 30px; border-radius: 6px; overflow: hidden;">
                                <div style="width: ${easyPercent}%; background: #16a34a;"></div>
                                <div style="width: ${mediumPercent}%; background: #eab308;"></div>
                                <div style="width: ${hardPercent}%; background: #dc2626;"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-top: 0.5rem; font-size: 0.85rem; color: #64748b;">
                                <span>üü¢ ${easyPercent}%</span>
                                <span>üü° ${mediumPercent}%</span>
                                <span>üî¥ ${hardPercent}%</span>
                            </div>
                        </div>
                    `;
                }).join('');
                
                container.innerHTML = html || '<p class="empty-state">Kh√¥ng c√≥ d·ªØ li·ªáu</p>';
            },
            
            quickPractice(chapter) {
                this.showSection('test');
                document.querySelector('input[name="testMode"][value="chapter"]').checked = true;
                this.toggleTestMode();
                document.getElementById('chapterSelect').value = chapter;
                this.updateChapterStats();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            },
            
            // Test Mode
            toggleTestMode() {
                const mode = document.querySelector('input[name="testMode"]:checked').value;
                document.getElementById('profileMode').style.display = mode === 'profile' ? 'block' : 'none';
                document.getElementById('chapterMode').style.display = mode === 'chapter' ? 'block' : 'none';
                
                if (mode === 'chapter') {
                    this.updateChapterStats();
                }
            },
            
            updateChapterStats() {
                const chapter = document.getElementById('chapterSelect').value;
                const includeEasy = document.getElementById('levelEasy').checked;
                const includeMedium = document.getElementById('levelMedium').checked;
                const includeHard = document.getElementById('levelHard').checked;
                
                let filtered = this.currentBank;
                
                if (chapter) {
                    filtered = filtered.filter(q => q.topic && q.topic.includes(chapter));
                }
                
                const easy = filtered.filter(q => q.difficulty === 'easy').length;
                const medium = filtered.filter(q => q.difficulty === 'medium').length;
                const hard = filtered.filter(q => q.difficulty === 'hard').length;
                
                let available = 0;
                if (includeEasy) available += easy;
                if (includeMedium) available += medium;
                if (includeHard) available += hard;
                
                const statsHtml = `
                    <strong>üìä Th·ªëng k√™:</strong><br>
                    ${chapter ? `<strong>${chapter}</strong><br>` : 'T·∫•t c·∫£ ch∆∞∆°ng<br>'}
                    <span class="badge badge-easy">Nh·∫≠n bi·∫øt: ${easy}</span>
                    <span class="badge badge-medium">Th√¥ng hi·ªÉu: ${medium}</span>
                    <span class="badge badge-hard">V·∫≠n d·ª•ng: ${hard}</span>
                    <br><strong>C√≥ th·ªÉ t·∫°o: ${available} c√¢u</strong>
                `;
                
                document.getElementById('chapterStats').innerHTML = statsHtml;
            },
            
            // Generate Test
            generateTest() {
                const mode = document.querySelector('input[name="testMode"]:checked').value;
                
                if (mode === 'profile') {
                    this.generateProfileTest();
                } else {
                    this.generateChapterTest();
                }
            },
            
            generateProfileTest() {
                const profile = document.querySelector('input[name="profile"]:checked').value;
                const total = parseInt(document.getElementById('totalQuestions').value);
                
                if (total < 10 || total > 100) {
                    alert('‚ö†Ô∏è S·ªë c√¢u h·ªèi ph·∫£i t·ª´ 10 ƒë·∫øn 100!');
                    return;
                }
                
                this.config = { profile, total };
                
                const pool = [...this.currentBank];
                this.currentTest = this.selectRandom(pool, Math.min(total, pool.length));
                this.currentTest = this.shuffle(this.currentTest);
                this.userAnswers = {};
                
                this.renderTest();
                document.getElementById('testResults').innerHTML = '';
            },
            
            generateChapterTest() {
                const chapter = document.getElementById('chapterSelect').value;
                const total = parseInt(document.getElementById('chapterQuestions').value);
                const includeEasy = document.getElementById('levelEasy').checked;
                const includeMedium = document.getElementById('levelMedium').checked;
                const includeHard = document.getElementById('levelHard').checked;
                
                const difficulties = [];
                if (includeEasy) difficulties.push('easy');
                if (includeMedium) difficulties.push('medium');
                if (includeHard) difficulties.push('hard');
                
                if (difficulties.length === 0) {
                    alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt m·ª©c ƒë·ªô!');
                    return;
                }
                
                let pool = this.currentBank;
                
                if (chapter) {
                    pool = pool.filter(q => q.topic && q.topic.includes(chapter));
                }
                
                pool = pool.filter(q => difficulties.includes(q.difficulty));
                
                if (pool.length === 0) {
                    alert('‚ö†Ô∏è Kh√¥ng c√≥ c√¢u h·ªèi ph√π h·ª£p!');
                    return;
                }
                
                this.currentTest = this.selectRandom(pool, Math.min(total, pool.length));
                this.currentTest = this.shuffle(this.currentTest);
                this.userAnswers = {};
                
                this.renderTest();
                document.getElementById('testResults').innerHTML = '';
                
                const infoHtml = `
                    <div class="alert alert-info">
                        üìö <strong>ƒê·ªÅ thi:</strong> ${chapter || 'T·∫•t c·∫£ ch∆∞∆°ng'} | 
                        <strong>S·ªë c√¢u:</strong> ${this.currentTest.length}
                    </div>
                `;
                
                document.getElementById('testContent').insertAdjacentHTML('afterbegin', infoHtml);
            },
            
            selectRandom(arr, count) {
                const shuffled = [...arr].sort(() => Math.random() - 0.5);
                return shuffled.slice(0, Math.min(count, arr.length));
            },
            
            shuffle(arr) {
                return [...arr].sort(() => Math.random() - 0.5);
            },
            
            // Render Test
            renderTest() {
                const container = document.getElementById('testContent');
                
                if (this.currentTest.length === 0) {
                    container.innerHTML = '<p class="empty-state">Ch∆∞a c√≥ ƒë·ªÅ thi. Nh·∫•n "T·∫°o ƒë·ªÅ m·ªõi".</p>';
                    return;
                }
                
                let html = '<div class="question-list">';
                
                this.currentTest.forEach((q, index) => {
                    const isBookmarked = this.bookmarks.includes(q.id);
                    const bookmarkIcon = isBookmarked ? 'üîñ' : 'üìë';
                    
                    html += `
                        <div class="question-item">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div class="question-header">C√¢u ${index + 1}</div>
                                <button class="btn btn-secondary" style="padding: 0.4rem 0.8rem;" onclick="app.toggleBookmark('${q.id}'); app.renderTest();">${bookmarkIcon} ƒê√°nh d·∫•u</button>
                            </div>
                            <div class="question-prompt">${q.prompt}</div>
                    `;
                    
                    if (q.type === 'mcq') {
                        html += '<div class="options">';
                        q.options.forEach((opt, i) => {
                            html += `
                                <div class="option-item">
                                    <input type="radio" name="q${index}" value="${i}" id="q${index}_${i}">
                                    <label for="q${index}_${i}">${String.fromCharCode(65 + i)}. ${opt}</label>
                                </div>
                            `;
                        });
                        html += '</div>';
                    } else if (q.type === 'truefalse') {
                        html += `
                            <div class="options">
                                <div class="option-item">
                                    <input type="radio" name="q${index}" value="true" id="q${index}_true">
                                    <label for="q${index}_true">ƒê√∫ng</label>
                                </div>
                                <div class="option-item">
                                    <input type="radio" name="q${index}" value="false" id="q${index}_false">
                                    <label for="q${index}_false">Sai</label>
                                </div>
                            </div>
                        `;
                    } else if (q.type === 'short') {
                        html += `<input type="text" class="short-answer" id="q${index}" placeholder="Nh·∫≠p ƒë√°p √°n...">`;
                    }
                    
                    html += '</div>';
                });
                
                html += '</div>';
                container.innerHTML = html;
            },
            
            // Submit Test
            submitTest() {
                if (this.currentTest.length === 0) {
                    alert('Vui l√≤ng t·∫°o ƒë·ªÅ thi tr∆∞·ªõc!');
                    return;
                }
                
                // Collect answers
                this.userAnswers = {};
                this.currentTest.forEach((q, index) => {
                    if (q.type === 'mcq') {
                        const selected = document.querySelector(`input[name="q${index}"]:checked`);
                        this.userAnswers[index] = selected ? parseInt(selected.value) : null;
                    } else if (q.type === 'truefalse') {
                        const selected = document.querySelector(`input[name="q${index}"]:checked`);
                        this.userAnswers[index] = selected ? (selected.value === 'true') : null;
                    } else if (q.type === 'short') {
                        this.userAnswers[index] = document.getElementById(`q${index}`).value.trim();
                    }
                });
                
                // Grade
                let correct = 0;
                const wrong = [];
                
                this.currentTest.forEach((q, index) => {
                    const userAns = this.userAnswers[index];
                    const correctAns = q.answer;
                    
                    let isCorrect = false;
                    
                    if (q.type === 'mcq') {
                        isCorrect = userAns === correctAns;
                    } else if (q.type === 'truefalse') {
                        isCorrect = userAns === correctAns;
                    } else if (q.type === 'short') {
                        isCorrect = this.normalizeString(userAns) === this.normalizeString(String(correctAns));
                    }
                    
                    if (isCorrect) {
                        correct++;
                    } else {
                        wrong.push({ index, question: q, userAnswer: userAns });
                        this.addToErrorLog(q, userAns);
                    }
                });
                
                const percentage = (correct / this.currentTest.length * 100).toFixed(2);
                const score = (correct / this.currentTest.length * 10).toFixed(2);
                
                // Save to history
                const mode = document.querySelector('input[name="testMode"]:checked').value;
                const testRecord = {
                    timestamp: Date.now(),
                    mode: mode,
                    profile: mode === 'profile' ? document.querySelector('input[name="profile"]:checked').value : null,
                    chapter: mode === 'chapter' ? document.getElementById('chapterSelect').value || 'T·∫•t c·∫£ ch∆∞∆°ng' : null,
                    total: this.currentTest.length,
                    correct: correct,
                    percentage: percentage,
                    score: parseFloat(score)
                };
                
                this.testHistory.push(testRecord);
                
                if (this.testHistory.length > 50) {
                    this.testHistory = this.testHistory.slice(-50);
                }
                
                // Update streak and check achievements
                this.updateStudyStreak();
                this.checkAchievements();
                
                this.renderResults(correct, this.currentTest.length, percentage, score, wrong);
                document.getElementById('testResults').scrollIntoView({ behavior: 'smooth' });
            },
            
            normalizeString(str) {
                if (!str) return '';
                return str.toLowerCase().trim().replace(/\s+/g, ' ');
            },
            
            addToErrorLog(question, userAnswer) {
                const existing = this.errorLog.findIndex(e => e.id === question.id);
                
                if (existing !== -1) {
                    this.errorLog[existing].timestamp = Date.now();
                    this.errorLog[existing].userAnswer = this.formatAnswer(question, userAnswer);
                } else {
                    this.errorLog.push({
                        id: question.id,
                        prompt: question.prompt,
                        userAnswer: this.formatAnswer(question, userAnswer),
                        correctAnswer: this.formatAnswer(question, question.answer),
                        timestamp: Date.now()
                    });
                }
            },
            
            formatAnswer(question, answer) {
                if (question.type === 'mcq') {
                    return answer !== null ? String.fromCharCode(65 + answer) : 'Kh√¥ng tr·∫£ l·ªùi';
                } else if (question.type === 'truefalse') {
                    return answer === true ? 'ƒê√∫ng' : answer === false ? 'Sai' : 'Kh√¥ng tr·∫£ l·ªùi';
                } else {
                    return answer || 'Kh√¥ng tr·∫£ l·ªùi';
                }
            },
            
            renderResults(correct, total, percentage, score, wrong) {
                let html = `
                    <div class="results">
                        <div class="score-display">üéØ ƒêi·ªÉm: ${score}/10</div>
                        <div class="stats">
                            <div class="stat-card">
                                <div class="stat-value">${correct}/${total}</div>
                                <div class="stat-label">C√¢u ƒë√∫ng</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${percentage}%</div>
                                <div class="stat-label">T·ª∑ l·ªá</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${wrong.length}</div>
                                <div class="stat-label">C√¢u sai</div>
                            </div>
                        </div>
                `;
                
                if (wrong.length > 0) {
                    html += '<div class="wrong-answers"><h3>Chi ti·∫øt c√°c c√¢u sai</h3>';
                    
                    wrong.forEach(w => {
                        const q = w.question;
                        html += `
                            <div class="wrong-item">
                                <div class="question-num">C√¢u ${w.index + 1}</div>
                                <div class="question-prompt">${q.prompt}</div>
                                <div class="answer-comparison">
                                    <div class="user-answer">
                                        <strong>B·∫°n ch·ªçn:</strong> ${this.formatAnswer(q, w.userAnswer)}
                                    </div>
                                    <div class="correct-answer">
                                        <strong>ƒê√°p √°n ƒë√∫ng:</strong> ${this.formatAnswer(q, q.answer)}
                                    </div>
                                </div>
                                <div class="explanation">
                                    <strong>Gi·∫£i th√≠ch:</strong> ${q.explain}
                                </div>
                            </div>
                        `;
                    });
                    
                    html += '</div>';
                }
                
                html += '</div>';
                
                document.getElementById('testResults').innerHTML = html;
            },
            
            // Error Log
            renderErrorLog() {
                const container = document.getElementById('errorLogContent');
                
                if (this.errorLog.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <p>üìù Ch∆∞a c√≥ c√¢u n√†o trong s·ªï l·ªói.</p>
                        </div>
                    `;
                    return;
                }
                
                const sorted = [...this.errorLog].sort((a, b) => b.timestamp - a.timestamp);
                
                let html = '<div class="error-log-list">';
                
                sorted.forEach(err => {
                    const date = new Date(err.timestamp).toLocaleString('vi-VN');
                    html += `
                        <div class="error-item">
                            <div class="error-meta">
                                <span>${date}</span> | <span>ID: ${err.id}</span>
                            </div>
                            <div class="question-prompt">${err.prompt}</div>
                            <div class="answer-comparison">
                                <div class="user-answer">
                                    <strong>B·∫°n ƒë√£ ch·ªçn:</strong> ${err.userAnswer}
                                </div>
                                <div class="correct-answer">
                                    <strong>ƒê√°p √°n ƒë√∫ng:</strong> ${err.correctAnswer}
                                </div>
                            </div>
                            <button class="btn btn-danger" onclick="app.removeFromErrorLog('${err.id}')">X√≥a</button>
                        </div>
                    `;
                });
                
                html += '</div>';
                container.innerHTML = html;
            },
            
            removeFromErrorLog(id) {
                this.errorLog = this.errorLog.filter(e => e.id !== id);
                this.renderErrorLog();
            },
            
            clearErrorLog() {
                if (!confirm('X√≥a to√†n b·ªô s·ªï l·ªói?')) return;
                this.errorLog = [];
                this.renderErrorLog();
            },
            
            retryErrors() {
                if (this.errorLog.length === 0) {
                    alert('Kh√¥ng c√≥ c√¢u n√†o trong s·ªï l·ªói!');
                    return;
                }
                
                const errorIds = this.errorLog.map(e => e.id);
                this.currentTest = this.currentBank.filter(q => errorIds.includes(q.id));
                this.currentTest = this.shuffle(this.currentTest);
                this.userAnswers = {};
                
                this.showSection('test');
                this.renderTest();
                document.getElementById('testResults').innerHTML = '';
            },
            
            // Dark Mode
            toggleDarkMode() {
                this.darkMode = !this.darkMode;
                document.body.classList.toggle('dark-mode', this.darkMode);
            },
            
            // Study Streak
            updateStudyStreak() {
                const today = new Date().toDateString();
                const lastDate = this.studyStreak.lastStudyDate;
                
                if (lastDate !== today) {
                    if (lastDate) {
                        const lastDateTime = new Date(lastDate).getTime();
                        const todayTime = new Date(today).getTime();
                        const diffDays = Math.floor((todayTime - lastDateTime) / (1000 * 60 * 60 * 24));
                        
                        if (diffDays === 1) {
                            this.studyStreak.current++;
                        } else if (diffDays > 1) {
                            this.studyStreak.current = 1;
                        }
                    } else {
                        this.studyStreak.current = 1;
                    }
                    
                    this.studyStreak.lastStudyDate = today;
                    
                    if (this.studyStreak.current > this.studyStreak.best) {
                        this.studyStreak.best = this.studyStreak.current;
                    }
                }
            },
            
            // Achievements System
            checkAchievements() {
                const newAchievements = [];
                
                // Achievement: Ho√†n th√†nh b√†i test ƒë·∫ßu ti√™n
                if (this.testHistory.length === 1 && !this.achievements.includes('first_test')) {
                    newAchievements.push({ id: 'first_test', name: 'Kh·ªüi ƒë·∫ßu', desc: 'Ho√†n th√†nh b√†i test ƒë·∫ßu ti√™n', icon: 'üéØ' });
                    this.achievements.push('first_test');
                }
                
                // Achievement: 10 b√†i test
                if (this.testHistory.length === 10 && !this.achievements.includes('test_10')) {
                    newAchievements.push({ id: 'test_10', name: 'Ki√™n tr√¨', desc: 'Ho√†n th√†nh 10 b√†i test', icon: 'üí™' });
                    this.achievements.push('test_10');
                }
                
                // Achievement: ƒêi·ªÉm 9+
                if (this.testHistory.some(t => t.score >= 9) && !this.achievements.includes('score_9')) {
                    newAchievements.push({ id: 'score_9', name: 'Xu·∫•t s·∫Øc', desc: 'ƒê·∫°t ƒëi·ªÉm 9+', icon: '‚≠ê' });
                    this.achievements.push('score_9');
                }
                
                // Achievement: ƒêi·ªÉm 10
                if (this.testHistory.some(t => t.score === 10) && !this.achievements.includes('perfect')) {
                    newAchievements.push({ id: 'perfect', name: 'Ho√†n h·∫£o', desc: 'ƒê·∫°t ƒëi·ªÉm tuy·ªát ƒë·ªëi', icon: 'üèÜ' });
                    this.achievements.push('perfect');
                }
                
                // Achievement: 7 ng√†y li√™n t·ª•c
                if (this.studyStreak.current >= 7 && !this.achievements.includes('streak_7')) {
                    newAchievements.push({ id: 'streak_7', name: 'M·ªôt tu·∫ßn', desc: 'H·ªçc 7 ng√†y li√™n t·ª•c', icon: 'üî•' });
                    this.achievements.push('streak_7');
                }
                
                // Achievement: 30 ng√†y li√™n t·ª•c
                if (this.studyStreak.current >= 30 && !this.achievements.includes('streak_30')) {
                    newAchievements.push({ id: 'streak_30', name: 'Si√™u ki√™n tr√¨', desc: 'H·ªçc 30 ng√†y li√™n t·ª•c', icon: 'üöÄ' });
                    this.achievements.push('streak_30');
                }
                
                // Hi·ªÉn th·ªã th√¥ng b√°o
                if (newAchievements.length > 0) {
                    newAchievements.forEach(ach => {
                        this.showAchievementNotification(ach);
                    });
                }
            },
            
            showAchievementNotification(achievement) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 100px;
                    right: 20px;
                    background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
                    color: white;
                    padding: 1.5rem;
                    border-radius: 12px;
                    box-shadow: 0 8px 16px rgba(0,0,0,0.3);
                    z-index: 1000;
                    animation: slideIn 0.5s ease;
                    max-width: 300px;
                `;
                
                notification.innerHTML = `
                    <div style="font-size: 3rem; text-align: center; margin-bottom: 0.5rem;">${achievement.icon}</div>
                    <div style="font-size: 1.2rem; font-weight: 700; text-align: center; margin-bottom: 0.3rem;">üéâ Huy hi·ªáu m·ªõi!</div>
                    <div style="font-size: 1rem; font-weight: 600; text-align: center; margin-bottom: 0.2rem;">${achievement.name}</div>
                    <div style="font-size: 0.9rem; text-align: center; opacity: 0.9;">${achievement.desc}</div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.animation = 'slideOut 0.5s ease';
                    setTimeout(() => notification.remove(), 500);
                }, 3000);
            },
            
            renderAchievements() {
                const container = document.getElementById('achievementsContent');
                
                const allAchievements = [
                    { id: 'first_test', name: 'Kh·ªüi ƒë·∫ßu', desc: 'Ho√†n th√†nh b√†i test ƒë·∫ßu ti√™n', icon: 'üéØ' },
                    { id: 'test_10', name: 'Ki√™n tr√¨', desc: 'Ho√†n th√†nh 10 b√†i test', icon: 'üí™' },
                    { id: 'score_9', name: 'Xu·∫•t s·∫Øc', desc: 'ƒê·∫°t ƒëi·ªÉm 9+', icon: '‚≠ê' },
                    { id: 'perfect', name: 'Ho√†n h·∫£o', desc: 'ƒê·∫°t ƒëi·ªÉm 10', icon: 'üèÜ' },
                    { id: 'streak_7', name: 'M·ªôt tu·∫ßn', desc: 'H·ªçc 7 ng√†y li√™n t·ª•c', icon: 'üî•' },
                    { id: 'streak_30', name: 'Si√™u ki√™n tr√¨', desc: 'H·ªçc 30 ng√†y li√™n t·ª•c', icon: 'üöÄ' }
                ];
                
                let html = `
                    <div class="streak-display" style="margin-bottom: 2rem;">
                        <div style="font-size: 1rem; margin-bottom: 0.5rem;">üî• Chu·ªói h·ªçc li√™n t·ª•c</div>
                        <div class="streak-number">${this.studyStreak.current}</div>
                        <div style="font-size: 0.9rem; margin-top: 0.5rem;">ng√†y | K·ª∑ l·ª•c: ${this.studyStreak.best} ng√†y</div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                `;
                
                allAchievements.forEach(ach => {
                    const unlocked = this.achievements.includes(ach.id);
                    html += `
                        <div class="achievement ${unlocked ? '' : 'locked'}">
                            <div style="font-size: 2.5rem;">${ach.icon}</div>
                            <div>
                                <div style="font-weight: 700; margin-bottom: 0.2rem;">${ach.name}</div>
                                <div style="font-size: 0.85rem; opacity: 0.9;">${ach.desc}</div>
                                ${unlocked ? '<div style="font-size: 0.8rem; margin-top: 0.3rem;">‚úì ƒê√£ m·ªü kh√≥a</div>' : '<div style="font-size: 0.8rem; margin-top: 0.3rem;">üîí Ch∆∞a ƒë·∫°t</div>'}
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                container.innerHTML = html;
            },
            
            // Analytics
            renderAnalytics() {
                const container = document.getElementById('analyticsContent');
                
                if (this.testHistory.length === 0) {
                    container.innerHTML = '<p class="empty-state">Ch∆∞a c√≥ d·ªØ li·ªáu ph√¢n t√≠ch. H√£y l√†m √≠t nh·∫•t 1 b√†i test.</p>';
                    return;
                }
                
                // T√≠nh to√°n statistics
                const scores = this.testHistory.map(t => t.score);
                const avgScore = (scores.reduce((a, b) => a + b, 0) / scores.length).toFixed(2);
                const maxScore = Math.max(...scores).toFixed(2);
                const minScore = Math.min(...scores).toFixed(2);
                
                // Ph√¢n t√≠ch theo ch·ªß ƒë·ªÅ
                const topicStats = {};
                this.testHistory.forEach(test => {
                    if (test.details) {
                        test.details.forEach(d => {
                            if (!topicStats[d.topic]) {
                                topicStats[d.topic] = { correct: 0, total: 0 };
                            }
                            topicStats[d.topic].total++;
                            if (d.isCorrect) topicStats[d.topic].correct++;
                        });
                    }
                });
                
                let html = `
                    <div class="stats" style="margin-bottom: 2rem;">
                        <div class="stat-card">
                            <div class="stat-value">${avgScore}</div>
                            <div class="stat-label">ƒêi·ªÉm TB</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">${maxScore}</div>
                            <div class="stat-label">ƒêi·ªÉm cao nh·∫•t</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">${minScore}</div>
                            <div class="stat-label">ƒêi·ªÉm th·∫•p nh·∫•t</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">${this.testHistory.length}</div>
                            <div class="stat-label">T·ªïng b√†i test</div>
                        </div>
                    </div>
                    
                    <div style="background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 2rem;">
                        <h3 style="color: #1e40af; margin-bottom: 1rem;">üìä Bi·ªÉu ƒë·ªì ti·∫øn ƒë·ªô</h3>
                        <div style="display: flex; align-items: flex-end; gap: 0.5rem; height: 200px;">
                `;
                
                // Simple bar chart
                const recentTests = this.testHistory.slice(-10);
                recentTests.forEach((test, i) => {
                    const height = (test.score / 10) * 180;
                    const color = test.score >= 8 ? '#10b981' : test.score >= 6.5 ? '#3b82f6' : test.score >= 5 ? '#f59e0b' : '#ef4444';
                    html += `
                        <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: flex-end;">
                            <div style="font-size: 0.8rem; font-weight: 600; margin-bottom: 0.3rem;">${test.score}</div>
                            <div style="width: 100%; background: ${color}; height: ${height}px; border-radius: 4px 4px 0 0; transition: height 0.3s;"></div>
                            <div style="font-size: 0.7rem; color: #64748b; margin-top: 0.3rem;">${i + 1}</div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                    
                    <div style="background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                        <h3 style="color: #1e40af; margin-bottom: 1rem;">üìö Hi·ªáu su·∫•t theo ch·ªß ƒë·ªÅ</h3>
                `;
                
                for (let topic in topicStats) {
                    const stat = topicStats[topic];
                    const percent = ((stat.correct / stat.total) * 100).toFixed(0);
                    html += `
                        <div style="margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <strong>${topic}</strong>
                                <span>${stat.correct}/${stat.total} (${percent}%)</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: ${percent}%">${percent}%</div>
                            </div>
                        </div>
                    `;
                }
                
                html += '</div>';
                container.innerHTML = html;
            },
            
            // Review Mode
            toggleReviewMode() {
                this.reviewMode = !this.reviewMode;
                if (this.reviewMode) {
                    alert('üîç Review Mode: B·∫≠t ch·∫ø ƒë·ªô xem ƒë√°p √°n ngay khi ch·ªçn');
                } else {
                    alert('Review Mode ƒë√£ t·∫Øt');
                }
            },
            
            // Utilities
            updateBankCount() {
                document.getElementById('bankCount').textContent = this.currentBank.length;
            },
            
            // Timer Functions
            startTimer(minutes) {
                this.timeRemaining = minutes * 60;
                document.getElementById('testTimer').style.display = 'block';
                
                this.timerInterval = setInterval(() => {
                    this.timeRemaining--;
                    
                    const mins = Math.floor(this.timeRemaining / 60);
                    const secs = this.timeRemaining % 60;
                    document.getElementById('timerDisplay').textContent = 
                        `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
                    
                    if (this.timeRemaining <= 0) {
                        this.stopTimer();
                        alert('‚è∞ H·∫øt gi·ªù! T·ª± ƒë·ªông n·ªôp b√†i.');
                        this.submitTest();
                    } else if (this.timeRemaining === 300) {
                        alert('‚ö†Ô∏è C√≤n 5 ph√∫t!');
                    }
                }, 1000);
            },
            
            stopTimer() {
                if (this.timerInterval) {
                    clearInterval(this.timerInterval);
                    this.timerInterval = null;
                }
                document.getElementById('testTimer').style.display = 'none';
            },
            
            // Bookmark Functions
            toggleBookmark(questionId) {
                const index = this.bookmarks.indexOf(questionId);
                if (index > -1) {
                    this.bookmarks.splice(index, 1);
                } else {
                    this.bookmarks.push(questionId);
                }
            },
            
            renderBookmarks() {
                const container = document.getElementById('bookmarksContent');
                
                if (this.bookmarks.length === 0) {
                    container.innerHTML = '<p class="empty-state">Ch∆∞a c√≥ c√¢u n√†o ƒë∆∞·ª£c ƒë√°nh d·∫•u.</p>';
                    return;
                }
                
                const questions = this.currentBank.filter(q => this.bookmarks.includes(q.id));
                
                let html = '<div style="margin-bottom: 1.5rem;">';
                html += `<button class="btn" onclick="app.practiceBookmarks()">üéØ Luy·ªán c√°c c√¢u ƒë√£ ƒë√°nh d·∫•u</button>`;
                html += `<button class="btn btn-danger" onclick="app.clearBookmarks()">üóëÔ∏è X√≥a t·∫•t c·∫£</button>`;
                html += '</div>';
                
                html += '<div class="question-list">';
                questions.forEach((q, index) => {
                    const difficultyBadge = `<span class="badge badge-${q.difficulty}">${q.difficulty}</span>`;
                    html += `
                        <div class="question-item">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <div class="question-header">C√¢u ${index + 1} - ${q.topic}</div>
                                <div>
                                    ${difficultyBadge}
                                    <button class="btn btn-danger" onclick="app.toggleBookmark('${q.id}'); app.renderBookmarks();">X√≥a</button>
                                </div>
                            </div>
                            <div class="question-prompt">${q.prompt}</div>
                            <div class="explanation" style="margin-top: 1rem;">
                                <strong>ƒê√°p √°n:</strong> ${this.formatAnswer(q, q.answer)}<br>
                                <strong>Gi·∫£i th√≠ch:</strong> ${q.explain}
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
                
                container.innerHTML = html;
            },
            
            practiceBookmarks() {
                if (this.bookmarks.length === 0) {
                    alert('Kh√¥ng c√≥ c√¢u n√†o ƒë∆∞·ª£c ƒë√°nh d·∫•u!');
                    return;
                }
                
                this.currentTest = this.currentBank.filter(q => this.bookmarks.includes(q.id));
                this.currentTest = this.shuffle(this.currentTest);
                this.userAnswers = {};
                
                this.showSection('test');
                this.renderTest();
                document.getElementById('testResults').innerHTML = '';
            },
            
            clearBookmarks() {
                if (!confirm('X√≥a t·∫•t c·∫£ c√¢u ƒë√£ ƒë√°nh d·∫•u?')) return;
                this.bookmarks = [];
                this.renderBookmarks();
            },
            
            // Question Management
            renderQuestionManager() {
                const container = document.getElementById('questionManager');
                
                const statsHtml = `
                    <strong>üìä T·ªïng: ${this.currentBank.length} c√¢u</strong> | 
                    MCQ: ${this.currentBank.filter(q => q.type === 'mcq').length} | 
                    T/F: ${this.currentBank.filter(q => q.type === 'truefalse').length} | 
                    Short: ${this.currentBank.filter(q => q.type === 'short').length} | 
                    D·ªÖ: ${this.currentBank.filter(q => q.difficulty === 'easy').length} | 
                    TB: ${this.currentBank.filter(q => q.difficulty === 'medium').length} | 
                    Kh√≥: ${this.currentBank.filter(q => q.difficulty === 'hard').length}
                `;
                document.getElementById('bankStatsDisplay').innerHTML = statsHtml;
                
                let html = '<div style="overflow-x: auto;"><table style="width: 100%; border-collapse: collapse;">';
                html += `
                    <thead>
                        <tr style="background: #f1f5f9; text-align: left;">
                            <th style="padding: 0.8rem; border-bottom: 2px solid #e2e8f0;">ID</th>
                            <th style="padding: 0.8rem; border-bottom: 2px solid #e2e8f0;">Lo·∫°i</th>
                            <th style="padding: 0.8rem; border-bottom: 2px solid #e2e8f0;">ƒê·ªô kh√≥</th>
                            <th style="padding: 0.8rem; border-bottom: 2px solid #e2e8f0;">Ch·ªß ƒë·ªÅ</th>
                            <th style="padding: 0.8rem; border-bottom: 2px solid #e2e8f0;">N·ªôi dung</th>
                            <th style="padding: 0.8rem; border-bottom: 2px solid #e2e8f0;">Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody>
                `;
                
                this.currentBank.forEach(q => {
                    const typeLabel = q.type === 'mcq' ? 'MCQ' : q.type === 'truefalse' ? 'T/F' : 'Short';
                    const difficultyBadge = `<span class="badge badge-${q.difficulty}">${q.difficulty}</span>`;
                    
                    html += `
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.8rem;">${q.id}</td>
                            <td style="padding: 0.8rem;">${typeLabel}</td>
                            <td style="padding: 0.8rem;">${difficultyBadge}</td>
                            <td style="padding: 0.8rem;">${q.topic || '-'}</td>
                            <td style="padding: 0.8rem;">${q.prompt.substring(0, 60)}...</td>
                            <td style="padding: 0.8rem;">
                                <button class="btn" style="padding: 0.4rem 0.8rem; font-size: 0.85rem; margin: 0.2rem;" onclick="app.editQuestion('${q.id}')">‚úèÔ∏è</button>
                                <button class="btn btn-danger" style="padding: 0.4rem 0.8rem; font-size: 0.85rem; margin: 0.2rem;" onclick="app.deleteQuestion('${q.id}')">üóëÔ∏è</button>
                            </td>
                        </tr>
                    `;
                });
                
                html += '</tbody></table></div>';
                container.innerHTML = html;
            },
            
            openAddQuestionModal() {
                const id = this.generateId();
                const promptText = prompt('Nh·∫≠p n·ªôi dung c√¢u h·ªèi:');
                if (!promptText) return;
                
                const type = prompt('Lo·∫°i c√¢u h·ªèi? (mcq/truefalse/short):', 'mcq');
                if (!['mcq', 'truefalse', 'short'].includes(type)) {
                    alert('Lo·∫°i kh√¥ng h·ª£p l·ªá!');
                    return;
                }
                
                const difficulty = prompt('ƒê·ªô kh√≥? (easy/medium/hard):', 'easy');
                const topic = prompt('Ch·ªß ƒë·ªÅ:', 'H√†m s·ªë');
                
                let question = { id, type, difficulty, topic, prompt: promptText };
                
                if (type === 'mcq') {
                    const options = [];
                    for (let i = 0; i < 4; i++) {
                        const opt = prompt(`ƒê√°p √°n ${String.fromCharCode(65 + i)}:`);
                        if (!opt) {
                            alert('C·∫ßn ƒë·ªß 4 ƒë√°p √°n!');
                            return;
                        }
                        options.push(opt);
                    }
                    question.options = options;
                    question.answer = parseInt(prompt('ƒê√°p √°n ƒë√∫ng (0-3):'));
                } else if (type === 'truefalse') {
                    question.answer = confirm('ƒê√°p √°n ƒë√∫ng (OK=true, Cancel=false)?');
                } else {
                    question.answer = prompt('ƒê√°p √°n ƒë√∫ng:');
                }
                
                question.explain = prompt('L·ªùi gi·∫£i:', 'Gi·∫£i th√≠ch...');
                
                this.currentBank.push(question);
                this.renderQuestionManager();
                this.updateBankCount();
                alert('‚úÖ ƒê√£ th√™m c√¢u h·ªèi!');
            },
            
            editQuestion(id) {
                const q = this.currentBank.find(q => q.id === id);
                if (!q) return;
                
                alert('T√≠nh nƒÉng ch·ªânh s·ª≠a chi ti·∫øt - Vui l√≤ng export JSON, s·ª≠a b·∫±ng text editor, r·ªìi import l·∫°i.');
            },
            
            deleteQuestion(id) {
                if (!confirm('X√≥a c√¢u h·ªèi n√†y?')) return;
                this.currentBank = this.currentBank.filter(q => q.id !== id);
                this.renderQuestionManager();
                this.updateBankCount();
            },
            
            generateId() {
                const maxId = this.currentBank.reduce((max, q) => {
                    const num = parseInt(q.id.replace('Q-', ''));
                    return num > max ? num : max;
                }, 0);
                return `Q-${String(maxId + 1).padStart(3, '0')}`;
            },
            
            // Import/Export
            importQuestions(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = JSON.parse(e.target.result);
                        
                        if (!Array.isArray(data)) {
                            throw new Error('File ph·∫£i ch·ª©a m·∫£ng c√¢u h·ªèi');
                        }
                        
                        const action = confirm('OK = THAY TH·∫æ to√†n b·ªô | Cancel = TH√äM V√ÄO ng√¢n h√†ng hi·ªán t·∫°i');
                        
                        if (action) {
                            this.currentBank = data;
                        } else {
                            this.currentBank = [...this.currentBank, ...data];
                        }
                        
                        this.renderQuestionManager();
                        this.updateBankCount();
                        alert(`‚úÖ Import th√†nh c√¥ng ${data.length} c√¢u!`);
                    } catch (error) {
                        alert(`‚ùå L·ªói: ${error.message}`);
                    }
                };
                reader.readAsText(file);
                event.target.value = '';
            },
            
            exportQuestions() {
                const data = JSON.stringify(this.currentBank, null, 2);
                const blob = new Blob([data], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `toan-thptqg-${Date.now()}.json`;
                a.click();
                
                URL.revokeObjectURL(url);
                alert('‚úÖ ƒê√£ export ng√¢n h√†ng c√¢u h·ªèi!');
            },
            
            resetToDefault() {
                if (!confirm('Reset v·ªÅ 150 c√¢u m·∫∑c ƒë·ªãnh? M·∫•t h·∫øt d·ªØ li·ªáu hi·ªán t·∫°i!')) return;
                this.currentBank = [...SAMPLE_BANK];
                this.renderQuestionManager();
                this.updateBankCount();
                alert('‚úÖ ƒê√£ reset v·ªÅ m·∫∑c ƒë·ªãnh!');
            }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => app.init());
    </script>
</body>
</html>