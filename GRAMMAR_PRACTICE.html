<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Grammar A0-C2 - H·ªçc Ng·ªØ Ph√°p Ti·∫øng Anh</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
            overflow-x: auto;
        }

        .nav-tab {
            padding: 15px 25px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 1em;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .nav-tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .content {
            padding: 30px;
        }

        .level-section {
            display: none;
        }

        .level-section.active {
            display: block;
        }

        .lessons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .lesson-card {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .lesson-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .lesson-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .lesson-card .progress-bar {
            width: 100%;
            height: 8px;
            background: #dee2e6;
            border-radius: 4px;
            margin-top: 10px;
            overflow: hidden;
        }

        .lesson-card .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s;
        }

        .lesson-detail {
            display: none;
        }

        .lesson-detail.active {
            display: block;
        }

        .back-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin-bottom: 20px;
        }

        .back-btn:hover {
            background: #5a6268;
        }

        .grammar-section {
            background: #e7f3ff;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .grammar-section h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .example {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 3px solid #28a745;
        }

        .example strong {
            color: #667eea;
        }

        .mistakes-section {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .exercises-section {
            margin-top: 30px;
        }

        .exercise-item {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .exercise-item.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .exercise-item.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .exercise-question {
            font-size: 1.1em;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .exercise-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            background: white;
            border: 2px solid #dee2e6;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s;
            font-size: 1em;
        }

        .option-btn:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }

        .option-btn.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .option-btn.correct {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        .option-btn.incorrect {
            background: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 1em;
            margin: 10px 0;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .submit-btn, .check-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 10px;
            transition: all 0.3s;
        }

        .submit-btn:hover, .check-btn:hover {
            background: #5568d3;
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 5px;
            display: none;
        }

        .explanation.show {
            display: block;
        }

        .explanation strong {
            color: #667eea;
        }

        .hint-btn {
            background: #ffc107;
            color: #333;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 10px;
        }

        .score-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        .tools-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tool-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.95em;
        }

        .tool-btn:hover {
            background: #5a6268;
        }

        @media print {
            body {
                background: white;
            }
            .nav-tabs, .tools-bar, .back-btn, .submit-btn, .check-btn, .hint-btn {
                display: none !important;
            }
            .container {
                box-shadow: none;
            }
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }
            .lessons-grid {
                grid-template-columns: 1fr;
            }
            .nav-tab {
                padding: 12px 15px;
                font-size: 0.9em;
            }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-content h3 {
            margin-bottom: 20px;
            color: #667eea;
        }

        .modal-content textarea {
            width: 100%;
            min-height: 200px;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-family: monospace;
            font-size: 0.9em;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéì English Grammar Master</h1>
            <p>H·ªçc Ng·ªØ Ph√°p Ti·∫øng Anh t·ª´ A0 ƒë·∫øn C2</p>
        </header>

        <nav class="nav-tabs" id="levelTabs">
            <button class="nav-tab active" data-level="A0">A0 - Beginner</button>
            <button class="nav-tab" data-level="A1">A1 - Elementary</button>
            <button class="nav-tab" data-level="A2">A2 - Pre-Intermediate</button>
            <button class="nav-tab" data-level="B1">B1 - Intermediate</button>
            <button class="nav-tab" data-level="B2">B2 - Upper-Intermediate</button>
            <button class="nav-tab" data-level="C1">C1 - Advanced</button>
            <button class="nav-tab" data-level="C2">C2 - Proficiency</button>
        </nav>

        <div class="content" id="mainContent">
            <!-- Levels will be dynamically generated here -->
        </div>
    </div>

    <!-- Modal for Export/Import -->
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <h3>üì§ Export Progress</h3>
            <p>Copy JSON n√†y v√† l∆∞u l·∫°i ƒë·ªÉ backup ti·∫øn ƒë·ªô c·ªßa b·∫°n:</p>
            <textarea id="exportData" readonly></textarea>
            <div class="modal-actions">
                <button class="submit-btn" onclick="copyExport()">üìã Copy</button>
                <button class="tool-btn" onclick="closeModal()">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <div class="modal" id="importModal">
        <div class="modal-content">
            <h3>üì• Import Progress</h3>
            <p>Paste JSON ƒë√£ l∆∞u v√†o ƒë√¢y ƒë·ªÉ kh√¥i ph·ª•c ti·∫øn ƒë·ªô:</p>
            <textarea id="importData"></textarea>
            <div class="modal-actions">
                <button class="submit-btn" onclick="importProgress()">Import</button>
                <button class="tool-btn" onclick="closeModal()">H·ªßy</button>
            </div>
        </div>
    </div>

    <script>
        // ==================== DATA STRUCTURE ====================
        const curriculum = {
            A0: {
                name: "Beginner",
                description: "B·∫Øt ƒë·∫ßu t·ª´ con s·ªë 0 - M·∫•t g·ªëc / Nh·∫≠p m√¥n",
                lessons: [
                    {
                        id: "a0-1",
                        title: "To Be (am/is/are)",
                        subtitle: "ƒê·ªông t·ª´ to be c∆° b·∫£n",
                        grammar: {
                            rule: "To be ƒë∆∞·ª£c d√πng ƒë·ªÉ ch·ªâ tr·∫°ng th√°i, danh t√≠nh, ho·∫∑c v·ªã tr√≠.\n\n" +
                                  "‚Ä¢ I am (I'm)\n" +
                                  "‚Ä¢ You/We/They are (You're/We're/They're)\n" +
                                  "‚Ä¢ He/She/It is (He's/She's/It's)",
                            examples: [
                                { en: "I am a student.", vi: "T√¥i l√† m·ªôt h·ªçc sinh." },
                                { en: "She is happy.", vi: "C√¥ ·∫•y vui v·∫ª." },
                                { en: "They are from Vietnam.", vi: "H·ªç ƒë·∫øn t·ª´ Vi·ªát Nam." },
                                { en: "We are friends.", vi: "Ch√∫ng t√¥i l√† b·∫°n b√®." },
                                { en: "It is a cat.", vi: "N√≥ l√† m·ªôt con m√®o." },
                                { en: "You are tall.", vi: "B·∫°n cao." }
                            ],
                            mistakes: [
                                "‚ùå I is a student ‚Üí ‚úÖ I am a student",
                                "‚ùå She are happy ‚Üí ‚úÖ She is happy",
                                "‚ùå They is friends ‚Üí ‚úÖ They are friends"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "I ___ a teacher.",
                                options: ["am", "is", "are", "be"],
                                correct: 0,
                                explanation: "'I' lu√¥n ƒëi v·ªõi 'am'. This is the correct form of 'to be' for the first person singular.",
                                hint: "Ch·ªß ng·ªØ l√† 'I'"
                            },
                            {
                                type: "mcq",
                                question: "She ___ from France.",
                                options: ["am", "is", "are", "be"],
                                correct: 1,
                                explanation: "'She' l√† ng√¥i th·ª© 3 s·ªë √≠t, d√πng 'is'.",
                                hint: "She = ng√¥i th·ª© 3"
                            },
                            {
                                type: "mcq",
                                question: "They ___ students.",
                                options: ["am", "is", "are", "be"],
                                correct: 2,
                                explanation: "'They' l√† s·ªë nhi·ªÅu, d√πng 'are'.",
                                hint: "They = s·ªë nhi·ªÅu"
                            },
                            {
                                type: "fill",
                                question: "We ___ happy. (am/is/are)",
                                correct: "are",
                                explanation: "'We' l√† s·ªë nhi·ªÅu, d√πng 'are'.",
                                hint: "We = s·ªë nhi·ªÅu"
                            },
                            {
                                type: "fill",
                                question: "It ___ a dog. (am/is/are)",
                                correct: "is",
                                explanation: "'It' l√† ng√¥i th·ª© 3 s·ªë √≠t, d√πng 'is'.",
                                hint: "It = ng√¥i th·ª© 3"
                            },
                            {
                                type: "error",
                                question: "He are a doctor.",
                                correct: "He is a doctor.",
                                explanation: "'He' l√† ng√¥i th·ª© 3 s·ªë √≠t, ph·∫£i d√πng 'is', kh√¥ng ph·∫£i 'are'.",
                                hint: "He kh√¥ng ƒëi v·ªõi are"
                            },
                            {
                                type: "transform",
                                question: "Transform to negative: I am tired.",
                                correct: "I am not tired.",
                                alternatives: ["I'm not tired.", "I am not tired"],
                                explanation: "ƒê·ªÉ t·∫°o ph·ªß ƒë·ªãnh v·ªõi 'to be', th√™m 'not' sau ƒë·ªông t·ª´.",
                                hint: "Th√™m 'not' sau am"
                            },
                            {
                                type: "mcq",
                                question: "You ___ my friend.",
                                options: ["am", "is", "are", "be"],
                                correct: 2,
                                explanation: "'You' lu√¥n d√πng v·ªõi 'are', c·∫£ s·ªë √≠t v√† s·ªë nhi·ªÅu.",
                                hint: "You = are"
                            },
                            {
                                type: "fill",
                                question: "The cat ___ on the table. (am/is/are)",
                                correct: "is",
                                explanation: "Cat (It) l√† ng√¥i th·ª© 3 s·ªë √≠t, d√πng 'is'.",
                                hint: "Cat = It"
                            },
                            {
                                type: "mcq",
                                question: "My parents ___ at home.",
                                options: ["am", "is", "are", "be"],
                                correct: 2,
                                explanation: "Parents (They) s·ªë nhi·ªÅu, d√πng 'are'.",
                                hint: "Parents = They"
                            },
                            {
                                type: "transform",
                                question: "Make question: She is a teacher.",
                                correct: "Is she a teacher?",
                                alternatives: ["Is she a teacher"],
                                explanation: "C√¢u h·ªèi v·ªõi 'to be': ƒê·∫£o 'is' l√™n tr∆∞·ªõc ch·ªß ng·ªØ.",
                                hint: "Is + she + ...?"
                            },
                            {
                                type: "fill",
                                question: "I ___ not hungry. (am/is/are)",
                                correct: "am",
                                explanation: "'I' + 'am' + 'not' = ph·ªß ƒë·ªãnh.",
                                hint: "I am not"
                            }
                        ]
                    },
                    {
                        id: "a0-2",
                        title: "Personal Pronouns",
                        subtitle: "ƒê·∫°i t·ª´ nh√¢n x∆∞ng",
                        grammar: {
                            rule: "Personal pronouns thay th·∫ø cho danh t·ª´ ch·ªâ ng∆∞·ªùi ho·∫∑c v·∫≠t.\n\n" +
                                  "Subject pronouns (ch·ªß ng·ªØ):\n" +
                                  "‚Ä¢ I, You, He, She, It, We, They\n\n" +
                                  "Object pronouns (t√¢n ng·ªØ):\n" +
                                  "‚Ä¢ me, you, him, her, it, us, them",
                            examples: [
                                { en: "I love you.", vi: "T√¥i y√™u b·∫°n." },
                                { en: "He knows me.", vi: "Anh ·∫•y bi·∫øt t√¥i." },
                                { en: "She likes him.", vi: "C√¥ ·∫•y th√≠ch anh ·∫•y." },
                                { en: "We see them.", vi: "Ch√∫ng t√¥i nh√¨n th·∫•y h·ªç." },
                                { en: "They help us.", vi: "H·ªç gi√∫p ch√∫ng t√¥i." },
                                { en: "It is for her.", vi: "N√≥ d√†nh cho c√¥ ·∫•y." }
                            ],
                            mistakes: [
                                "‚ùå Me am happy ‚Üí ‚úÖ I am happy",
                                "‚ùå She loves he ‚Üí ‚úÖ She loves him",
                                "‚ùå Them are students ‚Üí ‚úÖ They are students"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "___ am a student. (subject pronoun)",
                                options: ["Me", "I", "My", "Mine"],
                                correct: 1,
                                explanation: "'I' l√† ƒë·∫°i t·ª´ ch·ªß ng·ªØ ng√¥i th·ª© nh·∫•t.",
                                hint: "ƒê·∫°i t·ª´ ch·ªß ng·ªØ cho 't√¥i'"
                            },
                            {
                                type: "mcq",
                                question: "John loves ___. (object pronoun for 'she')",
                                options: ["she", "her", "hers", "herself"],
                                correct: 1,
                                explanation: "'Her' l√† ƒë·∫°i t·ª´ t√¢n ng·ªØ c·ªßa 'she'.",
                                hint: "T√¢n ng·ªØ c·ªßa 'she'"
                            },
                            {
                                type: "fill",
                                question: "We see ___ every day. (they ‚Üí object)",
                                correct: "them",
                                explanation: "'Them' l√† d·∫°ng t√¢n ng·ªØ c·ªßa 'they'.",
                                hint: "They ‚Üí object form"
                            },
                            {
                                type: "fill",
                                question: "___ is my brother. (he/him)",
                                correct: "He",
                                explanation: "'He' l√† ch·ªß ng·ªØ, 'him' l√† t√¢n ng·ªØ.",
                                hint: "C·∫ßn ch·ªß ng·ªØ ·ªü ƒë√¢y"
                            },
                            {
                                type: "error",
                                question: "Me love you.",
                                correct: "I love you.",
                                explanation: "'Me' kh√¥ng th·ªÉ l√†m ch·ªß ng·ªØ, ph·∫£i d√πng 'I'.",
                                hint: "Me kh√¥ng th·ªÉ l√†m ch·ªß ng·ªØ"
                            },
                            {
                                type: "mcq",
                                question: "She talks to ___. (I ‚Üí object)",
                                options: ["I", "me", "my", "mine"],
                                correct: 1,
                                explanation: "Sau gi·ªõi t·ª´ 'to' c·∫ßn d√πng t√¢n ng·ªØ 'me'.",
                                hint: "Sau 'to' c·∫ßn t√¢n ng·ªØ"
                            },
                            {
                                type: "transform",
                                question: "Replace with pronoun: Mary and John are happy.",
                                correct: "They are happy.",
                                alternatives: ["they are happy"],
                                explanation: "Mary v√† John (2 ng∆∞·ªùi) = They.",
                                hint: "2 ng∆∞·ªùi = They"
                            },
                            {
                                type: "mcq",
                                question: "This book is for ___. (we ‚Üí object)",
                                options: ["we", "us", "our", "ours"],
                                correct: 1,
                                explanation: "'Us' l√† d·∫°ng t√¢n ng·ªØ c·ªßa 'we'.",
                                hint: "We ‚Üí object form"
                            },
                            {
                                type: "fill",
                                question: "___ are my best friends. (they/them)",
                                correct: "They",
                                explanation: "C·∫ßn ch·ªß ng·ªØ, d√πng 'They'.",
                                hint: "Subject form"
                            },
                            {
                                type: "mcq",
                                question: "Can you help ___? (I ‚Üí object)",
                                options: ["I", "me", "my", "mine"],
                                correct: 1,
                                explanation: "Sau ƒë·ªông t·ª´ 'help' c·∫ßn t√¢n ng·ªØ 'me'.",
                                hint: "After verb = object"
                            },
                            {
                                type: "transform",
                                question: "Replace with pronoun: The book is interesting.",
                                correct: "It is interesting.",
                                alternatives: ["it is interesting"],
                                explanation: "The book (v·∫≠t s·ªë √≠t) = It.",
                                hint: "Book = It"
                            },
                            {
                                type: "fill",
                                question: "Give ___ the pen. (I ‚Üí object form)",
                                correct: "me",
                                explanation: "Give ‚Üí object pronoun 'me'.",
                                hint: "I ‚Üí me"
                            }
                        ]
                    },
                    {
                        id: "a0-3",
                        title: "Word Order: S + V + O",
                        subtitle: "Tr·∫≠t t·ª± t·ª´ c∆° b·∫£n trong c√¢u",
                        grammar: {
                            rule: "C√¢u ti·∫øng Anh c∆° b·∫£n theo tr·∫≠t t·ª±: Subject + Verb + Object\n\n" +
                                  "‚Ä¢ Subject (Ch·ªß ng·ªØ): Ai/c√°i g√¨ l√†m h√†nh ƒë·ªông\n" +
                                  "‚Ä¢ Verb (ƒê·ªông t·ª´): H√†nh ƒë·ªông g√¨\n" +
                                  "‚Ä¢ Object (T√¢n ng·ªØ): Ai/c√°i g√¨ nh·∫≠n h√†nh ƒë·ªông\n\n" +
                                  "Example: I (S) eat (V) apples (O).",
                            examples: [
                                { en: "I love music.", vi: "T√¥i y√™u √¢m nh·∫°c. (S-V-O)" },
                                { en: "She reads books.", vi: "C√¥ ·∫•y ƒë·ªçc s√°ch. (S-V-O)" },
                                { en: "They play football.", vi: "H·ªç ch∆°i b√≥ng ƒë√°. (S-V-O)" },
                                { en: "We eat rice.", vi: "Ch√∫ng t√¥i ƒÉn c∆°m. (S-V-O)" },
                                { en: "He likes cats.", vi: "Anh ·∫•y th√≠ch m√®o. (S-V-O)" },
                                { en: "You know me.", vi: "B·∫°n bi·∫øt t√¥i. (S-V-O)" }
                            ],
                            mistakes: [
                                "‚ùå Like I music ‚Üí ‚úÖ I like music",
                                "‚ùå Books reads she ‚Üí ‚úÖ She reads books",
                                "‚ùå Football play they ‚Üí ‚úÖ They play football"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "Choose correct order: I / love / cats",
                                options: ["Love I cats", "I love cats", "Cats love I", "Love cats I"],
                                correct: 1,
                                explanation: "Tr·∫≠t t·ª± ƒë√∫ng: Subject (I) + Verb (love) + Object (cats).",
                                hint: "S + V + O"
                            },
                            {
                                type: "transform",
                                question: "Put in order: book / reads / she / a",
                                correct: "She reads a book.",
                                alternatives: ["She reads a book", "she reads a book"],
                                explanation: "She (S) + reads (V) + a book (O).",
                                hint: "Start with subject"
                            },
                            {
                                type: "mcq",
                                question: "What is the subject? 'They play tennis.'",
                                options: ["play", "tennis", "They", "play tennis"],
                                correct: 2,
                                explanation: "'They' l√† ch·ªß ng·ªØ - ng∆∞·ªùi th·ª±c hi·ªán h√†nh ƒë·ªông.",
                                hint: "Who does the action?"
                            },
                            {
                                type: "mcq",
                                question: "What is the object? 'I eat apples.'",
                                options: ["I", "eat", "apples", "I eat"],
                                correct: 2,
                                explanation: "'Apples' l√† t√¢n ng·ªØ - th·ª© nh·∫≠n h√†nh ƒë·ªông.",
                                hint: "What receives the action?"
                            },
                            {
                                type: "error",
                                question: "Music loves she.",
                                correct: "She loves music.",
                                explanation: "Sai tr·∫≠t t·ª±. ƒê√∫ng: She (S) + loves (V) + music (O).",
                                hint: "S must come first"
                            },
                            {
                                type: "transform",
                                question: "Arrange: friends / have / we / many",
                                correct: "We have many friends.",
                                alternatives: ["We have many friends", "we have many friends"],
                                explanation: "We (S) + have (V) + many friends (O).",
                                hint: "S + V + O"
                            },
                            {
                                type: "fill",
                                question: "___ watch TV. (We/TV/watch)",
                                correct: "We",
                                explanation: "Ch·ªß ng·ªØ ƒë·ª©ng ƒë·∫ßu c√¢u.",
                                hint: "Subject first"
                            },
                            {
                                type: "mcq",
                                question: "Correct sentence:",
                                options: ["Know you I", "I know you", "You I know", "Know I you"],
                                correct: 1,
                                explanation: "I (S) + know (V) + you (O).",
                                hint: "S + V + O pattern"
                            },
                            {
                                type: "transform",
                                question: "Order: English / speaks / he",
                                correct: "He speaks English.",
                                alternatives: ["He speaks English", "he speaks English"],
                                explanation: "He (S) + speaks (V) + English (O).",
                                hint: "Subject + verb + object"
                            },
                            {
                                type: "fill",
                                question: "She likes ___. (chocolate/likes/she)",
                                correct: "chocolate",
                                explanation: "Object ƒë·ª©ng sau ƒë·ªông t·ª´.",
                                hint: "Object comes last"
                            },
                            {
                                type: "error",
                                question: "Basketball plays my brother.",
                                correct: "My brother plays basketball.",
                                explanation: "My brother (S) + plays (V) + basketball (O).",
                                hint: "Subject first, object last"
                            },
                            {
                                type: "mcq",
                                question: "Which is correct?",
                                options: ["Drink I water", "I drink water", "Water drink I", "Drink water I"],
                                correct: 1,
                                explanation: "I (S) + drink (V) + water (O) - correct word order.",
                                hint: "S + V + O"
                            }
                        ]
                    },
                    {
                        id: "a0-4",
                        title: "Basic Nouns & Adjectives",
                        subtitle: "Danh t·ª´ v√† t√≠nh t·ª´ c∆° b·∫£n",
                        grammar: {
                            rule: "Nouns (Danh t·ª´): T√™n ng∆∞·ªùi, v·∫≠t, ƒë·ªãa ƒëi·ªÉm\n" +
                                  "Adjectives (T√≠nh t·ª´): M√¥ t·∫£ danh t·ª´\n\n" +
                                  "Tr·∫≠t t·ª±: Adjective + Noun\n" +
                                  "‚Ä¢ a big house (not: a house big)\n" +
                                  "‚Ä¢ a red car\n" +
                                  "‚Ä¢ happy children\n\n" +
                                  "Singular nouns: a dog, a cat, a book\n" +
                                  "Adjectives kh√¥ng thay ƒë·ªïi s·ªë √≠t/nhi·ªÅu.",
                            examples: [
                                { en: "I have a big dog.", vi: "T√¥i c√≥ m·ªôt con ch√≥ to." },
                                { en: "She is a good student.", vi: "C√¥ ·∫•y l√† h·ªçc sinh gi·ªèi." },
                                { en: "This is a red apple.", vi: "ƒê√¢y l√† m·ªôt qu·∫£ t√°o ƒë·ªè." },
                                { en: "He lives in a small house.", vi: "Anh ·∫•y s·ªëng trong ng√¥i nh√† nh·ªè." },
                                { en: "They are happy people.", vi: "H·ªç l√† nh·ªØng ng∆∞·ªùi vui v·∫ª." },
                                { en: "It's a beautiful day.", vi: "ƒê√≥ l√† m·ªôt ng√†y ƒë·∫πp tr·ªùi." }
                            ],
                            mistakes: [
                                "‚ùå a house big ‚Üí ‚úÖ a big house",
                                "‚ùå a car red ‚Üí ‚úÖ a red car",
                                "‚ùå a student goods ‚Üí ‚úÖ a good student (adjective doesn't change)"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "Where does the adjective go? '___' (big/house)",
                                options: ["house big", "big house", "bigs house", "house bigs"],
                                correct: 1,
                                explanation: "T√≠nh t·ª´ ƒë·ª©ng tr∆∞·ªõc danh t·ª´: big house.",
                                hint: "Adjective + noun"
                            },
                            {
                                type: "error",
                                question: "She has a cat black.",
                                correct: "She has a black cat.",
                                explanation: "T√≠nh t·ª´ ƒë·ª©ng tr∆∞·ªõc danh t·ª´: black cat.",
                                hint: "Adjective before noun"
                            },
                            {
                                type: "fill",
                                question: "I see a ___ dog. (small/big)",
                                correct: "small",
                                alternatives: ["big"],
                                explanation: "T√≠nh t·ª´ ƒë·ª©ng tr∆∞·ªõc danh t·ª´ ƒë·ªÉ m√¥ t·∫£.",
                                hint: "Adjective describes noun"
                            },
                            {
                                type: "mcq",
                                question: "Choose correct: This is a ___ book.",
                                options: ["goods", "good", "book good", "good book"],
                                correct: 1,
                                explanation: "'Good' l√† t√≠nh t·ª´, ƒë·ª©ng tr∆∞·ªõc noun.",
                                hint: "Adjective form"
                            },
                            {
                                type: "transform",
                                question: "Put in order: car / beautiful / a",
                                correct: "a beautiful car",
                                alternatives: ["A beautiful car"],
                                explanation: "a + adjective + noun.",
                                hint: "a + adj + noun"
                            },
                            {
                                type: "fill",
                                question: "They live in a ___ city. (large)",
                                correct: "large",
                                explanation: "Large m√¥ t·∫£ city.",
                                hint: "Adjective describes city"
                            },
                            {
                                type: "error",
                                question: "He is a man tall.",
                                correct: "He is a tall man.",
                                explanation: "Tall ph·∫£i ƒë·ª©ng tr∆∞·ªõc man.",
                                hint: "tall man"
                            },
                            {
                                type: "mcq",
                                question: "What describes the noun? 'a happy child'",
                                options: ["a", "happy", "child", "a happy"],
                                correct: 1,
                                explanation: "'Happy' l√† adjective m√¥ t·∫£ child.",
                                hint: "Which word describes?"
                            },
                            {
                                type: "fill",
                                question: "She has ___ eyes. (blue)",
                                correct: "blue",
                                explanation: "Blue m√¥ t·∫£ m√†u c·ªßa eyes.",
                                hint: "Color adjective"
                            },
                            {
                                type: "transform",
                                question: "Correct order: phone / new / a",
                                correct: "a new phone",
                                alternatives: ["A new phone"],
                                explanation: "Article + adjective + noun.",
                                hint: "a + new + phone"
                            },
                            {
                                type: "mcq",
                                question: "Which is correct?",
                                options: ["a shoes red", "reds shoes", "red shoes", "shoes reds"],
                                correct: 2,
                                explanation: "Red (adjective) + shoes (noun). Adjective kh√¥ng th√™m s.",
                                hint: "No 's' on adjective"
                            },
                            {
                                type: "error",
                                question: "I want an ice cream delicious.",
                                correct: "I want a delicious ice cream.",
                                explanation: "Delicious ƒë·ª©ng tr∆∞·ªõc ice cream.",
                                hint: "delicious ice cream"
                            }
                        ]
                    }
                ]
            },
            A1: {
                name: "Elementary",
                description: "N·ªÅn t·∫£ng c∆° b·∫£n - Giao ti·∫øp ƒë∆°n gi·∫£n",
                lessons: [
                    {
                        id: "a1-1",
                        title: "Simple Present Tense",
                        subtitle: "Th√¨ hi·ªán t·∫°i ƒë∆°n",
                        grammar: {
                            rule: "Simple Present di·ªÖn t·∫£ th√≥i quen, s·ª± th·∫≠t hi·ªÉn nhi√™n, ho·∫∑c h√†nh ƒë·ªông l·∫∑p ƒëi l·∫∑p l·∫°i.\n\n" +
                                  "C√¥ng th·ª©c:\n" +
                                  "‚Ä¢ (+) S + V(s/es)\n" +
                                  "‚Ä¢ (-) S + do/does + not + V\n" +
                                  "‚Ä¢ (?) Do/Does + S + V?\n\n" +
                                  "L∆∞u √Ω: He/She/It th√™m s/es",
                            examples: [
                                { en: "I work every day.", vi: "T√¥i l√†m vi·ªác m·ªói ng√†y." },
                                { en: "She plays tennis.", vi: "C√¥ ·∫•y ch∆°i qu·∫ßn v·ª£t." },
                                { en: "They don't like coffee.", vi: "H·ªç kh√¥ng th√≠ch c√† ph√™." },
                                { en: "Does he speak English?", vi: "Anh ·∫•y c√≥ n√≥i ti·∫øng Anh kh√¥ng?" },
                                { en: "The sun rises in the east.", vi: "M·∫∑t tr·ªùi m·ªçc ·ªü ph√≠a ƒë√¥ng." },
                                { en: "We study English.", vi: "Ch√∫ng t√¥i h·ªçc ti·∫øng Anh." }
                            ],
                            mistakes: [
                                "‚ùå He work hard ‚Üí ‚úÖ He works hard",
                                "‚ùå She don't like it ‚Üí ‚úÖ She doesn't like it",
                                "‚ùå Does they play? ‚Üí ‚úÖ Do they play?"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "She ___ to school every day.",
                                options: ["go", "goes", "going", "gone"],
                                correct: 1,
                                explanation: "She (ng√¥i th·ª© 3 s·ªë √≠t) th√™m 's' v√†o ƒë·ªông t·ª´.",
                                hint: "She = th√™m s/es"
                            },
                            {
                                type: "mcq",
                                question: "They ___ play football on Sundays.",
                                options: ["doesn't", "don't", "isn't", "aren't"],
                                correct: 1,
                                explanation: "'They' s·ªë nhi·ªÅu d√πng 'don't', kh√¥ng d√πng 'doesn't'.",
                                hint: "They = don't"
                            },
                            {
                                type: "fill",
                                question: "He ___ (watch) TV every evening.",
                                correct: "watches",
                                explanation: "He + watch ‚Üí watches (th√™m es v√¨ t·∫≠n c√πng ch).",
                                hint: "watch + es"
                            },
                            {
                                type: "fill",
                                question: "___ you like pizza? (Do/Does)",
                                correct: "Do",
                                explanation: "'You' d√πng v·ªõi 'Do', kh√¥ng d√πng 'Does'.",
                                hint: "You = Do"
                            },
                            {
                                type: "error",
                                question: "She don't speak French.",
                                correct: "She doesn't speak French.",
                                explanation: "She (ng√¥i th·ª© 3) ph·∫£i d√πng 'doesn't', kh√¥ng ph·∫£i 'don't'.",
                                hint: "She = doesn't"
                            },
                            {
                                type: "transform",
                                question: "Make negative: I like ice cream.",
                                correct: "I don't like ice cream.",
                                alternatives: ["I do not like ice cream."],
                                explanation: "Th√™m 'don't' tr∆∞·ªõc ƒë·ªông t·ª´ ch√≠nh ƒë·ªÉ t·∫°o ph·ªß ƒë·ªãnh.",
                                hint: "Th√™m don't"
                            },
                            {
                                type: "mcq",
                                question: "Water ___ at 100 degrees Celsius.",
                                options: ["boil", "boils", "boiling", "boiled"],
                                correct: 1,
                                explanation: "S·ª± th·∫≠t hi·ªÉn nhi√™n d√πng Simple Present. Water (it) th√™m s.",
                                hint: "S·ª± th·∫≠t + ng√¥i th·ª© 3"
                            },
                            {
                                type: "fill",
                                question: "My brother ___ (study) medicine.",
                                correct: "studies",
                                explanation: "study ‚Üí studies (ƒë·ªïi y th√†nh i + es).",
                                hint: "study ‚Üí studies"
                            },
                            {
                                type: "mcq",
                                question: "___ she like chocolate?",
                                options: ["Do", "Does", "Is", "Are"],
                                correct: 1,
                                explanation: "She (ng√¥i th·ª© 3) d√πng 'Does' trong c√¢u h·ªèi.",
                                hint: "She = Does"
                            },
                            {
                                type: "fill",
                                question: "I ___ (not/eat) meat. I'm vegetarian.",
                                correct: "don't eat",
                                alternatives: ["do not eat"],
                                explanation: "I + don't + ƒë·ªông t·ª´ nguy√™n m·∫´u.",
                                hint: "I don't"
                            },
                            {
                                type: "transform",
                                question: "Make question: They play soccer.",
                                correct: "Do they play soccer?",
                                alternatives: ["Do they play soccer"],
                                explanation: "C√¢u h·ªèi: Do + they + ƒë·ªông t·ª´ nguy√™n m·∫´u.",
                                hint: "Do they...?"
                            },
                            {
                                type: "error",
                                question: "My mother cook very well.",
                                correct: "My mother cooks very well.",
                                explanation: "My mother (She) c·∫ßn th√™m 's' v√†o ƒë·ªông t·ª´.",
                                hint: "She = cooks"
                            }
                        ]
                    },
                    {
                        id: "a1-2",
                        title: "Articles: A, An, The",
                        subtitle: "M·∫°o t·ª´",
                        grammar: {
                            rule: "Articles ƒë∆∞·ª£c d√πng tr∆∞·ªõc danh t·ª´:\n\n" +
                                  "‚Ä¢ A: Tr∆∞·ªõc ph·ª• √¢m, ch·ªâ m·ªôt c√°i kh√¥ng x√°c ƒë·ªãnh\n" +
                                  "‚Ä¢ An: Tr∆∞·ªõc nguy√™n √¢m (a,e,i,o,u), kh√¥ng x√°c ƒë·ªãnh\n" +
                                  "‚Ä¢ The: Danh t·ª´ x√°c ƒë·ªãnh, c·∫£ 2 b√™n ƒë·ªÅu bi·∫øt\n\n" +
                                  "Kh√¥ng d√πng article: plural nouns (general), uncountable nouns (general)",
                            examples: [
                                { en: "I have a dog.", vi: "T√¥i c√≥ m·ªôt con ch√≥ (b·∫•t k·ª≥)." },
                                { en: "She is an engineer.", vi: "C√¥ ·∫•y l√† k·ªπ s∆∞." },
                                { en: "The dog is big.", vi: "Con ch√≥ ƒë√≥ to (ch·ªâ con c·ª• th·ªÉ)." },
                                { en: "I need an apple.", vi: "T√¥i c·∫ßn m·ªôt qu·∫£ t√°o." },
                                { en: "The sun is bright.", vi: "M·∫∑t tr·ªùi s√°ng (duy nh·∫•t)." },
                                { en: "Dogs are animals.", vi: "Ch√≥ l√† ƒë·ªông v·∫≠t (n√≥i chung)." }
                            ],
                            mistakes: [
                                "‚ùå I have a apple ‚Üí ‚úÖ I have an apple",
                                "‚ùå He is engineer ‚Üí ‚úÖ He is an engineer",
                                "‚ùå A dogs are cute ‚Üí ‚úÖ Dogs are cute"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "I saw ___ elephant at the zoo.",
                                options: ["a", "an", "the", "no article"],
                                correct: 1,
                                explanation: "'Elephant' b·∫Øt ƒë·∫ßu b·∫±ng nguy√™n √¢m 'e', d√πng 'an'.",
                                hint: "Elephant ‚Üí nguy√™n √¢m"
                            },
                            {
                                type: "mcq",
                                question: "She is ___ best student in class.",
                                options: ["a", "an", "the", "no article"],
                                correct: 2,
                                explanation: "'The best' - so s√°nh nh·∫•t lu√¥n d√πng 'the'.",
                                hint: "Superlative = the"
                            },
                            {
                                type: "fill",
                                question: "He wants to be ___ doctor. (a/an/the)",
                                correct: "a",
                                explanation: "Doctor b·∫Øt ƒë·∫ßu b·∫±ng ph·ª• √¢m 'd', d√πng 'a'.",
                                hint: "Doctor ‚Üí ph·ª• √¢m"
                            },
                            {
                                type: "fill",
                                question: "I need ___ umbrella. (a/an/the)",
                                correct: "an",
                                explanation: "Umbrella b·∫Øt ƒë·∫ßu b·∫±ng nguy√™n √¢m 'u', d√πng 'an'.",
                                hint: "Umbrella ‚Üí nguy√™n √¢m"
                            },
                            {
                                type: "error",
                                question: "She has a orange.",
                                correct: "She has an orange.",
                                explanation: "Orange b·∫Øt ƒë·∫ßu b·∫±ng nguy√™n √¢m, ph·∫£i d√πng 'an'.",
                                hint: "Orange ‚Üí nguy√™n √¢m"
                            },
                            {
                                type: "mcq",
                                question: "___ cats are cute animals. (general statement)",
                                options: ["A", "An", "The", "No article"],
                                correct: 3,
                                explanation: "N√≥i chung v·ªÅ cats, kh√¥ng d√πng article.",
                                hint: "General plural = no article"
                            },
                            {
                                type: "fill",
                                question: "Look at ___ moon! (specific, unique)",
                                correct: "the",
                                explanation: "Moon l√† duy nh·∫•t, ai c≈©ng bi·∫øt, d√πng 'the'.",
                                hint: "Unique = the"
                            },
                            {
                                type: "transform",
                                question: "Add article: I bought car yesterday. (specific car)",
                                correct: "I bought a car yesterday.",
                                alternatives: ["I bought the car yesterday."],
                                explanation: "Mua m·ªôt chi·∫øc xe (l·∫ßn ƒë·∫ßu nh·∫Øc ƒë·∫øn) d√πng 'a'.",
                                hint: "First mention = a"
                            },
                            {
                                type: "mcq",
                                question: "She plays ___ guitar very well.",
                                options: ["a", "an", "the", "no article"],
                                correct: 2,
                                explanation: "Nh·∫°c c·ª• (musical instruments) d√πng 'the'.",
                                hint: "Musical instruments = the"
                            },
                            {
                                type: "fill",
                                question: "He is ___ honest man. (a/an/the)",
                                correct: "an",
                                explanation: "Honest ph√°t √¢m b·∫Øt ƒë·∫ßu b·∫±ng nguy√™n √¢m /…í/, d√πng 'an'.",
                                hint: "Honest sound = vowel"
                            },
                            {
                                type: "error",
                                question: "I go to school by the bus.",
                                correct: "I go to school by bus.",
                                explanation: "Sau 'by + ph∆∞∆°ng ti·ªán' kh√¥ng d√πng article.",
                                hint: "by + transport = no article"
                            },
                            {
                                type: "mcq",
                                question: "___ water is essential for life.",
                                options: ["A", "An", "The", "No article"],
                                correct: 3,
                                explanation: "Water (uncountable, general) kh√¥ng d√πng article.",
                                hint: "General uncountable = no article"
                            }
                        ]
                    },
                    {
                        id: "a1-3",
                        title: "There is / There are",
                        subtitle: "C√≥ (t·ªìn t·∫°i)",
                        grammar: {
                            rule: "There is/are di·ªÖn t·∫£ s·ª± t·ªìn t·∫°i c·ªßa ng∆∞·ªùi/v·∫≠t.\n\n" +
                                  "‚Ä¢ There is + singular noun (There is a book)\n" +
                                  "‚Ä¢ There are + plural noun (There are books)\n" +
                                  "‚Ä¢ There is + uncountable noun (There is water)\n\n" +
                                  "Negative:\n" +
                                  "‚Ä¢ There isn't / There aren't\n\n" +
                                  "Question:\n" +
                                  "‚Ä¢ Is there...? / Are there...?",
                            examples: [
                                { en: "There is a cat on the roof.", vi: "C√≥ m·ªôt con m√®o tr√™n m√°i nh√†." },
                                { en: "There are three apples.", vi: "C√≥ ba qu·∫£ t√°o." },
                                { en: "Is there a problem?", vi: "C√≥ v·∫•n ƒë·ªÅ g√¨ kh√¥ng?" },
                                { en: "There isn't any milk.", vi: "Kh√¥ng c√≥ s·ªØa." },
                                { en: "There are many students in class.", vi: "C√≥ nhi·ªÅu h·ªçc sinh trong l·ªõp." },
                                { en: "Are there any questions?", vi: "C√≥ c√¢u h·ªèi n√†o kh√¥ng?" }
                            ],
                            mistakes: [
                                "‚ùå There are a book ‚Üí ‚úÖ There is a book",
                                "‚ùå There is three cats ‚Üí ‚úÖ There are three cats",
                                "‚ùå Is there books? ‚Üí ‚úÖ Are there books?"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "___ a dog in the garden.",
                                options: ["There is", "There are", "There am", "Is there"],
                                correct: 0,
                                explanation: "A dog (singular) ‚Üí There is.",
                                hint: "Singular = is"
                            },
                            {
                                type: "mcq",
                                question: "___ five books on the table.",
                                options: ["There is", "There are", "Is there", "Are there"],
                                correct: 1,
                                explanation: "Five books (plural) ‚Üí There are.",
                                hint: "Plural = are"
                            },
                            {
                                type: "fill",
                                question: "___ there any water? (Is/Are)",
                                correct: "Is",
                                explanation: "Water (uncountable) ‚Üí Is there.",
                                hint: "Uncountable = is"
                            },
                            {
                                type: "error",
                                question: "There are a chair in the room.",
                                correct: "There is a chair in the room.",
                                explanation: "A chair (singular) ‚Üí There is.",
                                hint: "Singular noun"
                            },
                            {
                                type: "transform",
                                question: "Make negative: There is a problem.",
                                correct: "There isn't a problem.",
                                alternatives: ["There is not a problem.", "There's not a problem."],
                                explanation: "Negative: There isn't / There is not.",
                                hint: "isn't"
                            },
                            {
                                type: "mcq",
                                question: "Are there ___ pencils in your bag?",
                                options: ["a", "an", "any", "much"],
                                correct: 2,
                                explanation: "C√¢u h·ªèi s·ªë nhi·ªÅu d√πng 'any'.",
                                hint: "Questions = any"
                            },
                            {
                                type: "fill",
                                question: "There ___ many people here. (is/are)",
                                correct: "are",
                                explanation: "Many people (plural) ‚Üí are.",
                                hint: "Plural = are"
                            },
                            {
                                type: "transform",
                                question: "Make question: There is a bank near here.",
                                correct: "Is there a bank near here?",
                                alternatives: ["Is there a bank near here"],
                                explanation: "Question: Is there + singular noun?",
                                hint: "Is there...?"
                            },
                            {
                                type: "mcq",
                                question: "There ___ any sugar in the coffee.",
                                options: ["is", "isn't", "are", "aren't"],
                                correct: 1,
                                explanation: "Sugar (uncountable), negative ‚Üí isn't.",
                                hint: "Negative uncountable"
                            },
                            {
                                type: "fill",
                                question: "___ there a library in your town? (Is/Are)",
                                correct: "Is",
                                explanation: "A library (singular) ‚Üí Is there.",
                                hint: "Singular question"
                            },
                            {
                                type: "error",
                                question: "Is there any students in class?",
                                correct: "Are there any students in class?",
                                explanation: "Students (plural) ‚Üí Are there.",
                                hint: "Plural = are"
                            },
                            {
                                type: "mcq",
                                question: "There ___ twenty students in my class.",
                                options: ["is", "are", "am", "be"],
                                correct: 1,
                                explanation: "Twenty students (plural) ‚Üí are.",
                                hint: "Number + plural"
                            }
                        ]
                    },
                    {
                        id: "a1-4",
                        title: "Possessive Adjectives",
                        subtitle: "T√≠nh t·ª´ s·ªü h·ªØu",
                        grammar: {
                            rule: "Possessive adjectives ch·ªâ s·ª± s·ªü h·ªØu, ƒë·ª©ng tr∆∞·ªõc danh t·ª´.\n\n" +
                                  "‚Ä¢ I ‚Üí my\n" +
                                  "‚Ä¢ You ‚Üí your\n" +
                                  "‚Ä¢ He ‚Üí his\n" +
                                  "‚Ä¢ She ‚Üí her\n" +
                                  "‚Ä¢ It ‚Üí its\n" +
                                  "‚Ä¢ We ‚Üí our\n" +
                                  "‚Ä¢ They ‚Üí their\n\n" +
                                  "Kh√¥ng thay ƒë·ªïi theo s·ªë √≠t/nhi·ªÅu c·ªßa danh t·ª´.",
                            examples: [
                                { en: "This is my book.", vi: "ƒê√¢y l√† s√°ch c·ªßa t√¥i." },
                                { en: "She loves her cat.", vi: "C√¥ ·∫•y y√™u con m√®o c·ªßa c√¥ ·∫•y." },
                                { en: "We live in our house.", vi: "Ch√∫ng t√¥i s·ªëng trong nh√† c·ªßa ch√∫ng t√¥i." },
                                { en: "They drive their car.", vi: "H·ªç l√°i xe c·ªßa h·ªç." },
                                { en: "Is this your phone?", vi: "ƒê√¢y c√≥ ph·∫£i ƒëi·ªán tho·∫°i c·ªßa b·∫°n?" },
                                { en: "The dog wags its tail.", vi: "Con ch√≥ v·∫´y ƒëu√¥i c·ªßa n√≥." }
                            ],
                            mistakes: [
                                "‚ùå This is I book ‚Üí ‚úÖ This is my book",
                                "‚ùå She book ‚Üí ‚úÖ Her book",
                                "‚ùå They car ‚Üí ‚úÖ Their car",
                                "‚ùå its' (wrong apostrophe) ‚Üí ‚úÖ its"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "This is ___ house. (I)",
                                options: ["I", "my", "me", "mine"],
                                correct: 1,
                                explanation: "I ‚Üí my (possessive adjective).",
                                hint: "I ‚Üí my"
                            },
                            {
                                type: "mcq",
                                question: "She loves ___ parents. (she)",
                                options: ["she", "her", "hers", "she's"],
                                correct: 1,
                                explanation: "She ‚Üí her (possessive adjective).",
                                hint: "She ‚Üí her"
                            },
                            {
                                type: "fill",
                                question: "We study in ___ classroom. (we)",
                                correct: "our",
                                explanation: "We ‚Üí our.",
                                hint: "We ‚Üí our"
                            },
                            {
                                type: "error",
                                question: "They eat they lunch at 12.",
                                correct: "They eat their lunch at 12.",
                                explanation: "They ‚Üí their (possessive adjective).",
                                hint: "They ‚Üí their"
                            },
                            {
                                type: "mcq",
                                question: "Is this ___ pen? (you)",
                                options: ["you", "your", "yours", "you're"],
                                correct: 1,
                                explanation: "You ‚Üí your.",
                                hint: "You ‚Üí your"
                            },
                            {
                                type: "fill",
                                question: "The cat licks ___ paws. (it)",
                                correct: "its",
                                explanation: "It ‚Üí its (no apostrophe).",
                                hint: "It ‚Üí its"
                            },
                            {
                                type: "transform",
                                question: "Change: I have a brother. (use possessive) ‚Üí This is ___ brother.",
                                correct: "my",
                                alternatives: ["This is my brother."],
                                explanation: "I ‚Üí my brother.",
                                hint: "my"
                            },
                            {
                                type: "mcq",
                                question: "He plays with ___ friends. (he)",
                                options: ["he", "his", "him", "he's"],
                                correct: 1,
                                explanation: "He ‚Üí his.",
                                hint: "He ‚Üí his"
                            },
                            {
                                type: "error",
                                question: "She drives she car to work.",
                                correct: "She drives her car to work.",
                                explanation: "She ‚Üí her (possessive adjective).",
                                hint: "her car"
                            },
                            {
                                type: "fill",
                                question: "___ dog is very friendly. (They)",
                                correct: "Their",
                                explanation: "They ‚Üí Their.",
                                hint: "They ‚Üí Their"
                            },
                            {
                                type: "mcq",
                                question: "Don't confuse: The cat hurt ___ (it) leg.",
                                options: ["it's", "its", "it", "its'"],
                                correct: 1,
                                explanation: "'Its' (no apostrophe) = possessive. 'It's' = it is.",
                                hint: "No apostrophe"
                            },
                            {
                                type: "fill",
                                question: "I love ___ family. (I)",
                                correct: "my",
                                explanation: "I ‚Üí my.",
                                hint: "I ‚Üí my"
                            }
                        ]
                    }
                ]
            },
            A2: {
                name: "Pre-Intermediate",
                description: "Ti·ªÅn trung c·∫•p - Qu√° kh·ª©, t∆∞∆°ng lai, so s√°nh",
                lessons: [
                    {
                        id: "a2-1",
                        title: "Past Simple Tense",
                        subtitle: "Th√¨ qu√° kh·ª© ƒë∆°n",
                        grammar: {
                            rule: "Past Simple di·ªÖn t·∫£ h√†nh ƒë·ªông ƒë√£ ho√†n th√†nh trong qu√° kh·ª©.\n\n" +
                                  "Regular verbs: V + ed\n" +
                                  "Irregular verbs: h·ªçc thu·ªôc (go‚Üíwent, see‚Üísaw)\n\n" +
                                  "C√¥ng th·ª©c:\n" +
                                  "‚Ä¢ (+) S + V2/Ved\n" +
                                  "‚Ä¢ (-) S + didn't + V\n" +
                                  "‚Ä¢ (?) Did + S + V?",
                            examples: [
                                { en: "I visited Paris last year.", vi: "T√¥i ƒë√£ thƒÉm Paris nƒÉm ngo√°i." },
                                { en: "She didn't go to school yesterday.", vi: "C√¥ ·∫•y kh√¥ng ƒëi h·ªçc h√¥m qua." },
                                { en: "Did you see that movie?", vi: "B·∫°n ƒë√£ xem b·ªô phim ƒë√≥ ch∆∞a?" },
                                { en: "They played football.", vi: "H·ªç ƒë√£ ch∆°i b√≥ng ƒë√°." },
                                { en: "He bought a car.", vi: "Anh ·∫•y ƒë√£ mua m·ªôt chi·∫øc xe." },
                                { en: "We were happy.", vi: "Ch√∫ng t√¥i ƒë√£ vui." }
                            ],
                            mistakes: [
                                "‚ùå He didn't went ‚Üí ‚úÖ He didn't go",
                                "‚ùå Did she went? ‚Üí ‚úÖ Did she go?",
                                "‚ùå I go there yesterday ‚Üí ‚úÖ I went there yesterday"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "I ___ to the store yesterday.",
                                options: ["go", "goes", "went", "gone"],
                                correct: 2,
                                explanation: "'Go' l√† ƒë·ªông t·ª´ b·∫•t quy t·∫Øc, qu√° kh·ª© l√† 'went'.",
                                hint: "go ‚Üí went"
                            },
                            {
                                type: "mcq",
                                question: "She ___ study last night.",
                                options: ["doesn't", "didn't", "wasn't", "weren't"],
                                correct: 1,
                                explanation: "Ph·ªß ƒë·ªãnh qu√° kh·ª© d√πng 'didn't' + ƒë·ªông t·ª´ nguy√™n m·∫´u.",
                                hint: "Past negative = didn't"
                            },
                            {
                                type: "fill",
                                question: "They ___ (play) tennis yesterday.",
                                correct: "played",
                                explanation: "Play l√† ƒë·ªông t·ª´ c√≥ quy t·∫Øc, th√™m 'ed'.",
                                hint: "play + ed"
                            },
                            {
                                type: "fill",
                                question: "___ you see John yesterday? (Did/Do)",
                                correct: "Did",
                                explanation: "C√¢u h·ªèi qu√° kh·ª© d√πng 'Did' + ƒë·ªông t·ª´ nguy√™n m·∫´u.",
                                hint: "Past question = Did"
                            },
                            {
                                type: "error",
                                question: "He didn't went home.",
                                correct: "He didn't go home.",
                                explanation: "Sau 'didn't' ph·∫£i d√πng ƒë·ªông t·ª´ nguy√™n m·∫´u, kh√¥ng chia.",
                                hint: "didn't + V nguy√™n m·∫´u"
                            },
                            {
                                type: "transform",
                                question: "Make past: I eat breakfast.",
                                correct: "I ate breakfast.",
                                alternatives: ["I ate breakfast"],
                                explanation: "Eat l√† b·∫•t quy t·∫Øc, qu√° kh·ª© l√† 'ate'.",
                                hint: "eat ‚Üí ate"
                            },
                            {
                                type: "mcq",
                                question: "We ___ very tired after the trip.",
                                options: ["was", "were", "are", "been"],
                                correct: 1,
                                explanation: "'We' l√† s·ªë nhi·ªÅu, qu√° kh·ª© c·ªßa 'to be' l√† 'were'.",
                                hint: "We (past) = were"
                            },
                            {
                                type: "fill",
                                question: "She ___ (buy) a new phone last week.",
                                correct: "bought",
                                explanation: "Buy l√† b·∫•t quy t·∫Øc, qu√° kh·ª© l√† 'bought'.",
                                hint: "buy ‚Üí bought"
                            },
                            {
                                type: "mcq",
                                question: "When ___ you arrive?",
                                options: ["do", "did", "are", "were"],
                                correct: 1,
                                explanation: "C√¢u h·ªèi qu√° kh·ª© d√πng 'Did'.",
                                hint: "Past question = Did"
                            },
                            {
                                type: "fill",
                                question: "I ___ (see) him at the party last night.",
                                correct: "saw",
                                explanation: "See ‚Üí saw (b·∫•t quy t·∫Øc).",
                                hint: "see ‚Üí saw"
                            },
                            {
                                type: "transform",
                                question: "Make negative: They went to the cinema.",
                                correct: "They didn't go to the cinema.",
                                alternatives: ["They did not go to the cinema."],
                                explanation: "Ph·ªß ƒë·ªãnh: didn't + ƒë·ªông t·ª´ nguy√™n m·∫´u.",
                                hint: "didn't + V"
                            },
                            {
                                type: "mcq",
                                question: "Last year, I ___ to Japan.",
                                options: ["go", "goes", "went", "gone"],
                                correct: 2,
                                explanation: "Last year (qu√° kh·ª©) ‚Üí went.",
                                hint: "go ‚Üí went"
                            }
                        ]
                    },
                    {
                        id: "a2-2",
                        title: "Comparative and Superlative",
                        subtitle: "So s√°nh h∆°n v√† nh·∫•t",
                        grammar: {
                            rule: "So s√°nh h∆°n (Comparative): A > B\n" +
                                  "‚Ä¢ Short adj: adj + er (tall ‚Üí taller)\n" +
                                  "‚Ä¢ Long adj: more + adj (beautiful ‚Üí more beautiful)\n\n" +
                                  "So s√°nh nh·∫•t (Superlative): A > all\n" +
                                  "‚Ä¢ Short adj: the + adj + est (tallest)\n" +
                                  "‚Ä¢ Long adj: the most + adj (the most beautiful)\n\n" +
                                  "B·∫•t quy t·∫Øc: good‚Üíbetter‚Üíbest, bad‚Üíworse‚Üíworst",
                            examples: [
                                { en: "She is taller than me.", vi: "C√¥ ·∫•y cao h∆°n t√¥i." },
                                { en: "This is the tallest building.", vi: "ƒê√¢y l√† t√≤a nh√† cao nh·∫•t." },
                                { en: "He is more intelligent than his brother.", vi: "Anh ·∫•y th√¥ng minh h∆°n anh trai." },
                                { en: "This is the most beautiful place.", vi: "ƒê√¢y l√† n∆°i ƒë·∫πp nh·∫•t." },
                                { en: "Today is better than yesterday.", vi: "H√¥m nay t·ªët h∆°n h√¥m qua." },
                                { en: "She is the best student.", vi: "C√¥ ·∫•y l√† h·ªçc sinh gi·ªèi nh·∫•t." }
                            ],
                            mistakes: [
                                "‚ùå more taller ‚Üí ‚úÖ taller",
                                "‚ùå most tall ‚Üí ‚úÖ tallest",
                                "‚ùå gooder ‚Üí ‚úÖ better",
                                "‚ùå the bestest ‚Üí ‚úÖ the best"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "This book is ___ than that one.",
                                options: ["good", "better", "best", "the best"],
                                correct: 1,
                                explanation: "So s√°nh h∆°n c·ªßa 'good' l√† 'better'.",
                                hint: "good ‚Üí better"
                            },
                            {
                                type: "mcq",
                                question: "She is ___ student in the class.",
                                options: ["smart", "smarter", "smartest", "the smartest"],
                                correct: 3,
                                explanation: "So s√°nh nh·∫•t lu√¥n c√≥ 'the' ph√≠a tr∆∞·ªõc.",
                                hint: "Superlative = the + est"
                            },
                            {
                                type: "fill",
                                question: "This problem is ___ (difficult) than the last one.",
                                correct: "more difficult",
                                explanation: "Difficult l√† t√≠nh t·ª´ d√†i, d√πng 'more + adj'.",
                                hint: "Long adj = more"
                            },
                            {
                                type: "fill",
                                question: "He is the ___ (fast) runner in the team.",
                                correct: "fastest",
                                explanation: "Fast l√† t√≠nh t·ª´ ng·∫Øn, th√™m 'est'.",
                                hint: "fast + est"
                            },
                            {
                                type: "error",
                                question: "She is more prettier than her sister.",
                                correct: "She is prettier than her sister.",
                                explanation: "Pretty l√† t√≠nh t·ª´ ng·∫Øn, d√πng 'prettier', kh√¥ng d√πng 'more'.",
                                hint: "Kh√¥ng d√πng more + er"
                            },
                            {
                                type: "transform",
                                question: "Make superlative: This is a good movie. (among all movies)",
                                correct: "This is the best movie.",
                                alternatives: ["This is the best movie"],
                                explanation: "Good ‚Üí best (b·∫•t quy t·∫Øc), th√™m 'the'.",
                                hint: "good ‚Üí best"
                            },
                            {
                                type: "mcq",
                                question: "Today is ___ day of the year.",
                                options: ["hot", "hotter", "hottest", "the hottest"],
                                correct: 3,
                                explanation: "So s√°nh nh·∫•t v·ªõi t√≠nh t·ª´ ng·∫Øn: the + adj + est.",
                                hint: "Superlative + the"
                            },
                            {
                                type: "fill",
                                question: "This test is the ___ (easy) one.",
                                correct: "easiest",
                                explanation: "Easy ‚Üí easiest (ƒë·ªïi y th√†nh i + est).",
                                hint: "easy ‚Üí easiest"
                            },
                            {
                                type: "mcq",
                                question: "My house is ___ than yours.",
                                options: ["big", "bigger", "biggest", "the biggest"],
                                correct: 1,
                                explanation: "So s√°nh h∆°n: big ‚Üí bigger (nh√¢n ƒë√¥i g + er).",
                                hint: "big ‚Üí bigger"
                            },
                            {
                                type: "fill",
                                question: "This is the ___ (bad) movie I've ever seen.",
                                correct: "worst",
                                explanation: "Bad ‚Üí worst (so s√°nh nh·∫•t b·∫•t quy t·∫Øc).",
                                hint: "bad ‚Üí worst"
                            },
                            {
                                type: "transform",
                                question: "Compare: John is 180cm. Mike is 175cm. (tall)",
                                correct: "John is taller than Mike.",
                                alternatives: ["John is taller than Mike", "Mike is shorter than John."],
                                explanation: "So s√°nh 2 ng∆∞·ªùi: adj + er + than.",
                                hint: "taller than"
                            },
                            {
                                type: "mcq",
                                question: "She speaks English ___ fluently than me.",
                                options: ["more", "most", "the most", "very"],
                                correct: 0,
                                explanation: "Fluently (tr·∫°ng t·ª´ d√†i) ‚Üí more fluently.",
                                hint: "Long adverb = more"
                            }
                        ]
                    },
                    {
                        id: "a2-3",
                        title: "Be Going To (Future Plans)",
                        subtitle: "K·∫ø ho·∫°ch t∆∞∆°ng lai",
                        grammar: {
                            rule: "Be going to di·ªÖn t·∫£ k·∫ø ho·∫°ch, d·ª± ƒë·ªãnh ho·∫∑c d·ª± ƒëo√°n trong t∆∞∆°ng lai.\n\n" +
                                  "C√¥ng th·ª©c:\n" +
                                  "‚Ä¢ (+) S + am/is/are + going to + V\n" +
                                  "‚Ä¢ (-) S + am/is/are + not + going to + V\n" +
                                  "‚Ä¢ (?) Am/Is/Are + S + going to + V?\n\n" +
                                  "D√πng khi:\n" +
                                  "‚Ä¢ C√≥ k·∫ø ho·∫°ch tr∆∞·ªõc (I'm going to study tonight)\n" +
                                  "‚Ä¢ D·ª± ƒëo√°n d·ª±a tr√™n b·∫±ng ch·ª©ng (It's going to rain - dark clouds)",
                            examples: [
                                { en: "I'm going to visit Paris next month.", vi: "T√¥i s·∫Ω thƒÉm Paris th√°ng sau." },
                                { en: "She's going to study medicine.", vi: "C√¥ ·∫•y s·∫Ω h·ªçc y khoa." },
                                { en: "Are you going to watch the movie?", vi: "B·∫°n s·∫Ω xem phim ch·ª©?" },
                                { en: "They aren't going to come to the party.", vi: "H·ªç s·∫Ω kh√¥ng ƒë·∫øn b·ªØa ti·ªác." },
                                { en: "It's going to rain.", vi: "Tr·ªùi s·∫Øp m∆∞a." },
                                { en: "We're going to buy a new car.", vi: "Ch√∫ng t√¥i s·∫Ω mua xe m·ªõi." }
                            ],
                            mistakes: [
                                "‚ùå I going to go ‚Üí ‚úÖ I'm going to go / I am going to go",
                                "‚ùå She is going to goes ‚Üí ‚úÖ She is going to go",
                                "‚ùå He are going to ‚Üí ‚úÖ He is going to"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "I ___ watch TV tonight.",
                                options: ["going to", "am going to", "is going to", "are going to"],
                                correct: 1,
                                explanation: "I ‚Üí am going to.",
                                hint: "I = am"
                            },
                            {
                                type: "mcq",
                                question: "She ___ travel to Japan next year.",
                                options: ["going to", "am going to", "is going to", "are going to"],
                                correct: 2,
                                explanation: "She ‚Üí is going to.",
                                hint: "She = is"
                            },
                            {
                                type: "fill",
                                question: "They ___ (not/come) to the meeting.",
                                correct: "aren't going to come",
                                alternatives: ["are not going to come", "'re not going to come"],
                                explanation: "They + are not going to + V.",
                                hint: "aren't going to"
                            },
                            {
                                type: "error",
                                question: "He going to buy a house.",
                                correct: "He is going to buy a house.",
                                alternatives: ["He's going to buy a house."],
                                explanation: "Thi·∫øu 'is' gi·ªØa He v√† going to.",
                                hint: "Need 'is'"
                            },
                            {
                                type: "transform",
                                question: "Make question: You are going to study.",
                                correct: "Are you going to study?",
                                alternatives: ["Are you going to study"],
                                explanation: "ƒê·∫£o 'are' l√™n tr∆∞·ªõc ch·ªß ng·ªØ.",
                                hint: "Are you...?"
                            },
                            {
                                type: "mcq",
                                question: "___ it going to rain?",
                                options: ["Am", "Is", "Are", "Be"],
                                correct: 1,
                                explanation: "It ‚Üí Is.",
                                hint: "It = Is"
                            },
                            {
                                type: "fill",
                                question: "We ___ (visit) our grandparents this weekend.",
                                correct: "are going to visit",
                                alternatives: ["'re going to visit"],
                                explanation: "We + are going to + V.",
                                hint: "We = are going to"
                            },
                            {
                                type: "error",
                                question: "She is going to goes shopping.",
                                correct: "She is going to go shopping.",
                                explanation: "Sau 'going to' d√πng ƒë·ªông t·ª´ nguy√™n m·∫´u (go), kh√¥ng chia.",
                                hint: "going to + V nguy√™n"
                            },
                            {
                                type: "transform",
                                question: "Make negative: I am going to eat pizza.",
                                correct: "I'm not going to eat pizza.",
                                alternatives: ["I am not going to eat pizza."],
                                explanation: "Th√™m 'not' sau am/is/are.",
                                hint: "am not going to"
                            },
                            {
                                type: "mcq",
                                question: "Look at those clouds! It ___ rain.",
                                options: ["going to", "is going", "is going to", "are going to"],
                                correct: 2,
                                explanation: "It + is going to (d·ª± ƒëo√°n d·ª±a v√†o b·∫±ng ch·ª©ng).",
                                hint: "Prediction with evidence"
                            },
                            {
                                type: "fill",
                                question: "What ___ you ___ do tomorrow? (be going to)",
                                correct: "are, going to",
                                alternatives: ["are ... going to"],
                                explanation: "You + are + going to.",
                                hint: "are going to"
                            },
                            {
                                type: "mcq",
                                question: "They ___ move to a new apartment.",
                                options: ["going to", "is going to", "are going to", "am going to"],
                                correct: 2,
                                explanation: "They ‚Üí are going to.",
                                hint: "They = are"
                            }
                        ]
                    },
                    {
                        id: "a2-4",
                        title: "Question Words (Wh-)",
                        subtitle: "T·ª´ ƒë·ªÉ h·ªèi",
                        grammar: {
                            rule: "Question words (Wh- questions) h·ªèi th√¥ng tin c·ª• th·ªÉ:\n\n" +
                                  "‚Ä¢ What: C√°i g√¨? (What is your name?)\n" +
                                  "‚Ä¢ Who: Ai? (Who is she?)\n" +
                                  "‚Ä¢ Where: ·ªû ƒë√¢u? (Where do you live?)\n" +
                                  "‚Ä¢ When: Khi n√†o? (When is your birthday?)\n" +
                                  "‚Ä¢ Why: T·∫°i sao? (Why are you sad?)\n" +
                                  "‚Ä¢ How: Nh∆∞ th·∫ø n√†o? (How are you?)\n" +
                                  "‚Ä¢ Which: C√°i n√†o? (Which color do you like?)\n\n" +
                                  "C·∫•u tr√∫c: Wh- + auxiliary + S + V?",
                            examples: [
                                { en: "What is your name?", vi: "T√™n b·∫°n l√† g√¨?" },
                                { en: "Where do you live?", vi: "B·∫°n s·ªëng ·ªü ƒë√¢u?" },
                                { en: "When did you arrive?", vi: "B·∫°n ƒë·∫øn khi n√†o?" },
                                { en: "Why are you crying?", vi: "T·∫°i sao b·∫°n kh√≥c?" },
                                { en: "How old are you?", vi: "B·∫°n bao nhi√™u tu·ªïi?" },
                                { en: "Who is that man?", vi: "Ng∆∞·ªùi ƒë√†n √¥ng ƒë√≥ l√† ai?" }
                            ],
                            mistakes: [
                                "‚ùå Where you live? ‚Üí ‚úÖ Where do you live?",
                                "‚ùå What you want? ‚Üí ‚úÖ What do you want?",
                                "‚ùå Why she is sad? ‚Üí ‚úÖ Why is she sad?"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "___ is your name?",
                                options: ["Who", "What", "Where", "When"],
                                correct: 1,
                                explanation: "H·ªèi t√™n ‚Üí What.",
                                hint: "Name = what"
                            },
                            {
                                type: "mcq",
                                question: "___ do you live?",
                                options: ["Who", "What", "Where", "When"],
                                correct: 2,
                                explanation: "H·ªèi n∆°i ch·ªën ‚Üí Where.",
                                hint: "Place = where"
                            },
                            {
                                type: "fill",
                                question: "___ are you late? (Why/What)",
                                correct: "Why",
                                explanation: "H·ªèi l√Ω do ‚Üí Why.",
                                hint: "Reason = why"
                            },
                            {
                                type: "error",
                                question: "Where you are from?",
                                correct: "Where are you from?",
                                explanation: "Wh- + be + subject (ƒë·∫£o 'are' l√™n).",
                                hint: "Where are you"
                            },
                            {
                                type: "mcq",
                                question: "___ is your birthday?",
                                options: ["Where", "When", "Who", "Why"],
                                correct: 1,
                                explanation: "H·ªèi th·ªùi gian ‚Üí When.",
                                hint: "Time = when"
                            },
                            {
                                type: "fill",
                                question: "___ does she work? - At a bank. (Where/What)",
                                correct: "Where",
                                explanation: "H·ªèi n∆°i l√†m vi·ªác ‚Üí Where.",
                                hint: "Location"
                            },
                            {
                                type: "transform",
                                question: "Make Wh- question: She is 25 years old. (How old)",
                                correct: "How old is she?",
                                alternatives: ["How old is she"],
                                explanation: "How old + be + subject?",
                                hint: "How old"
                            },
                            {
                                type: "mcq",
                                question: "___ is that woman? - She's my teacher.",
                                options: ["What", "Who", "Where", "How"],
                                correct: 1,
                                explanation: "H·ªèi ng∆∞·ªùi ‚Üí Who.",
                                hint: "Person = who"
                            },
                            {
                                type: "error",
                                question: "What you do every day?",
                                correct: "What do you do every day?",
                                explanation: "What + do + you + V? (c·∫ßn tr·ª£ ƒë·ªông t·ª´ 'do').",
                                hint: "Need 'do'"
                            },
                            {
                                type: "fill",
                                question: "___ color do you like? (What/Which)",
                                correct: "What",
                                alternatives: ["Which"],
                                explanation: "What color ho·∫∑c Which color ƒë·ªÅu ƒë∆∞·ª£c (h·ªèi m√†u s·∫Øc).",
                                hint: "Both OK"
                            },
                            {
                                type: "mcq",
                                question: "___ are you crying? - Because I'm sad.",
                                options: ["What", "Where", "Why", "How"],
                                correct: 2,
                                explanation: "H·ªèi l√Ω do (tr·∫£ l·ªùi b·∫±ng because) ‚Üí Why.",
                                hint: "Because = why"
                            },
                            {
                                type: "transform",
                                question: "Make question: They arrived yesterday. (When)",
                                correct: "When did they arrive?",
                                alternatives: ["When did they arrive"],
                                explanation: "When + did + subject + V?",
                                hint: "When did"
                            }
                        ]
                    }
                ]
            },
            B1: {
                name: "Intermediate",
                description: "Trung c·∫•p - IELTS 5.5-6.0",
                lessons: [
                    {
                        id: "b1-1",
                        title: "Present Perfect Tense",
                        subtitle: "Th√¨ hi·ªán t·∫°i ho√†n th√†nh",
                        grammar: {
                            rule: "Present Perfect di·ªÖn t·∫£ h√†nh ƒë·ªông ƒë√£ ho√†n th√†nh nh∆∞ng c√≥ li√™n quan ƒë·∫øn hi·ªán t·∫°i, ho·∫∑c h√†nh ƒë·ªông x·∫£y ra trong qu√° kh·ª© kh√¥ng x√°c ƒë·ªãnh th·ªùi gian c·ª• th·ªÉ.\n\n" +
                                  "C√¥ng th·ª©c:\n" +
                                  "‚Ä¢ (+) S + have/has + V3/Ved\n" +
                                  "‚Ä¢ (-) S + have/has + not + V3\n" +
                                  "‚Ä¢ (?) Have/Has + S + V3?\n\n" +
                                  "Signal words: already, yet, just, ever, never, for, since",
                            examples: [
                                { en: "I have visited London.", vi: "T√¥i ƒë√£ t·ª´ng ƒë·∫øn London." },
                                { en: "She has just finished her homework.", vi: "C√¥ ·∫•y v·ª´a ho√†n th√†nh b√†i t·∫≠p." },
                                { en: "Have you ever been to Japan?", vi: "B·∫°n ƒë√£ bao gi·ªù ƒë·∫øn Nh·∫≠t B·∫£n ch∆∞a?" },
                                { en: "They haven't seen that movie yet.", vi: "H·ªç ch∆∞a xem b·ªô phim ƒë√≥." },
                                { en: "We have lived here for 5 years.", vi: "Ch√∫ng t√¥i ƒë√£ s·ªëng ·ªü ƒë√¢y 5 nƒÉm." },
                                { en: "He has never tried sushi.", vi: "Anh ·∫•y ch∆∞a bao gi·ªù th·ª≠ sushi." }
                            ],
                            mistakes: [
                                "‚ùå I have go ‚Üí ‚úÖ I have gone",
                                "‚ùå She has ate ‚Üí ‚úÖ She has eaten",
                                "‚ùå Have you went? ‚Üí ‚úÖ Have you gone?",
                                "‚ùå I have seen him yesterday ‚Üí ‚úÖ I saw him yesterday"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "I ___ that movie three times.",
                                options: ["see", "saw", "have seen", "am seeing"],
                                correct: 2,
                                explanation: "H√†nh ƒë·ªông x·∫£y ra trong qu√° kh·ª© kh√¥ng r√µ th·ªùi gian, d√πng Present Perfect.",
                                hint: "Kh√¥ng c√≥ th·ªùi gian c·ª• th·ªÉ"
                            },
                            {
                                type: "mcq",
                                question: "She ___ her homework yet.",
                                options: ["hasn't finished", "didn't finish", "doesn't finish", "isn't finishing"],
                                correct: 0,
                                explanation: "'Yet' l√† d·∫•u hi·ªáu c·ªßa Present Perfect.",
                                hint: "yet = Present Perfect"
                            },
                            {
                                type: "fill",
                                question: "They ___ (live) here since 2020.",
                                correct: "have lived",
                                explanation: "'Since' ch·ªâ m·ªëc th·ªùi gian, d√πng Present Perfect.",
                                hint: "since = have/has + V3"
                            },
                            {
                                type: "fill",
                                question: "___ you ever ___ (be) to Paris?",
                                correct: "Have, been",
                                alternatives: ["Have ... been"],
                                explanation: "'Ever' d√πng trong c√¢u h·ªèi Present Perfect.",
                                hint: "ever = Present Perfect"
                            },
                            {
                                type: "error",
                                question: "He has went to the store.",
                                correct: "He has gone to the store.",
                                explanation: "Go ‚Üí gone (qu√° kh·ª© ph√¢n t·ª´ b·∫•t quy t·∫Øc).",
                                hint: "go ‚Üí gone"
                            },
                            {
                                type: "transform",
                                question: "Change to Present Perfect: I saw this movie. (no specific time)",
                                correct: "I have seen this movie.",
                                alternatives: ["I've seen this movie."],
                                explanation: "Kh√¥ng c√≥ th·ªùi gian c·ª• th·ªÉ ‚Üí Present Perfect.",
                                hint: "Kh√¥ng c√≥ th·ªùi gian = PP"
                            },
                            {
                                type: "mcq",
                                question: "We ___ our homework already.",
                                options: ["finish", "finished", "have finished", "are finishing"],
                                correct: 2,
                                explanation: "'Already' l√† d·∫•u hi·ªáu c·ªßa Present Perfect.",
                                hint: "already = PP"
                            },
                            {
                                type: "fill",
                                question: "She has ___ (eat) breakfast.",
                                correct: "eaten",
                                explanation: "Eat ‚Üí eaten (qu√° kh·ª© ph√¢n t·ª´ b·∫•t quy t·∫Øc).",
                                hint: "eat ‚Üí eaten"
                            },
                            {
                                type: "mcq",
                                question: "I ___ my keys. Can you help me find them?",
                                options: ["lose", "lost", "have lost", "am losing"],
                                correct: 2,
                                explanation: "M·∫•t ch√¨a kh√≥a (·∫£nh h∆∞·ªüng ƒë·∫øn hi·ªán t·∫°i) ‚Üí Present Perfect.",
                                hint: "Effect now = PP"
                            },
                            {
                                type: "fill",
                                question: "How long ___ you ___ (know) each other?",
                                correct: "have, known",
                                alternatives: ["have ... known"],
                                explanation: "'How long' + Present Perfect cho h√†nh ƒë·ªông k√©o d√†i.",
                                hint: "How long = PP"
                            },
                            {
                                type: "error",
                                question: "I have saw this movie before.",
                                correct: "I have seen this movie before.",
                                explanation: "See ‚Üí seen (V3).",
                                hint: "see ‚Üí seen"
                            },
                            {
                                type: "transform",
                                question: "Use Present Perfect: She travels to Italy. (She's been there)",
                                correct: "She has been to Italy.",
                                alternatives: ["She's been to Italy.", "She has traveled to Italy."],
                                explanation: "Kinh nghi·ªám ‚Üí have/has been to.",
                                hint: "Experience = have been to"
                            }
                        ]
                    },
                    {
                        id: "b1-2",
                        title: "Modal Verbs: Can, Could, May, Might",
                        subtitle: "ƒê·ªông t·ª´ khuy·∫øt thi·∫øu",
                        grammar: {
                            rule: "Modal verbs th·ªÉ hi·ªán kh·∫£ nƒÉng, s·ª± cho ph√©p, kh·∫£ nƒÉng x·∫£y ra.\n\n" +
                                  "‚Ä¢ Can: kh·∫£ nƒÉng trong hi·ªán t·∫°i\n" +
                                  "‚Ä¢ Could: kh·∫£ nƒÉng trong qu√° kh·ª© ho·∫∑c l·ªãch s·ª± h∆°n\n" +
                                  "‚Ä¢ May: s·ª± cho ph√©p l·ªãch s·ª±, kh·∫£ nƒÉng x·∫£y ra\n" +
                                  "‚Ä¢ Might: kh·∫£ nƒÉng x·∫£y ra th·∫•p h∆°n may\n\n" +
                                  "Sau modal verb d√πng ƒë·ªông t·ª´ nguy√™n m·∫´u kh√¥ng 'to'.",
                            examples: [
                                { en: "I can swim.", vi: "T√¥i c√≥ th·ªÉ b∆°i." },
                                { en: "Could you help me?", vi: "B·∫°n c√≥ th·ªÉ gi√∫p t√¥i kh√¥ng? (l·ªãch s·ª±)" },
                                { en: "May I use your phone?", vi: "T√¥i c√≥ th·ªÉ d√πng ƒëi·ªán tho·∫°i c·ªßa b·∫°n kh√¥ng?" },
                                { en: "It might rain tomorrow.", vi: "Ng√†y mai c√≥ th·ªÉ m∆∞a." },
                                { en: "She could speak French when she was young.", vi: "C√¥ ·∫•y c√≥ th·ªÉ n√≥i ti·∫øng Ph√°p khi c√≤n nh·ªè." },
                                { en: "You may leave now.", vi: "B·∫°n c√≥ th·ªÉ r·ªùi ƒëi b√¢y gi·ªù." }
                            ],
                            mistakes: [
                                "‚ùå He can speaks ‚Üí ‚úÖ He can speak",
                                "‚ùå She may to go ‚Üí ‚úÖ She may go",
                                "‚ùå I could went ‚Üí ‚úÖ I could go"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "I ___ play the piano when I was a child.",
                                options: ["can", "could", "may", "might"],
                                correct: 1,
                                explanation: "Kh·∫£ nƒÉng trong qu√° kh·ª© d√πng 'could'.",
                                hint: "Past ability = could"
                            },
                            {
                                type: "mcq",
                                question: "___ I borrow your pen?",
                                options: ["Can", "Could", "May", "All are correct"],
                                correct: 3,
                                explanation: "C·∫£ ba ƒë·ªÅu ƒë√∫ng, nh∆∞ng May v√† Could l·ªãch s·ª± h∆°n Can.",
                                hint: "T·∫•t c·∫£ ƒë·ªÅu OK"
                            },
                            {
                                type: "fill",
                                question: "It ___ snow tonight. (possibility - might/may)",
                                correct: "might",
                                alternatives: ["may"],
                                explanation: "Might ho·∫∑c may ƒë·ªÅu di·ªÖn t·∫£ kh·∫£ nƒÉng x·∫£y ra.",
                                hint: "possibility = might/may"
                            },
                            {
                                type: "fill",
                                question: "She ___ speak three languages. (can/could)",
                                correct: "can",
                                explanation: "Kh·∫£ nƒÉng hi·ªán t·∫°i d√πng 'can'.",
                                hint: "Present ability = can"
                            },
                            {
                                type: "error",
                                question: "He can speaks English well.",
                                correct: "He can speak English well.",
                                explanation: "Sau modal verb d√πng ƒë·ªông t·ª´ nguy√™n m·∫´u, kh√¥ng th√™m s.",
                                hint: "can + V nguy√™n m·∫´u"
                            },
                            {
                                type: "transform",
                                question: "Make polite request: Open the window. (use Could)",
                                correct: "Could you open the window?",
                                alternatives: ["Could you open the window"],
                                explanation: "Could you + V l√† c√°ch l·ªãch s·ª± ƒë·ªÉ nh·ªù v·∫£.",
                                hint: "Could you + V?"
                            },
                            {
                                type: "mcq",
                                question: "You ___ be right, but I'm not sure.",
                                options: ["can", "could", "may", "might"],
                                correct: 3,
                                explanation: "Might di·ªÖn t·∫£ kh·∫£ nƒÉng kh√¥ng ch·∫Øc ch·∫Øn.",
                                hint: "Uncertain = might"
                            },
                            {
                                type: "fill",
                                question: "___ I use your bathroom? (May/Can - formal)",
                                correct: "May",
                                alternatives: ["Can"],
                                explanation: "May l·ªãch s·ª± h∆°n Can trong xin ph√©p.",
                                hint: "Formal = May"
                            },
                            {
                                type: "mcq",
                                question: "You ___ be careful when crossing the street.",
                                options: ["can", "must", "may", "might"],
                                correct: 1,
                                explanation: "C·∫£nh b√°o, khuy√™n nh·ªß m·∫°nh ‚Üí must.",
                                hint: "Strong advice = must"
                            },
                            {
                                type: "fill",
                                question: "She ___ swim when she was five. (could/can)",
                                correct: "could",
                                explanation: "Kh·∫£ nƒÉng trong qu√° kh·ª© (when she was five) ‚Üí could.",
                                hint: "Past = could"
                            },
                            {
                                type: "transform",
                                question: "Make polite: Give me the salt. (use Could)",
                                correct: "Could you give me the salt?",
                                alternatives: ["Could you give me the salt", "Could you pass me the salt?"],
                                explanation: "Could you + V = l·ªãch s·ª±.",
                                hint: "Could you...?"
                            },
                            {
                                type: "error",
                                question: "He can to speak Chinese.",
                                correct: "He can speak Chinese.",
                                explanation: "Sau modal verb kh√¥ng d√πng 'to'.",
                                hint: "No 'to' after modal"
                            }
                        ]
                    }
                ]
            },
            B2: {
                name: "Upper-Intermediate",
                description: "Cao c·∫•p trung c·∫•p",
                lessons: [
                    {
                        id: "b2-1",
                        title: "Past Perfect Tense",
                        subtitle: "Th√¨ qu√° kh·ª© ho√†n th√†nh",
                        grammar: {
                            rule: "Past Perfect di·ªÖn t·∫£ h√†nh ƒë·ªông x·∫£y ra tr∆∞·ªõc m·ªôt h√†nh ƒë·ªông kh√°c trong qu√° kh·ª©.\n\n" +
                                  "C√¥ng th·ª©c:\n" +
                                  "‚Ä¢ (+) S + had + V3/Ved\n" +
                                  "‚Ä¢ (-) S + had not + V3\n" +
                                  "‚Ä¢ (?) Had + S + V3?\n\n" +
                                  "Th∆∞·ªùng d√πng v·ªõi: before, after, when, by the time, already, just",
                            examples: [
                                { en: "I had finished my homework before she arrived.", vi: "T√¥i ƒë√£ ho√†n th√†nh b√†i t·∫≠p tr∆∞·ªõc khi c√¥ ·∫•y ƒë·∫øn." },
                                { en: "They had already left when I got there.", vi: "H·ªç ƒë√£ r·ªùi ƒëi khi t√¥i ƒë·∫øn ƒë√≥." },
                                { en: "Had you ever seen snow before you moved here?", vi: "B·∫°n ƒë√£ bao gi·ªù th·∫•y tuy·∫øt tr∆∞·ªõc khi chuy·ªÉn ƒë·∫øn ƒë√¢y ch∆∞a?" },
                                { en: "She had never tried sushi before that day.", vi: "C√¥ ·∫•y ch∆∞a bao gi·ªù th·ª≠ sushi tr∆∞·ªõc ng√†y ƒë√≥." },
                                { en: "By the time we arrived, the movie had started.", vi: "ƒê·∫øn khi ch√∫ng t√¥i t·ªõi th√¨ phim ƒë√£ b·∫Øt ƒë·∫ßu." },
                                { en: "He had lived there for 10 years before he moved.", vi: "Anh ·∫•y ƒë√£ s·ªëng ·ªü ƒë√≥ 10 nƒÉm tr∆∞·ªõc khi chuy·ªÉn ƒëi." }
                            ],
                            mistakes: [
                                "‚ùå I had went ‚Üí ‚úÖ I had gone",
                                "‚ùå She has finished before I arrived ‚Üí ‚úÖ She had finished before I arrived",
                                "‚ùå They had already eat ‚Üí ‚úÖ They had already eaten"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "By the time I arrived, everyone ___.",
                                options: ["left", "has left", "had left", "was leaving"],
                                correct: 2,
                                explanation: "H√†nh ƒë·ªông 'left' x·∫£y ra tr∆∞·ªõc 'arrived', d√πng Past Perfect.",
                                hint: "Before past action = Past Perfect"
                            },
                            {
                                type: "mcq",
                                question: "She ___ never ___ to Paris before 2020.",
                                options: ["has/been", "had/been", "was/being", "did/go"],
                                correct: 1,
                                explanation: "H√†nh ƒë·ªông tr∆∞·ªõc m·ªôt th·ªùi ƒëi·ªÉm trong qu√° kh·ª© (2020) d√πng Past Perfect.",
                                hint: "Before 2020 = Past Perfect"
                            },
                            {
                                type: "fill",
                                question: "I ___ (finish) my work before the meeting started.",
                                correct: "had finished",
                                explanation: "Finish x·∫£y ra tr∆∞·ªõc started, d√πng Past Perfect.",
                                hint: "before + past = had V3"
                            },
                            {
                                type: "fill",
                                question: "They ___ already ___ (eat) when I arrived.",
                                correct: "had, eaten",
                                alternatives: ["had ... eaten"],
                                explanation: "Already + Past Perfect khi c√≥ m·ªëc th·ªùi gian qu√° kh·ª©.",
                                hint: "already + past reference"
                            },
                            {
                                type: "error",
                                question: "He had went home before I called.",
                                correct: "He had gone home before I called.",
                                explanation: "Go ‚Üí gone (qu√° kh·ª© ph√¢n t·ª´).",
                                hint: "go ‚Üí gone"
                            },
                            {
                                type: "transform",
                                question: "Combine: She left. Then I arrived. (use Past Perfect)",
                                correct: "She had left before I arrived.",
                                alternatives: ["She had left when I arrived.", "By the time I arrived, she had left."],
                                explanation: "H√†nh ƒë·ªông x·∫£y ra tr∆∞·ªõc d√πng Past Perfect.",
                                hint: "First action = had V3"
                            },
                            {
                                type: "mcq",
                                question: "After she ___ dinner, she watched TV.",
                                options: ["finished", "has finished", "had finished", "finishes"],
                                correct: 2,
                                explanation: "After + Past Perfect, Past Simple.",
                                hint: "After + PP, PS"
                            },
                            {
                                type: "fill",
                                question: "I realized I ___ (forget) my keys.",
                                correct: "had forgotten",
                                explanation: "Realized (qu√° kh·ª©) ‚Üí h√†nh ƒë·ªông forget x·∫£y ra tr∆∞·ªõc ƒë√≥.",
                                hint: "Before realized"
                            },
                            {
                                type: "mcq",
                                question: "When I got to the station, the train ___.",
                                options: ["left", "has left", "had left", "leaves"],
                                correct: 2,
                                explanation: "Train left tr∆∞·ªõc got ‚Üí Past Perfect.",
                                hint: "Before past = PP"
                            },
                            {
                                type: "fill",
                                question: "She ___ never ___ (see) snow before she moved to Canada.",
                                correct: "had, seen",
                                alternatives: ["had ... seen"],
                                explanation: "Tr∆∞·ªõc khi moved (qu√° kh·ª©) ‚Üí had seen.",
                                hint: "before moved = had V3"
                            },
                            {
                                type: "transform",
                                question: "Combine: I did my homework. Then mom came home.",
                                correct: "I had done my homework before mom came home.",
                                alternatives: ["I had done my homework when mom came home.", "Before mom came home, I had done my homework."],
                                explanation: "H√†nh ƒë·ªông tr∆∞·ªõc (did) d√πng Past Perfect.",
                                hint: "First action = had V3"
                            },
                            {
                                type: "error",
                                question: "They have lived there for 10 years before they moved.",
                                correct: "They had lived there for 10 years before they moved.",
                                explanation: "Tr∆∞·ªõc 'moved' (qu√° kh·ª©) ph·∫£i d√πng Past Perfect.",
                                hint: "before moved = had lived"
                            }
                        ]
                    },
                    {
                        id: "b2-2",
                        title: "Passive Voice",
                        subtitle: "C√¢u b·ªã ƒë·ªông",
                        grammar: {
                            rule: "Passive Voice d√πng khi mu·ªën nh·∫•n m·∫°nh h√†nh ƒë·ªông ho·∫∑c ƒë·ªëi t∆∞·ª£ng b·ªã t√°c ƒë·ªông, kh√¥ng quan t√¢m ai l√†m.\n\n" +
                                  "C√¥ng th·ª©c:\n" +
                                  "‚Ä¢ Active: S + V + O\n" +
                                  "‚Ä¢ Passive: S(O) + be + V3 + (by agent)\n\n" +
                                  "Be chia theo th√¨:\n" +
                                  "‚Ä¢ Present: am/is/are + V3\n" +
                                  "‚Ä¢ Past: was/were + V3\n" +
                                  "‚Ä¢ Present Perfect: have/has been + V3",
                            examples: [
                                { en: "The cake was baked by Mary.", vi: "C√°i b√°nh ƒë∆∞·ª£c l√†m b·ªüi Mary." },
                                { en: "English is spoken worldwide.", vi: "Ti·∫øng Anh ƒë∆∞·ª£c n√≥i tr√™n to√†n th·∫ø gi·ªõi." },
                                { en: "The letter has been sent.", vi: "Th∆∞ ƒë√£ ƒë∆∞·ª£c g·ª≠i." },
                                { en: "The car was repaired yesterday.", vi: "Xe ƒë∆∞·ª£c s·ª≠a h√¥m qua." },
                                { en: "The house will be built next year.", vi: "Ng√¥i nh√† s·∫Ω ƒë∆∞·ª£c x√¢y nƒÉm sau." },
                                { en: "The problem is being solved.", vi: "V·∫•n ƒë·ªÅ ƒëang ƒë∆∞·ª£c gi·∫£i quy·∫øt." }
                            ],
                            mistakes: [
                                "‚ùå The book written by him ‚Üí ‚úÖ The book was written by him",
                                "‚ùå It is build last year ‚Üí ‚úÖ It was built last year",
                                "‚ùå They were build ‚Üí ‚úÖ They were built"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "The house ___ built in 1990.",
                                options: ["is", "was", "has", "had"],
                                correct: 1,
                                explanation: "1990 l√† qu√° kh·ª©, d√πng 'was' + V3.",
                                hint: "Past time = was"
                            },
                            {
                                type: "mcq",
                                question: "English ___ spoken in many countries.",
                                options: ["is", "was", "has", "been"],
                                correct: 0,
                                explanation: "S·ª± th·∫≠t hi·ªÉn nhi√™n, hi·ªán t·∫°i, d√πng 'is'.",
                                hint: "General fact = is"
                            },
                            {
                                type: "fill",
                                question: "The letter ___ (send) yesterday.",
                                correct: "was sent",
                                explanation: "Yesterday = qu√° kh·ª©, passive: was + V3.",
                                hint: "yesterday = was V3"
                            },
                            {
                                type: "transform",
                                question: "Change to passive: They built this bridge in 2010.",
                                correct: "This bridge was built in 2010.",
                                alternatives: ["This bridge was built in 2010 by them."],
                                explanation: "This bridge (O) ‚Üí ch·ªß ng·ªØ, was built (V3), by them c√≥ th·ªÉ b·ªè.",
                                hint: "O ‚Üí S, was V3"
                            },
                            {
                                type: "error",
                                question: "The book written by Shakespeare.",
                                correct: "The book was written by Shakespeare.",
                                explanation: "Thi·∫øu ƒë·ªông t·ª´ 'be', ph·∫£i c√≥ was/were.",
                                hint: "C·∫ßn was/were"
                            },
                            {
                                type: "fill",
                                question: "The problem ___ (solve) already. (Present Perfect)",
                                correct: "has been solved",
                                explanation: "Present Perfect passive: has/have been + V3.",
                                hint: "PP passive = has been V3"
                            },
                            {
                                type: "mcq",
                                question: "The movie ___ by millions of people.",
                                options: ["watched", "was watched", "is watched", "has watched"],
                                correct: 1,
                                explanation: "Qu√° kh·ª©, b·ªã ƒë·ªông: was watched.",
                                hint: "Past passive"
                            },
                            {
                                type: "transform",
                                question: "Active to Passive: Someone stole my bike.",
                                correct: "My bike was stolen.",
                                alternatives: ["My bike was stolen by someone."],
                                explanation: "My bike ‚Üí S, was stolen (V3), by someone c√≥ th·ªÉ b·ªè.",
                                hint: "was stolen"
                            },
                            {
                                type: "mcq",
                                question: "The house ___ painted next week.",
                                options: ["is", "was", "will be", "has been"],
                                correct: 2,
                                explanation: "Next week (t∆∞∆°ng lai) ‚Üí will be + V3.",
                                hint: "Future = will be"
                            },
                            {
                                type: "fill",
                                question: "The car ___ (repair) right now.",
                                correct: "is being repaired",
                                explanation: "Right now (ƒëang di·ªÖn ra) ‚Üí is being + V3.",
                                hint: "Now = is being V3"
                            },
                            {
                                type: "error",
                                question: "The homework must be finish by tomorrow.",
                                correct: "The homework must be finished by tomorrow.",
                                explanation: "Modal passive: must be + V3 (finished).",
                                hint: "must be + V3"
                            },
                            {
                                type: "transform",
                                question: "Change to passive: They are building a new school.",
                                correct: "A new school is being built.",
                                alternatives: ["A new school is being built by them."],
                                explanation: "Present Continuous passive: is/are being + V3.",
                                hint: "is being built"
                            }
                        ]
                    }
                ]
            },
            C1: {
                name: "Advanced",
                description: "N√¢ng cao",
                lessons: [
                    {
                        id: "c1-1",
                        title: "Conditional Sentences Type 3",
                        subtitle: "C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 3",
                        grammar: {
                            rule: "Conditional Type 3 di·ªÖn t·∫£ ƒëi·ªÅu ki·ªán kh√¥ng c√≥ th·∫≠t trong qu√° kh·ª© v√† k·∫øt qu·∫£ tr√°i ng∆∞·ª£c.\n\n" +
                                  "C√¥ng th·ª©c:\n" +
                                  "‚Ä¢ If + S + had + V3, S + would/could/might + have + V3\n\n" +
                                  "D√πng ƒë·ªÉ: gi·∫£ ƒë·ªãnh, h·ªëi ti·∫øc v·ªÅ qu√° kh·ª©",
                            examples: [
                                { en: "If I had studied harder, I would have passed the exam.", vi: "N·∫øu t√¥i h·ªçc chƒÉm h∆°n, t√¥i ƒë√£ ƒë·ªó k·ª≥ thi." },
                                { en: "If she had known, she would have told me.", vi: "N·∫øu c√¥ ·∫•y bi·∫øt, c√¥ ·∫•y ƒë√£ n√≥i v·ªõi t√¥i." },
                                { en: "We could have won if we had tried harder.", vi: "Ch√∫ng t√¥i c√≥ th·ªÉ th·∫Øng n·∫øu c·ªë g·∫Øng h∆°n." },
                                { en: "If they had arrived earlier, they wouldn't have missed the train.", vi: "N·∫øu h·ªç ƒë·∫øn s·ªõm h∆°n, h·ªç ƒë√£ kh√¥ng l·ª° t√†u." },
                                { en: "He might have succeeded if he had worked harder.", vi: "Anh ·∫•y c√≥ th·ªÉ th√†nh c√¥ng n·∫øu l√†m vi·ªác chƒÉm ch·ªâ h∆°n." },
                                { en: "If I had seen you, I would have said hello.", vi: "N·∫øu t√¥i nh√¨n th·∫•y b·∫°n, t√¥i ƒë√£ ch√†o." }
                            ],
                            mistakes: [
                                "‚ùå If I would have known ‚Üí ‚úÖ If I had known",
                                "‚ùå If she has studied ‚Üí ‚úÖ If she had studied",
                                "‚ùå I would pass if I had studied ‚Üí ‚úÖ I would have passed if I had studied"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "If I ___ about the party, I would have come.",
                                options: ["knew", "know", "had known", "have known"],
                                correct: 2,
                                explanation: "Type 3: If + had V3, would have V3.",
                                hint: "Type 3 = had V3"
                            },
                            {
                                type: "mcq",
                                question: "She ___ the test if she had studied more.",
                                options: ["would pass", "would have passed", "will pass", "passed"],
                                correct: 1,
                                explanation: "Main clause Type 3: would have + V3.",
                                hint: "would have V3"
                            },
                            {
                                type: "fill",
                                question: "If they ___ (arrive) earlier, they wouldn't have missed the flight.",
                                correct: "had arrived",
                                explanation: "Type 3 if-clause: had + V3.",
                                hint: "If + had V3"
                            },
                            {
                                type: "fill",
                                question: "I ___ (help) you if I had known you needed it.",
                                correct: "would have helped",
                                alternatives: ["could have helped"],
                                explanation: "Main clause: would/could have + V3.",
                                hint: "would have V3"
                            },
                            {
                                type: "error",
                                question: "If I would have seen you, I would have said hi.",
                                correct: "If I had seen you, I would have said hi.",
                                explanation: "Kh√¥ng d√πng 'would' trong if-clause c·ªßa Type 3.",
                                hint: "No would in if-clause"
                            },
                            {
                                type: "transform",
                                question: "Rewrite: I didn't study, so I failed. (Type 3)",
                                correct: "If I had studied, I wouldn't have failed.",
                                alternatives: ["If I had studied, I would have passed."],
                                explanation: "ƒêi·ªÅu ki·ªán tr√°i v·ªõi qu√° kh·ª© ‚Üí Type 3.",
                                hint: "Past unreal = Type 3"
                            },
                            {
                                type: "mcq",
                                question: "If we ___ harder, we could have won.",
                                options: ["tried", "had tried", "have tried", "try"],
                                correct: 1,
                                explanation: "If-clause Type 3: had + V3.",
                                hint: "had tried"
                            },
                            {
                                type: "fill",
                                question: "She ___ (not/make) that mistake if she had been more careful.",
                                correct: "wouldn't have made",
                                alternatives: ["would not have made"],
                                explanation: "Negative main clause: wouldn't have + V3.",
                                hint: "wouldn't have V3"
                            },
                            {
                                type: "mcq",
                                question: "If you ___ me, I would have helped you.",
                                options: ["asked", "ask", "had asked", "have asked"],
                                correct: 2,
                                explanation: "Type 3 if-clause: had + V3.",
                                hint: "had asked"
                            },
                            {
                                type: "transform",
                                question: "Rewrite: She didn't bring an umbrella, so she got wet.",
                                correct: "If she had brought an umbrella, she wouldn't have got wet.",
                                alternatives: ["If she had brought an umbrella, she wouldn't have gotten wet.", "She wouldn't have got wet if she had brought an umbrella."],
                                explanation: "ƒêi·ªÅu ki·ªán tr√°i v·ªõi qu√° kh·ª© ‚Üí Type 3.",
                                hint: "Type 3 structure"
                            },
                            {
                                type: "fill",
                                question: "If we ___ (leave) earlier, we wouldn't have missed the train.",
                                correct: "had left",
                                explanation: "Type 3: If + had + V3.",
                                hint: "had left"
                            },
                            {
                                type: "error",
                                question: "If I would have known, I would have come.",
                                correct: "If I had known, I would have come.",
                                explanation: "Kh√¥ng bao gi·ªù d√πng 'would' trong if-clause c·ªßa Type 3.",
                                hint: "Never: If I would have"
                            }
                        ]
                    },
                    {
                        id: "c1-2",
                        title: "Relative Clauses",
                        subtitle: "M·ªánh ƒë·ªÅ quan h·ªá",
                        grammar: {
                            rule: "Relative clauses b·ªï sung th√¥ng tin cho danh t·ª´.\n\n" +
                                  "Defining (x√°c ƒë·ªãnh - kh√¥ng d·∫•u ph·∫©y):\n" +
                                  "‚Ä¢ who (ng∆∞·ªùi), which (v·∫≠t), that (c·∫£ hai), where (n∆°i ch·ªën), when (th·ªùi gian)\n\n" +
                                  "Non-defining (kh√¥ng x√°c ƒë·ªãnh - c√≥ d·∫•u ph·∫©y):\n" +
                                  "‚Ä¢ who, which (kh√¥ng d√πng that)\n\n" +
                                  "C√≥ th·ªÉ l∆∞·ª£c b·ªè who/which/that khi l√†m t√¢n ng·ªØ.",
                            examples: [
                                { en: "The man who called you is my brother.", vi: "Ng∆∞·ªùi ƒë√†n √¥ng g·ªçi cho b·∫°n l√† anh t√¥i." },
                                { en: "The book which I bought is interesting.", vi: "Cu·ªën s√°ch t√¥i mua r·∫•t th√∫ v·ªã." },
                                { en: "My friend, who lives in London, is coming.", vi: "B·∫°n t√¥i, ng∆∞·ªùi s·ªëng ·ªü London, s·∫Øp ƒë·∫øn." },
                                { en: "The house where I was born was demolished.", vi: "Ng√¥i nh√† n∆°i t√¥i sinh ra ƒë√£ b·ªã ph√°." },
                                { en: "This is the person (that) I told you about.", vi: "ƒê√¢y l√† ng∆∞·ªùi t√¥i n√≥i v·ªõi b·∫°n." },
                                { en: "The car which he drives is expensive.", vi: "Chi·∫øc xe anh ·∫•y l√°i ƒë·∫Øt ti·ªÅn." }
                            ],
                            mistakes: [
                                "‚ùå The man which called ‚Üí ‚úÖ The man who called",
                                "‚ùå My friend, that lives ‚Üí ‚úÖ My friend, who lives",
                                "‚ùå The book, which I bought it, ‚Üí ‚úÖ The book, which I bought,"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "The woman ___ lives next door is a doctor.",
                                options: ["who", "which", "where", "when"],
                                correct: 0,
                                explanation: "Ng∆∞·ªùi ‚Üí d√πng 'who'.",
                                hint: "Person = who"
                            },
                            {
                                type: "mcq",
                                question: "The book ___ I'm reading is fascinating.",
                                options: ["who", "which", "where", "All correct"],
                                correct: 1,
                                explanation: "V·∫≠t ‚Üí d√πng 'which' ho·∫∑c 'that'.",
                                hint: "Thing = which"
                            },
                            {
                                type: "fill",
                                question: "This is the house ___ I grew up. (where/which)",
                                correct: "where",
                                explanation: "N∆°i ch·ªën ‚Üí 'where'.",
                                hint: "Place = where"
                            },
                            {
                                type: "error",
                                question: "The man which fixed my car was very helpful.",
                                correct: "The man who fixed my car was very helpful.",
                                explanation: "Ng∆∞·ªùi ‚Üí d√πng 'who', kh√¥ng d√πng 'which'.",
                                hint: "Person = who"
                            },
                            {
                                type: "transform",
                                question: "Combine: I met a woman. She is a famous artist. (use who)",
                                correct: "I met a woman who is a famous artist.",
                                alternatives: ["The woman I met is a famous artist.", "The woman who I met is a famous artist."],
                                explanation: "Who thay th·∫ø cho 'woman' v√† n·ªëi hai c√¢u.",
                                hint: "who connects"
                            },
                            {
                                type: "mcq",
                                question: "My sister, ___ is a teacher, lives in Hanoi.",
                                options: ["who", "that", "which", "where"],
                                correct: 0,
                                explanation: "Non-defining clause (c√≥ d·∫•u ph·∫©y) kh√¥ng d√πng 'that'.",
                                hint: "Comma = who/which"
                            },
                            {
                                type: "fill",
                                question: "The day ___ we met was unforgettable. (when/which)",
                                correct: "when",
                                explanation: "Th·ªùi gian ‚Üí 'when'.",
                                hint: "Time = when"
                            },
                            {
                                type: "mcq",
                                question: "The movie ___ we watched last night was boring.",
                                options: ["who", "which", "where", "when"],
                                correct: 1,
                                explanation: "V·∫≠t (movie) ‚Üí 'which' ho·∫∑c c√≥ th·ªÉ l∆∞·ª£c b·ªè.",
                                hint: "Thing = which"
                            },
                            {
                                type: "fill",
                                question: "1998 was the year ___ I was born. (when/which)",
                                correct: "when",
                                explanation: "The year (th·ªùi gian) ‚Üí when.",
                                hint: "Year = when"
                            },
                            {
                                type: "transform",
                                question: "Combine: I have a friend. His father is a pilot. (use whose)",
                                correct: "I have a friend whose father is a pilot.",
                                alternatives: ["I have a friend whose father is a pilot"],
                                explanation: "Whose th·ªÉ hi·ªán s·ªü h·ªØu (his father = whose father).",
                                hint: "Possession = whose"
                            },
                            {
                                type: "error",
                                question: "The restaurant where we ate there was excellent.",
                                correct: "The restaurant where we ate was excellent.",
                                explanation: "'Where' ƒë√£ thay th·∫ø cho 'there', kh√¥ng c·∫ßn l·∫∑p l·∫°i.",
                                hint: "Remove 'there'"
                            },
                            {
                                type: "mcq",
                                question: "Anyone ___ wants to join can sign up here.",
                                options: ["who", "which", "whose", "whom"],
                                correct: 0,
                                explanation: "Anyone (ng∆∞·ªùi) ‚Üí who.",
                                hint: "Person = who"
                            }
                        ]
                    }
                ]
            },
            C2: {
                name: "Proficiency",
                description: "Th√¥ng th·∫°o",
                lessons: [
                    {
                        id: "c2-1",
                        title: "Inversion for Emphasis",
                        subtitle: "ƒê·∫£o ng·ªØ nh·∫•n m·∫°nh",
                        grammar: {
                            rule: "Inversion (ƒë·∫£o tr·ª£ ƒë·ªông t·ª´ l√™n tr∆∞·ªõc ch·ªß ng·ªØ) ƒë·ªÉ nh·∫•n m·∫°nh, trang tr·ªçng.\n\n" +
                                  "C√°c tr∆∞·ªùng h·ª£p:\n" +
                                  "‚Ä¢ Negative adverbs: Never, Rarely, Seldom, Hardly, No sooner\n" +
                                  "‚Ä¢ Only + time: Only then, Only after\n" +
                                  "‚Ä¢ Not only... but also\n" +
                                  "‚Ä¢ So/Such... that\n\n" +
                                  "C√¥ng th·ª©c: Adverb + Auxiliary + Subject + Verb",
                            examples: [
                                { en: "Never have I seen such a beautiful place.", vi: "Ch∆∞a bao gi·ªù t√¥i th·∫•y n∆°i ƒë·∫πp nh∆∞ v·∫≠y." },
                                { en: "Rarely do we get such opportunities.", vi: "Hi·∫øm khi ch√∫ng ta c√≥ c∆° h·ªôi nh∆∞ v·∫≠y." },
                                { en: "Only then did I realize my mistake.", vi: "Ch·ªâ l√∫c ƒë√≥ t√¥i m·ªõi nh·∫≠n ra l·ªói l·∫ßm." },
                                { en: "Not only did she win, but she also broke the record.", vi: "Kh√¥ng ch·ªâ th·∫Øng m√† c√¥ ·∫•y c√≤n ph√° k·ª∑ l·ª•c." },
                                { en: "Seldom has the team played so well.", vi: "Hi·∫øm khi ƒë·ªôi ch∆°i hay nh∆∞ v·∫≠y." },
                                { en: "No sooner had I arrived than it started raining.", vi: "V·ª´a m·ªõi t√¥i ƒë·∫øn th√¨ tr·ªùi m∆∞a." }
                            ],
                            mistakes: [
                                "‚ùå Never I have seen ‚Üí ‚úÖ Never have I seen",
                                "‚ùå Rarely we get ‚Üí ‚úÖ Rarely do we get",
                                "‚ùå Only then I realized ‚Üí ‚úÖ Only then did I realize"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "Never ___ such a difficult problem.",
                                options: ["I have seen", "have I seen", "I saw", "did I saw"],
                                correct: 1,
                                explanation: "Never ‚Üí ƒë·∫£o have l√™n tr∆∞·ªõc ch·ªß ng·ªØ.",
                                hint: "Never + have + S"
                            },
                            {
                                type: "transform",
                                question: "Rewrite with inversion: I have rarely seen such beauty.",
                                correct: "Rarely have I seen such beauty.",
                                alternatives: ["Rarely have I seen such beauty"],
                                explanation: "Rarely l√™n ƒë·∫ßu ‚Üí ƒë·∫£o have l√™n tr∆∞·ªõc I.",
                                hint: "Rarely have I"
                            },
                            {
                                type: "mcq",
                                question: "Only after the war ___ the true cost.",
                                options: ["we understood", "did we understand", "we did understand", "understand we"],
                                correct: 1,
                                explanation: "Only after ‚Üí ƒë·∫£o tr·ª£ ƒë·ªông t·ª´ (did) l√™n.",
                                hint: "Only after + did + S"
                            },
                            {
                                type: "fill",
                                question: "Seldom ___ (do/does) she complain.",
                                correct: "does",
                                explanation: "She (ng√¥i th·ª© 3) ‚Üí does.",
                                hint: "she = does"
                            },
                            {
                                type: "error",
                                question: "Never I will forget this day.",
                                correct: "Never will I forget this day.",
                                explanation: "Never ‚Üí ƒë·∫£o will l√™n tr∆∞·ªõc I.",
                                hint: "Never will I"
                            },
                            {
                                type: "transform",
                                question: "Rewrite: We had no sooner arrived than the party started.",
                                correct: "No sooner had we arrived than the party started.",
                                alternatives: ["No sooner had we arrived than the party started"],
                                explanation: "No sooner ‚Üí ƒë·∫£o had l√™n tr∆∞·ªõc we.",
                                hint: "No sooner had"
                            },
                            {
                                type: "mcq",
                                question: "Not only ___ the race, but he also broke the record.",
                                options: ["he won", "did he win", "he did win", "won he"],
                                correct: 1,
                                explanation: "Not only ‚Üí ƒë·∫£o tr·ª£ ƒë·ªông t·ª´.",
                                hint: "Not only did"
                            },
                            {
                                type: "fill",
                                question: "Hardly ___ (have/had) I finished when she called.",
                                correct: "had",
                                explanation: "Hardly + Past Perfect (had) + when.",
                                hint: "Hardly had"
                            },
                            {
                                type: "mcq",
                                question: "Under no circumstances ___ this rule be broken.",
                                options: ["should", "should not", "it should", "shouldn't"],
                                correct: 0,
                                explanation: "Under no circumstances ‚Üí ƒë·∫£o ng·ªØ (should be).",
                                hint: "Negative phrase = inversion"
                            },
                            {
                                type: "transform",
                                question: "Rewrite: We have seldom seen such talent.",
                                correct: "Seldom have we seen such talent.",
                                alternatives: ["Seldom have we seen such talent"],
                                explanation: "Seldom ‚Üí ƒë·∫£o have l√™n tr∆∞·ªõc we.",
                                hint: "Seldom have"
                            },
                            {
                                type: "fill",
                                question: "Little ___ (do/did) he know what awaited him.",
                                correct: "did",
                                explanation: "Little (negative) ‚Üí ƒë·∫£o tr·ª£ ƒë·ªông t·ª´.",
                                hint: "Little did"
                            },
                            {
                                type: "error",
                                question: "Only when I saw her I realized my mistake.",
                                correct: "Only when I saw her did I realize my mistake.",
                                explanation: "Only when ‚Üí ƒë·∫£o tr·ª£ ƒë·ªông t·ª´ (did) l√™n tr∆∞·ªõc I.",
                                hint: "Only when... did I"
                            }
                        ]
                    },
                    {
                        id: "c2-2",
                        title: "Cleft Sentences",
                        subtitle: "C√¢u ch·∫ª (nh·∫•n m·∫°nh)",
                        grammar: {
                            rule: "Cleft sentences chia c√¢u th√†nh 2 ph·∫ßn ƒë·ªÉ nh·∫•n m·∫°nh m·ªôt th√†nh ph·∫ßn c·ª• th·ªÉ.\n\n" +
                                  "C√°c c·∫•u tr√∫c:\n" +
                                  "‚Ä¢ It + be + nh·∫•n m·∫°nh + that/who + ph·∫ßn c√≤n l·∫°i\n" +
                                  "‚Ä¢ What + S + V + be + nh·∫•n m·∫°nh\n" +
                                  "‚Ä¢ The thing that... / The person who...\n\n" +
                                  "D√πng ƒë·ªÉ: nh·∫•n m·∫°nh ch·ªß ng·ªØ, t√¢n ng·ªØ, ho·∫∑c tr·∫°ng ng·ªØ",
                            examples: [
                                { en: "It was John who broke the window.", vi: "Ch√≠nh John ƒë√£ ph√° c·ª≠a s·ªï." },
                                { en: "What I need is a holiday.", vi: "ƒêi·ªÅu t√¥i c·∫ßn l√† m·ªôt k·ª≥ ngh·ªâ." },
                                { en: "It's in Paris that I met her.", vi: "Ch√≠nh ·ªü Paris t√¥i g·∫∑p c√¥ ·∫•y." },
                                { en: "What she said surprised me.", vi: "ƒêi·ªÅu c√¥ ·∫•y n√≥i l√†m t√¥i ng·∫°c nhi√™n." },
                                { en: "It was yesterday that he called.", vi: "Ch√≠nh h√¥m qua anh ·∫•y g·ªçi." },
                                { en: "The thing that I love most is music.", vi: "ƒêi·ªÅu t√¥i y√™u nh·∫•t l√† √¢m nh·∫°c." }
                            ],
                            mistakes: [
                                "‚ùå It is John which broke ‚Üí ‚úÖ It was John who broke",
                                "‚ùå What I needs is ‚Üí ‚úÖ What I need is",
                                "‚ùå It's Paris where I met ‚Üí ‚úÖ It's in Paris that I met (ho·∫∑c It was Paris where...)"
                            ]
                        },
                        exercises: [
                            {
                                type: "mcq",
                                question: "It was Mary ___ solved the problem.",
                                options: ["who", "which", "what", "whose"],
                                correct: 0,
                                explanation: "Nh·∫•n m·∫°nh ng∆∞·ªùi ‚Üí d√πng 'who'.",
                                hint: "Person = who"
                            },
                            {
                                type: "transform",
                                question: "Emphasize 'yesterday': I saw her yesterday.",
                                correct: "It was yesterday that I saw her.",
                                alternatives: ["It was yesterday when I saw her."],
                                explanation: "Nh·∫•n m·∫°nh tr·∫°ng ng·ªØ th·ªùi gian v·ªõi It was... that.",
                                hint: "It was... that"
                            },
                            {
                                type: "mcq",
                                question: "What I want ___ some peace and quiet.",
                                options: ["is", "are", "was", "were"],
                                correct: 0,
                                explanation: "What I want (s·ªë √≠t) ‚Üí is.",
                                hint: "What I want = singular"
                            },
                            {
                                type: "fill",
                                question: "It was ___ London ___ we first met. (in/that)",
                                correct: "in, that",
                                alternatives: ["in ... that"],
                                explanation: "Nh·∫•n m·∫°nh n∆°i ch·ªën: in London that...",
                                hint: "in... that"
                            },
                            {
                                type: "error",
                                question: "What she needs are more time.",
                                correct: "What she needs is more time.",
                                explanation: "What she needs (ch·ªß ng·ªØ s·ªë √≠t) ‚Üí is.",
                                hint: "needs (singular) = is"
                            },
                            {
                                type: "transform",
                                question: "Emphasize 'coffee': I like coffee most.",
                                correct: "What I like most is coffee.",
                                alternatives: ["It is coffee that I like most.", "It's coffee that I like most."],
                                explanation: "D√πng What... is ƒë·ªÉ nh·∫•n m·∫°nh.",
                                hint: "What I like... is"
                            },
                            {
                                type: "mcq",
                                question: "The person ___ helped me was very kind.",
                                options: ["who", "which", "what", "whose"],
                                correct: 0,
                                explanation: "Ng∆∞·ªùi ‚Üí who.",
                                hint: "Person = who"
                            },
                            {
                                type: "fill",
                                question: "It ___ (be) John who called me last night.",
                                correct: "was",
                                explanation: "Last night (qu√° kh·ª©) ‚Üí was.",
                                hint: "Past = was"
                            },
                            {
                                type: "transform",
                                question: "Emphasize 'at the party': I met her at the party.",
                                correct: "It was at the party that I met her.",
                                alternatives: ["It was at the party where I met her."],
                                explanation: "Nh·∫•n m·∫°nh n∆°i ch·ªën: It was... that/where.",
                                hint: "It was... that"
                            },
                            {
                                type: "mcq",
                                question: "The thing ___ annoys me most is his attitude.",
                                options: ["who", "which", "that", "Both B & C"],
                                correct: 3,
                                explanation: "Thing ‚Üí which ho·∫∑c that ƒë·ªÅu ƒë∆∞·ª£c.",
                                hint: "Thing = which/that"
                            },
                            {
                                type: "fill",
                                question: "What we need ___ (be) more time and money.",
                                correct: "is",
                                explanation: "What we need (singular subject) ‚Üí is.",
                                hint: "What we need = singular"
                            },
                            {
                                type: "error",
                                question: "It's coffee what I like most.",
                                correct: "It's coffee that I like most.",
                                explanation: "Cleft sentence d√πng 'that', kh√¥ng d√πng 'what' ·ªü v·ªã tr√≠ n√†y.",
                                hint: "Use 'that'"
                            }
                        ]
                    }
                ]
            }
        };

        // ==================== STATE MANAGEMENT ====================
        let currentLevel = 'A0';
        let currentLesson = null;
        let userAnswers = {};
        let progress = {}; // {lessonId: {score, completed, wrong: []}}

        // ==================== INITIALIZATION ====================
        function init() {
            loadProgress();
            renderLevelTabs();
            renderLevelContent(currentLevel);
            setupEventListeners();
        }

        function setupEventListeners() {
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                    e.target.classList.add('active');
                    currentLevel = e.target.dataset.level;
                    renderLevelContent(currentLevel);
                });
            });
        }

        function renderLevelTabs() {
            // Already in HTML
        }

        function renderLevelContent(level) {
            const levelData = curriculum[level];
            const container = document.getElementById('mainContent');
            
            let html = `
                <div class="level-section active">
                    <h2>${level} - ${levelData.name}</h2>
                    <p style="font-size: 1.1em; color: #666; margin: 10px 0 20px 0;">${levelData.description}</p>
                    
                    <div class="tools-bar">
                        <button class="tool-btn" onclick="exportProgress()">üì§ Export Progress</button>
                        <button class="tool-btn" onclick="showImportModal()">üì• Import Progress</button>
                        <button class="tool-btn" onclick="resetProgress()">üîÑ Reset Progress</button>
                    </div>
                    
                    <div class="lessons-grid">
            `;

            levelData.lessons.forEach(lesson => {
                const lessonProgress = progress[lesson.id] || { score: 0, completed: false };
                const progressPercent = lessonProgress.completed ? 100 : (lessonProgress.score || 0);

                html += `
                    <div class="lesson-card" onclick="openLesson('${level}', '${lesson.id}')">
                        <h3>${lesson.title}</h3>
                        <p style="color: #666; margin: 10px 0;">${lesson.subtitle}</p>
                        <p style="font-size: 0.9em; color: #999;">
                            ${lessonProgress.completed ? '‚úÖ Completed' : 'üìù In Progress'}
                        </p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progressPercent}%"></div>
                        </div>
                        <p style="font-size: 0.85em; color: #667eea; margin-top: 5px;">
                            Score: ${progressPercent}%
                        </p>
                    </div>
                `;
            });

            html += `
                    </div>
                </div>
            `;

            container.innerHTML = html;
        }

        function openLesson(level, lessonId) {
            const levelData = curriculum[level];
            const lesson = levelData.lessons.find(l => l.id === lessonId);
            currentLesson = lesson;
            userAnswers = {};

            const container = document.getElementById('mainContent');
            
            let html = `
                <div class="lesson-detail active">
                    <button class="back-btn" onclick="backToLessons()">‚¨ÖÔ∏è Quay l·∫°i</button>
                    
                    <h2>${lesson.title}</h2>
                    <p style="font-size: 1.1em; color: #666; margin-bottom: 30px;">${lesson.subtitle}</p>
                    
                    <div class="grammar-section">
                        <h3>üìö Grammar Rule</h3>
                        <p style="white-space: pre-line; line-height: 1.8;">${lesson.grammar.rule}</p>
                    </div>
                    
                    <div class="grammar-section">
                        <h3>üí° Examples</h3>
                        ${lesson.grammar.examples.map(ex => `
                            <div class="example">
                                <strong>${ex.en}</strong><br>
                                <span style="color: #666;">${ex.vi}</span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="mistakes-section">
                        <h3>‚ö†Ô∏è Common Mistakes</h3>
                        ${lesson.grammar.mistakes.map(m => `<p style="margin: 8px 0;">${m}</p>`).join('')}
                    </div>
                    
                    <div class="exercises-section">
                        <h2 style="margin-bottom: 20px;">‚úèÔ∏è Practice Exercises</h2>
                        <div class="score-display" id="scoreDisplay">
                            Score: 0/${lesson.exercises.length} | 0%
                        </div>
                        
                        <div class="tools-bar">
                            <button class="tool-btn" onclick="window.print()">üñ®Ô∏è Print Worksheet</button>
                            <button class="tool-btn" onclick="resetExercises()">üîÑ Reset Exercises</button>
                        </div>
                        
                        ${lesson.exercises.map((ex, idx) => renderExercise(ex, idx)).join('')}
                        
                        <button class="submit-btn" onclick="submitAllAnswers()" style="font-size: 1.2em; padding: 15px 40px; margin-top: 30px;">
                            ‚úÖ Submit All Answers
                        </button>
                    </div>
                </div>
            `;

            container.innerHTML = html;
        }

        function renderExercise(exercise, index) {
            const types = {
                'mcq': 'Multiple Choice',
                'fill': 'Fill in the Blank',
                'error': 'Error Correction',
                'transform': 'Sentence Transformation'
            };

            let html = `
                <div class="exercise-item" id="exercise-${index}">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="background: #667eea; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.9em;">
                            ${index + 1}. ${types[exercise.type]}
                        </span>
                        <button class="hint-btn" onclick="showHint(${index})">üí° Hint</button>
                    </div>
                    
                    <div class="exercise-question">${exercise.question}</div>
            `;

            if (exercise.type === 'mcq') {
                html += '<div class="exercise-options">';
                exercise.options.forEach((opt, optIdx) => {
                    html += `
                        <button class="option-btn" onclick="selectOption(${index}, ${optIdx})">
                            ${String.fromCharCode(65 + optIdx)}. ${opt}
                        </button>
                    `;
                });
                html += '</div>';
            } else {
                html += `
                    <input type="text" 
                           id="answer-${index}" 
                           placeholder="Type your answer here..." 
                           onkeypress="if(event.key==='Enter') checkSingleAnswer(${index})">
                    <button class="check-btn" onclick="checkSingleAnswer(${index})">Check Answer</button>
                `;
            }

            html += `
                    <div class="explanation" id="explanation-${index}">
                        <strong>üí° Hint:</strong> ${exercise.hint}<br><br>
                        <strong>üìñ Explanation:</strong> ${exercise.explanation}<br>
                        <strong>‚úÖ Correct Answer:</strong> ${getCorrectAnswer(exercise)}
                    </div>
                </div>
            `;

            return html;
        }

        function getCorrectAnswer(exercise) {
            if (exercise.type === 'mcq') {
                return exercise.options[exercise.correct];
            }
            return exercise.correct;
        }

        function selectOption(exerciseIdx, optionIdx) {
            const exercise = currentLesson.exercises[exerciseIdx];
            const container = document.getElementById(`exercise-${exerciseIdx}`);
            
            // Remove previous selections
            container.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Mark new selection
            container.querySelectorAll('.option-btn')[optionIdx].classList.add('selected');
            
            userAnswers[exerciseIdx] = optionIdx;
        }

        function checkSingleAnswer(exerciseIdx) {
            const exercise = currentLesson.exercises[exerciseIdx];
            const input = document.getElementById(`answer-${exerciseIdx}`);
            const userAnswer = input.value.trim().toLowerCase();
            
            if (!userAnswer) {
                alert('Please enter an answer first!');
                return;
            }

            userAnswers[exerciseIdx] = userAnswer;
            
            const correct = exercise.correct.toLowerCase();
            const alternatives = exercise.alternatives ? exercise.alternatives.map(a => a.toLowerCase()) : [];
            
            const isCorrect = userAnswer === correct || alternatives.includes(userAnswer);
            
            const container = document.getElementById(`exercise-${exerciseIdx}`);
            container.classList.remove('correct', 'incorrect');
            container.classList.add(isCorrect ? 'correct' : 'incorrect');
            
            document.getElementById(`explanation-${exerciseIdx}`).classList.add('show');
            
            if (isCorrect) {
                input.style.borderColor = '#28a745';
                input.style.background = '#d4edda';
            } else {
                input.style.borderColor = '#dc3545';
                input.style.background = '#f8d7da';
            }
        }

        function showHint(exerciseIdx) {
            const explanation = document.getElementById(`explanation-${exerciseIdx}`);
            explanation.classList.toggle('show');
        }

        function submitAllAnswers() {
            if (Object.keys(userAnswers).length === 0) {
                alert('Please answer at least one question!');
                return;
            }

            let correct = 0;
            const total = currentLesson.exercises.length;
            const wrongItems = [];

            currentLesson.exercises.forEach((exercise, idx) => {
                const container = document.getElementById(`exercise-${idx}`);
                const userAnswer = userAnswers[idx];

                if (userAnswer === undefined || userAnswer === null || userAnswer === '') {
                    container.classList.add('incorrect');
                    wrongItems.push(idx);
                    return;
                }

                let isCorrect = false;

                if (exercise.type === 'mcq') {
                    isCorrect = parseInt(userAnswer) === exercise.correct;
                    
                    const buttons = container.querySelectorAll('.option-btn');
                    buttons.forEach((btn, btnIdx) => {
                        btn.disabled = true;
                        if (btnIdx === exercise.correct) {
                            btn.classList.add('correct');
                        } else if (btnIdx === parseInt(userAnswer) && !isCorrect) {
                            btn.classList.add('incorrect');
                        }
                    });
                } else {
                    const correctAnswer = exercise.correct.toLowerCase();
                    const alternatives = exercise.alternatives ? exercise.alternatives.map(a => a.toLowerCase()) : [];
                    const userAnswerLower = String(userAnswer).trim().toLowerCase();
                    
                    isCorrect = userAnswerLower === correctAnswer || alternatives.includes(userAnswerLower);
                }

                container.classList.remove('correct', 'incorrect');
                container.classList.add(isCorrect ? 'correct' : 'incorrect');
                
                document.getElementById(`explanation-${idx}`).classList.add('show');

                if (isCorrect) {
                    correct++;
                } else {
                    wrongItems.push(idx);
                }
            });

            const score = Math.round((correct / total) * 100);
            
            // Update score display
            const scoreDisplay = document.getElementById('scoreDisplay');
            scoreDisplay.innerHTML = `
                Score: ${correct}/${total} | ${score}%
                ${score >= 80 ? 'üéâ Excellent!' : score >= 60 ? 'üëç Good job!' : 'üí™ Keep practicing!'}
            `;

            // Save progress
            progress[currentLesson.id] = {
                score: score,
                completed: score >= 80,
                wrong: wrongItems,
                lastAttempt: new Date().toISOString()
            };
            saveProgress();

            // Scroll to score
            scoreDisplay.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function resetExercises() {
            if (!confirm('Reset all answers for this lesson?')) return;
            
            userAnswers = {};
            currentLesson.exercises.forEach((exercise, idx) => {
                const container = document.getElementById(`exercise-${idx}`);
                container.classList.remove('correct', 'incorrect');
                
                if (exercise.type === 'mcq') {
                    container.querySelectorAll('.option-btn').forEach(btn => {
                        btn.classList.remove('selected', 'correct', 'incorrect');
                        btn.disabled = false;
                    });
                } else {
                    const input = document.getElementById(`answer-${idx}`);
                    input.value = '';
                    input.style.borderColor = '';
                    input.style.background = '';
                }
                
                document.getElementById(`explanation-${idx}`).classList.remove('show');
            });
            
            document.getElementById('scoreDisplay').innerHTML = `Score: 0/${currentLesson.exercises.length} | 0%`;
        }

        function backToLessons() {
            renderLevelContent(currentLevel);
        }

        // ==================== PROGRESS MANAGEMENT ====================
        function saveProgress() {
            localStorage.setItem('grammar-progress', JSON.stringify(progress));
        }

        function loadProgress() {
            const saved = localStorage.getItem('grammar-progress');
            if (saved) {
                try {
                    progress = JSON.parse(saved);
                } catch (e) {
                    progress = {};
                }
            }
        }

        function exportProgress() {
            const data = JSON.stringify(progress, null, 2);
            document.getElementById('exportData').value = data;
            document.getElementById('exportModal').classList.add('show');
        }

        function copyExport() {
            const textarea = document.getElementById('exportData');
            textarea.select();
            document.execCommand('copy');
            alert('‚úÖ Copied to clipboard!');
        }

        function showImportModal() {
            document.getElementById('importModal').classList.add('show');
        }

        function importProgress() {
            const data = document.getElementById('importData').value;
            try {
                const imported = JSON.parse(data);
                progress = imported;
                saveProgress();
                closeModal();
                alert('‚úÖ Progress imported successfully!');
                renderLevelContent(currentLevel);
            } catch (e) {
                alert('‚ùå Invalid JSON data. Please check and try again.');
            }
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(m => m.classList.remove('show'));
        }

        function resetProgress() {
            if (!confirm('Are you sure you want to reset ALL progress? This cannot be undone!')) return;
            
            progress = {};
            saveProgress();
            alert('‚úÖ Progress reset successfully!');
            renderLevelContent(currentLevel);
        }

        // Click outside modal to close
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                closeModal();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // ==================== START APP ====================
        init();
    </script>
</body>
</html>